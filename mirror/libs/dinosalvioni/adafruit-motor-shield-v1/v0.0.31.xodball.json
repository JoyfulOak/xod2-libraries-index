{
  "description": "(beta) Libreria hardware dedicata alle espansioni per Arduino come pcf8574",
  "name": "adafruit-motor-shield-v1",
  "patches": {
    "@/main": {
      "description": "per sensori BMP280 BME280",
      "links": {
        "B1mmwjUn8": {
          "id": "B1mmwjUn8",
          "input": {
            "nodeId": "ByGGviIh8",
            "pinKey": "B1P1nFwaM"
          },
          "output": {
            "nodeId": "B1xXPiL2L",
            "pinKey": "Sk1e_NIVE"
          }
        },
        "ByLeL_9h8": {
          "id": "ByLeL_9h8",
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "B1eKNVO53L"
          },
          "output": {
            "nodeId": "BkUgDiU3L",
            "pinKey": "ByfGSDjQE"
          }
        },
        "HJ1gLdchL": {
          "id": "HJ1gLdchL",
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "rylbgd93I"
          },
          "output": {
            "nodeId": "HyfNSnUh8",
            "pinKey": "ByfGSDjQE"
          }
        },
        "Hy-gI_q2I": {
          "id": "Hy-gI_q2I",
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "ByYVEdq2U"
          },
          "output": {
            "nodeId": "HyfNSnUh8",
            "pinKey": "ByfGSDjQE"
          }
        },
        "r1EqlO53L": {
          "id": "r1EqlO53L",
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "H1Lg-l_cnI"
          },
          "output": {
            "nodeId": "ByGGviIh8",
            "pinKey": "OkPg7GDaW"
          }
        },
        "rkBe8d9hU": {
          "id": "rkBe8d9hU",
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "S14gbxu9h8"
          },
          "output": {
            "nodeId": "BkUgDiU3L",
            "pinKey": "ByfGSDjQE"
          }
        },
        "ry5MviU2U": {
          "id": "ry5MviU2U",
          "input": {
            "nodeId": "ByGGviIh8",
            "pinKey": "SJ-1mZPTz"
          },
          "output": {
            "nodeId": "SJuzwi83L",
            "pinKey": "C0nt1n10Wl"
          }
        },
        "SkR4qus2L": {
          "id": "SkR4qus2L",
          "output": {
            "nodeId": "SJuNc_jn8",
            "pinKey": "r1if8ROSDJ-"
          },
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "ByZLBdq38"
          }
        },
        "BJHS9uih8": {
          "id": "BJHS9uih8",
          "output": {
            "nodeId": "HyZrcdsnI",
            "pinKey": "r1if8ROSDJ-"
          },
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "B1aNBO93U"
          }
        },
        "ryiMC_i2L": {
          "id": "ryiMC_i2L",
          "output": {
            "nodeId": "S1ruFOj3L",
            "pinKey": "B1gI0urv1W"
          },
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "SJ-cHOchL"
          }
        },
        "HkxQAOjn8": {
          "id": "HkxQAOjn8",
          "output": {
            "nodeId": "S1ruFOj3L",
            "pinKey": "B1gI0urv1W"
          },
          "input": {
            "nodeId": "SJuNc_jn8",
            "pinKey": "ry3zLA_Bv1Z"
          }
        },
        "BJB7COinL": {
          "id": "BJB7COinL",
          "output": {
            "nodeId": "B1hLtds2U",
            "pinKey": "B1gI0urv1W"
          },
          "input": {
            "nodeId": "Syxqgd5nI",
            "pinKey": "SyoqHd5nL"
          }
        },
        "BydmAdo3I": {
          "id": "BydmAdo3I",
          "output": {
            "nodeId": "B1hLtds2U",
            "pinKey": "B1gI0urv1W"
          },
          "input": {
            "nodeId": "HyZrcdsnI",
            "pinKey": "ry3zLA_Bv1Z"
          }
        }
      },
      "nodes": {
        "B1WZIuq2I": {
          "boundLiterals": {
            "Sk1e_NIVE": "True"
          },
          "id": "B1WZIuq2I",
          "position": {
            "x": 9,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "B1xXPiL2L": {
          "boundLiterals": {
            "Sk1e_NIVE": "True"
          },
          "id": "B1xXPiL2L",
          "position": {
            "x": 18,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "BkUgDiU3L": {
          "boundLiterals": {
            "ByfGSDjQE": "50"
          },
          "id": "BkUgDiU3L",
          "position": {
            "x": 4,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "ByGGviIh8": {
          "id": "ByGGviIh8",
          "position": {
            "x": 14,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/gate"
        },
        "H1_-L_9hL": {
          "boundLiterals": {
            "Sk1e_NIVE": "False"
          },
          "id": "H1_-L_9hL",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "HJRxDoIn8": {
          "boundLiterals": {
            "Sk1e_NIVE": "True"
          },
          "id": "HJRxDoIn8",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "HyfNSnUh8": {
          "boundLiterals": {
            "ByfGSDjQE": "400"
          },
          "id": "HyfNSnUh8",
          "position": {
            "x": 3,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "SJuzwi83L": {
          "id": "SJuzwi83L",
          "position": {
            "x": 14,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/continuously"
        },
        "SynZLd5hL": {
          "boundLiterals": {
            "Sk1e_NIVE": "False"
          },
          "id": "SynZLd5hL",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "Syxqgd5nI": {
          "boundLiterals": {
            "B1eKNVO53L": "100",
            "ByYVEdq2U": "200",
            "S14gbxu9h8": "100",
            "rylbgd93I": "200"
          },
          "id": "Syxqgd5nI",
          "position": {
            "x": 3,
            "y": 5,
            "units": "slots"
          },
          "type": "@/single-coil-2motors"
        },
        "B1hLtds2U": {
          "id": "B1hLtds2U",
          "type": "xod/gpio/digital-read",
          "position": {
            "x": 9,
            "y": 2,
            "units": "slots"
          },
          "boundLiterals": {
            "B143qAq1Q": "D13"
          }
        },
        "S1ruFOj3L": {
          "id": "S1ruFOj3L",
          "type": "xod/gpio/digital-read",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "boundLiterals": {
            "B143qAq1Q": "D12"
          }
        },
        "SJuNc_jn8": {
          "id": "SJuNc_jn8",
          "type": "xod/core/not",
          "position": {
            "x": 10,
            "y": 4,
            "units": "slots"
          }
        },
        "HyZrcdsnI": {
          "id": "HyZrcdsnI",
          "type": "xod/core/not",
          "position": {
            "x": 6,
            "y": 4,
            "units": "slots"
          }
        },
        "SyBxnOo3L": {
          "id": "SyBxnOo3L",
          "type": "xod-dev/hc-sr04/hc-sr04-range-meter",
          "position": {
            "x": 25,
            "y": 2,
            "units": "slots"
          }
        }
      },
      "path": "@/main"
    },
    "@/single-coil-2motors": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD require \"https://github.com/adafruit/Adafruit-Motor-Shield-library\"\n\n// Adafruit Motor shield library\n// copyright Adafruit Industries LLC, 2009\n// this code is public domain, enjoy!\n\n\n\n\n\n{{#global}}\n#include \"AccelStepper.h\"\n#include \"AFMotor.h\"\n{{/global}}\n\n\nstruct State {\n};\n\n        \n\n{{ GENERATED_CODE }}\n// two stepper motors one on each port\nAF_Stepper motor1(200, 1);\nAF_Stepper motor2(200, 2);\n\n// you can change these to DOUBLE or INTERLEAVE or MICROSTEP!\n// wrappers for the first motor!\nvoid forwardstep1() {  \n  motor1.onestep(FORWARD, SINGLE);\n}\nvoid backwardstep1() {  \n  motor1.onestep(BACKWARD, SINGLE);\n}\n// wrappers for the second motor!\nvoid forwardstep2() {  \n  motor2.onestep(FORWARD, SINGLE);\n}\nvoid backwardstep2() {  \n  motor2.onestep(BACKWARD, SINGLE);\n}\n// Motor shield has two motor ports, now we'll wrap them in an AccelStepper object\nAccelStepper stepper1(forwardstep1, backwardstep1);\nAccelStepper stepper2(forwardstep2, backwardstep2);\n\n\nvoid evaluate(Context ctx) {\nauto state = getState(ctx);\n//AF_Stepper motor(getValue<input_STEPrev>(ctx), getValue<input_MOTORn>(ctx));\nauto position=1000000;\n\n\n    stepper1.setMaxSpeed(getValue<input_M1_maxspeed>(ctx));\n    stepper1.setAcceleration(getValue<input_M1_accel>(ctx));\n \n    auto position1=position;   \n    if (getValue<input_M1REV>(ctx)) {\n        position1=-position;\n    }\n\n    stepper2.setMaxSpeed(getValue<input_M2_maxspeed>(ctx));\n    stepper2.setAcceleration(getValue<input_M2_accel>(ctx));\n\n    auto position2=position;\n    if (getValue<input_M2REV>(ctx)) {\n        position2=-position;\n    }\n\n\n    if (isInputDirty<input_UPD>(ctx)){\n\n        if (getValue<input_M1RUN>(ctx)) {\n            stepper1.moveTo(position1);\n            stepper1.run();\n        }else{\n            stepper1.setMaxSpeed(1)//TEST\n            stepper1.run();//TEST\n            \n            motor1.release(); \n            stepper1.disableOutputs();\n        }\n\n\n        if (getValue<input_M2RUN>(ctx)) {\n            stepper2.moveTo(position2);\n            stepper2.run();\n        }else{\n            stepper2.setMaxSpeed(1) //TEST\n            stepper2.run(); //TEST\n            \n            motor2.release(); \n            stepper2.disableOutputs();\n        }\n\n\n    emitValue<output_DONE>(ctx, 1);\n    }\n\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        }
      ],
      "nodes": {
        "B1aNBO93U": {
          "id": "B1aNBO93U",
          "label": "M1REV",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "B1eKNVO53L": {
          "boundLiterals": {
            "__out__": "200"
          },
          "description": "Numero di step per ogni giro del motore: è una  caratteristica del motore in uso",
          "id": "B1eKNVO53L",
          "label": "M2_accel",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ByYVEdq2U": {
          "boundLiterals": {
            "__out__": "2"
          },
          "description": "MOTORE 2: velogità massima (g/min)",
          "id": "ByYVEdq2U",
          "label": "M2_maxspeed",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ByZLBdq38": {
          "id": "ByZLBdq38",
          "label": "M2REV",
          "position": {
            "x": 8,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "BymxWguc2I": {
          "id": "BymxWguc2I",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "H1Lg-l_cnI": {
          "description": "Avvia il motore nel senso scelto per il numero di step stabilito alla velocità stabilita poi lascialo libero. Se lanciato in continuazione tiene acceso il movimento",
          "id": "H1Lg-l_cnI",
          "label": "UPD",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "S14gbxu9h8": {
          "boundLiterals": {
            "__out__": "200"
          },
          "description": "MOTORE 1: accelerazione",
          "id": "S14gbxu9h8",
          "label": "M1_accel",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SJ-cHOchL": {
          "id": "SJ-cHOchL",
          "label": "M1RUN",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "SyoqHd5nL": {
          "id": "SyoqHd5nL",
          "label": "M2RUN",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "rkMlZe_qnU": {
          "id": "rkMlZe_qnU",
          "label": "DONE",
          "position": {
            "x": 0.05,
            "y": 1.75,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rylbgd93I": {
          "boundLiterals": {
            "__out__": "2"
          },
          "description": "MOTORE 1: velogità massima (g/min)",
          "id": "rylbgd93I",
          "label": "M1_maxspeed",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/single-coil-2motors"
    }
  },
  "version": "0.0.31"
}
