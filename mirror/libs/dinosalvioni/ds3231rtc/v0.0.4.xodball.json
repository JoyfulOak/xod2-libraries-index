{
  "name": "ds3231rtc",
  "patches": {
    "@/main": {
      "links": {
        "BJzp8eoxP": {
          "id": "BJzp8eoxP",
          "input": {
            "nodeId": "BJD9Uxsev",
            "pinKey": "ByDPwJxu7"
          },
          "output": {
            "nodeId": "HySsIxoeD",
            "pinKey": "r1ZqKlXPX"
          }
        },
        "H1_m9xslP": {
          "id": "H1_m9xslP",
          "input": {
            "nodeId": "Byydyxiew",
            "pinKey": "ByxFD1xjgv"
          },
          "output": {
            "nodeId": "BJD9Uxsev",
            "pinKey": "Bk1eOQ6mHvm"
          }
        },
        "S1jcUgixD": {
          "id": "S1jcUgixD",
          "input": {
            "nodeId": "BJD9Uxsev",
            "pinKey": "SJsba7HDQ"
          },
          "output": {
            "nodeId": "SJUKLxsxw",
            "pinKey": "S1FPmmHD7"
          }
        }
      },
      "nodes": {
        "BJD9Uxsev": {
          "id": "BJD9Uxsev",
          "position": {
            "x": 10,
            "y": 6,
            "units": "slots"
          },
          "type": "xod-dev/ds-rtc/write"
        },
        "Byydyxiew": {
          "boundLiterals": {
            "ByxFD1xjgv": "Never"
          },
          "id": "Byydyxiew",
          "position": {
            "x": 10,
            "y": 8,
            "units": "slots"
          },
          "type": "@/rtc-alarm2-daily"
        },
        "HySsIxoeD": {
          "boundLiterals": {
            "HygQhYlQw7": "50",
            "S1-M2YemPQ": "6",
            "SkQnYg7wQ": "29",
            "ryjoteXwm": "2017"
          },
          "id": "HySsIxoeD",
          "position": {
            "x": 18,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/datetime/datetime"
        },
        "SJUKLxsxw": {
          "id": "SJUKLxsxw",
          "position": {
            "x": 9,
            "y": 4,
            "units": "slots"
          },
          "type": "xod-dev/ds-rtc/rtc-device"
        }
      },
      "path": "@/main"
    },
    "@/rtc-alarm2-daily": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD require \"https://github.com/JChristensen/DS3232RTC\"\n#pragma XOD require \"https://github.com/janelia-arduino/Streaming\"\n#pragma XOD require \"https://github.com/PaulStoffregen/Time\"\n\n\n\n{{#global}}\n#include \"DS3232RTC.h\"\n#include \"Streaming.h\"\n#include \"TimeLib.h\"\n\n\n\n{{/global}}\n\nstruct State {\n\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n\n{\n\n\n    // initialize the alarms to known values, clear the alarm flags, clear the alarm interrupt flags\n    RTC.setAlarm(ALM1_MATCH_DATE, 0, 0, 0, 1);\n    RTC.setAlarm(ALM2_MATCH_DATE, 0, 0, 0, 1);\n  //  RTC.alarm(ALARM_1);\n   // RTC.alarm(ALARM_2);\n   // RTC.alarmInterrupt(ALARM_1, false);\n    //RTC.alarmInterrupt(ALARM_2, false);\n   \n   //togliere il flag se si vuole  che al disabilitare EN venga subito disabilitato SWQ senza attendere SET \n    // RTC.squareWave(SQWAVE_NONE);\n\n    \n}\n\n\nif(isInputDirty<input_SET>(ctx)){\n       // set Alarm 2 for .....\n    RTC.setAlarm(ALM2_MATCH_HOURS, 0, getValue<input_MIN>(ctx), getValue<input_HOUR>(ctx), 1);\n    // clear the alarm flags\n    RTC.alarm(ALARM_1);\n    RTC.alarm(ALARM_2);\n    // configure the INT/SQW pin for \"interrupt\" operation (disable square wave output)\n    RTC.squareWave(SQWAVE_NONE);\n    // enable interrupt output for Alarm 2 only\n    RTC.alarmInterrupt(ALARM_1, false);\n    RTC.alarmInterrupt(ALARM_2, getValue<input_EN>(ctx));\nemitValue<output_DONE>(ctx, 1);\n\n    }\n\n\n}\n"
        }
      ],
      "description": "Imposta l'Allarme2 su SQW  con frequenza giornaliera ad una determinata ora/min",
      "nodes": {
        "BkVSXfilw": {
          "description": "Ora di allarme",
          "id": "BkVSXfilw",
          "label": "HOUR",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ByxFD1xjgv": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Invia i valori",
          "id": "ByxFD1xjgv",
          "label": "SET",
          "position": {
            "x": 8,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "S1MRXMigv": {
          "id": "S1MRXMigv",
          "label": "DONE",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SJTSmfjlP": {
          "description": "Minuto di allarme",
          "id": "SJTSmfjlP",
          "label": "MIN",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "rkpmEGlbv": {
          "boundLiterals": {
            "__out__": "True"
          },
          "description": "Abilita/Disabilita l'allarme, alla pressione del SET",
          "id": "rkpmEGlbv",
          "label": "EN",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "SJR6pclbv": {
          "id": "SJR6pclbv",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        }
      },
      "path": "@/rtc-alarm2-daily"
    }
  },
  "version": "0.0.4"
}
