{
  "description": "faster analog read, using avdweb_AnalogReadFast.h\n.... may not quite work correctly with SAM boards using 12 bit ADC inputs....",
  "license": "AGPL-3.0",
  "name": "faster-analog-read",
  "patches": {
    "@/fast-analog-read": {
      "nodes": {
        "rk3mZJchH": {
          "description": "Fires on reading complete",
          "id": "rk3mZJchH",
          "label": "DONE",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "H1en7Z1cnB": {
          "id": "H1en7Z1cnB",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "BkbhX-19hH": {
          "boundLiterals": {
            "__out__": "A0"
          },
          "description": "Analog port to read from. Should start with `A` to succeed.\n",
          "id": "BkbhX-19hH",
          "label": "PORT",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "H1zhQW1q2B": {
          "description": "The latest read value in range 0 to 1023 ... OR if 0-1 set to true, the range will be 0-1",
          "id": "H1zhQW1q2B",
          "label": "VAL",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "B1mhXZy5hr": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Triggers new read",
          "id": "B1mhXZy5hr",
          "label": "UPD",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "H1hkVkcnH": {
          "id": "H1hkVkcnH",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "label": "0-1",
          "description": "Sets the input to be between a range of 0-1 (if true) or RAW 0-1023"
        }
      },
      "path": "@/fast-analog-read",
      "description": "Fast read of an analog signal value from board ADC port.\n\nPossible errors:\nâ€” Invalid port",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD error_raise enable\n\n#pragma XOD require \"https://github.com/robertspark/FastAnalogRead\"\n\n{{#global}}\n#include <avdweb_AnalogReadFast.h>\n{{/global}}\n\nstruct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    if (!isInputDirty<input_UPD>(ctx))\n        return;\n\n    const uint8_t port = getValue<input_PORT>(ctx);\n    bool raw = getValue<input_0_1>(ctx);\n\n    if (!isValidAnalogPort(port)) {\n        raiseError(ctx);\n        return;\n    }\n\n    if (raw == true) {\n        emitValue<output_VAL>(ctx, analogReadFast(port) / 1023.);\n        emitValue<output_DONE>(ctx, 1);\n        return;\n    }\n    else{\n        emitValue<output_VAL>(ctx, analogReadFast(port));\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/example": {
      "links": {
        "Skqruk9hB": {
          "id": "Skqruk9hB",
          "output": {
            "nodeId": "S1_Huk5nB",
            "pinKey": "Sk1e_NIVE"
          },
          "input": {
            "nodeId": "B1FVXkc3r",
            "pinKey": "H1hkVkcnH"
          }
        },
        "r178ukq2H": {
          "id": "r178ukq2H",
          "output": {
            "nodeId": "B1FVXkc3r",
            "pinKey": "H1zhQW1q2B"
          },
          "input": {
            "nodeId": "HkbIuJchB",
            "pinKey": "HkXK-dGob"
          }
        }
      },
      "nodes": {
        "B1FVXkc3r": {
          "id": "B1FVXkc3r",
          "type": "@/fast-analog-read",
          "position": {
            "x": -5,
            "y": 0,
            "units": "slots"
          },
          "boundLiterals": {
            "H1hkVkcnH": "True"
          }
        },
        "S1_Huk5nB": {
          "id": "S1_Huk5nB",
          "type": "xod/debug/tweak-boolean",
          "position": {
            "x": -3,
            "y": -1,
            "units": "slots"
          }
        },
        "HkbIuJchB": {
          "id": "HkbIuJchB",
          "type": "xod/debug/watch",
          "position": {
            "x": -5,
            "y": 1,
            "units": "slots"
          }
        }
      },
      "path": "@/example"
    }
  },
  "version": "0.0.1"
}
