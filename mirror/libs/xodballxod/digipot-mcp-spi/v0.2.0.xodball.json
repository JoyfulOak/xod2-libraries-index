{
  "patches": {
    "@/main": {
      "description": "Example of usage",
      "links": {
        "rJUUV56AF": {
          "id": "rJUUV56AF",
          "output": {
            "nodeId": "rJeJRw6AY",
            "pinKey": "HkGSV5pCK"
          },
          "input": {
            "nodeId": "H1Xy0vTAY",
            "pinKey": "HkXK-dGob"
          }
        },
        "Hkio-1ARt": {
          "id": "Hkio-1ARt",
          "output": {
            "nodeId": "Sy_i-JRRF",
            "pinKey": "Bkf4BDsmV"
          },
          "input": {
            "nodeId": "r1cKbJCAY",
            "pinKey": "HyNXF63pF"
          }
        },
        "SJl2-kCCY": {
          "id": "SJl2-kCCY",
          "output": {
            "nodeId": "HyaobJRAK",
            "pinKey": "ByfGSDjQE"
          },
          "input": {
            "nodeId": "r1cKbJCAY",
            "pinKey": "Skp4YT2TK"
          }
        },
        "HkphZkACY": {
          "id": "HkphZkACY",
          "output": {
            "nodeId": "ByBKSXICY",
            "pinKey": "rygv8QV0F"
          },
          "input": {
            "nodeId": "r1cKbJCAY",
            "pinKey": "Hyd1vXECF"
          }
        },
        "HJVrvJC0t": {
          "id": "HJVrvJC0t",
          "output": {
            "nodeId": "S1PbCvT0K",
            "pinKey": "Bkf4BDsmV"
          },
          "input": {
            "nodeId": "S1_JwyCAY",
            "pinKey": "HyNXF63pF"
          }
        },
        "rJz3q13CAF": {
          "id": "rJz3q13CAF",
          "output": {
            "nodeId": "H1bhc1nA0K",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJeJRw6AY",
            "pinKey": "Hyd1vXECF"
          }
        },
        "Hke3cJnRCY": {
          "id": "Hke3cJnRCY",
          "output": {
            "nodeId": "ByBKSXICY",
            "pinKey": "rygv8QV0F"
          },
          "input": {
            "nodeId": "SJ3c12RCY",
            "pinKey": "__in__"
          }
        },
        "SyKjJnR0F": {
          "id": "SyKjJnR0F",
          "output": {
            "nodeId": "BkUj13CAY",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJ45khARK",
            "pinKey": "Hyd1vXECF"
          }
        },
        "ry6o1nA0F": {
          "id": "ry6o1nA0F",
          "output": {
            "nodeId": "HkhuJ2RAt",
            "pinKey": "S10f3sCRF"
          },
          "input": {
            "nodeId": "rJ45khARK",
            "pinKey": "Skp4YT2TK"
          }
        },
        "HyoM31hAAK": {
          "id": "HyoM31hAAK",
          "output": {
            "nodeId": "HJZ-CvaRF",
            "pinKey": "Bkf4BDsmV"
          },
          "input": {
            "nodeId": "rJ45khARK",
            "pinKey": "HyNXF63pF"
          }
        },
        "BkLT1n00Y": {
          "id": "BkLT1n00Y",
          "output": {
            "nodeId": "B1C1XupAY",
            "pinKey": "ByfGSDjQE"
          },
          "input": {
            "nodeId": "HkhuJ2RAt",
            "pinKey": "ryQbp0hat"
          }
        },
        "SyTJgn0Rt": {
          "id": "SyTJgn0Rt",
          "output": {
            "nodeId": "BJZQ21R0F",
            "pinKey": "Bkf4BDsmV"
          },
          "input": {
            "nodeId": "rJWh3jA0Y",
            "pinKey": "HyNXF63pF"
          }
        },
        "rJAbxh0CY": {
          "id": "rJAbxh0CY",
          "output": {
            "nodeId": "r1cKbJCAY",
            "pinKey": "S1L5OohCK"
          },
          "input": {
            "nodeId": "HJYbxhRAK",
            "pinKey": "ryv7IRdSP1b"
          }
        },
        "ryJMg2R0F": {
          "id": "ryJMg2R0F",
          "output": {
            "nodeId": "rJ45khARK",
            "pinKey": "S1L5OohCK"
          },
          "input": {
            "nodeId": "HJYbxhRAK",
            "pinKey": "ByU7LRuSPkW"
          }
        },
        "HylMx2RAF": {
          "id": "HylMx2RAF",
          "output": {
            "nodeId": "S1_JwyCAY",
            "pinKey": "S1L5OohCK"
          },
          "input": {
            "nodeId": "HJYbxhRAK",
            "pinKey": "ByU7LRuSPkW-$1"
          }
        },
        "Byfzx3AAK": {
          "id": "Byfzx3AAK",
          "output": {
            "nodeId": "rJWh3jA0Y",
            "pinKey": "S1L5OohCK"
          },
          "input": {
            "nodeId": "HJYbxhRAK",
            "pinKey": "ByU7LRuSPkW-$2"
          }
        },
        "rkVGlnCAt": {
          "id": "rkVGlnCAt",
          "output": {
            "nodeId": "HJYbxhRAK",
            "pinKey": "ByHmL0uHPk-"
          },
          "input": {
            "nodeId": "rJeJRw6AY",
            "pinKey": "HyNXF63pF"
          }
        },
        "B17mg2CAK": {
          "id": "B17mg2CAK",
          "output": {
            "nodeId": "rJeXe3ACY",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "S1_JwyCAY",
            "pinKey": "Hyd1vXECF"
          }
        },
        "S1wQl2CRY": {
          "id": "S1wQl2CRY",
          "output": {
            "nodeId": "Hk4QehCCK",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJWh3jA0Y",
            "pinKey": "Hyd1vXECF"
          }
        },
        "r1zTUghRAK": {
          "id": "r1zTUghRAK",
          "output": {
            "nodeId": "Byba8ghRRK",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "r1cKbJCAY",
            "pinKey": "SkaClkCCK"
          }
        },
        "S1xTIxhCRK": {
          "id": "S1xTIxhCRK",
          "output": {
            "nodeId": "BJQnZkACt",
            "pinKey": "Sk1e_NIVE"
          },
          "input": {
            "nodeId": "B16Ue3RRF",
            "pinKey": "__in__"
          }
        },
        "S1NlWn00K": {
          "id": "S1NlWn00K",
          "output": {
            "nodeId": "HJZeb2RRt",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJ45khARK",
            "pinKey": "SkaClkCCK"
          }
        },
        "Bytgbh0CY": {
          "id": "Bytgbh0CY",
          "output": {
            "nodeId": "BJLeZ3RAK",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "S1_JwyCAY",
            "pinKey": "SkaClkCCK"
          }
        },
        "Hy6e-300t": {
          "id": "Hy6e-300t",
          "output": {
            "nodeId": "B1cxZ2R0t",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJWh3jA0Y",
            "pinKey": "SkaClkCCK"
          }
        },
        "HJ2--hCAF": {
          "id": "HJ2--hCAF",
          "output": {
            "nodeId": "r1dbZnRAF",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJeJRw6AY",
            "pinKey": "By5P11ACt"
          }
        }
      },
      "nodes": {
        "ByBKSXICY": {
          "id": "ByBKSXICY",
          "type": "@/spi",
          "position": {
            "x": -6,
            "y": -4,
            "units": "slots"
          }
        },
        "rJeJRw6AY": {
          "boundLiterals": {
            "rJpZtThaK": "D10"
          },
          "id": "rJeJRw6AY",
          "type": "@/digipot-read-wiper",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "H1Xy0vTAY": {
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          },
          "id": "H1Xy0vTAY",
          "type": "xod/debug/watch",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          }
        },
        "HJZ-CvaRF": {
          "id": "HJZ-CvaRF",
          "type": "xod/debug/tweak-pulse",
          "position": {
            "x": 4,
            "y": -3,
            "units": "slots"
          }
        },
        "S1PbCvT0K": {
          "id": "S1PbCvT0K",
          "type": "xod/debug/tweak-pulse",
          "position": {
            "x": 9,
            "y": -3,
            "units": "slots"
          }
        },
        "B1C1XupAY": {
          "boundLiterals": {
            "ByfGSDjQE": "5"
          },
          "id": "B1C1XupAY",
          "type": "xod/debug/tweak-number",
          "position": {
            "x": 6,
            "y": -4,
            "units": "slots"
          }
        },
        "r1cKbJCAY": {
          "boundLiterals": {
            "rJpZtThaK": "D10"
          },
          "id": "r1cKbJCAY",
          "type": "@/digipot-write-step",
          "position": {
            "x": -6,
            "y": -2,
            "units": "slots"
          }
        },
        "Sy_i-JRRF": {
          "id": "Sy_i-JRRF",
          "type": "xod/debug/tweak-pulse",
          "position": {
            "x": -2,
            "y": -3,
            "units": "slots"
          }
        },
        "HyaobJRAK": {
          "boundLiterals": {
            "ByfGSDjQE": "150"
          },
          "id": "HyaobJRAK",
          "type": "xod/debug/tweak-number",
          "position": {
            "x": -3,
            "y": -3,
            "units": "slots"
          }
        },
        "BJQnZkACt": {
          "boundLiterals": {
            "Sk1e_NIVE": "False"
          },
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          },
          "id": "BJQnZkACt",
          "type": "xod/debug/tweak-boolean",
          "position": {
            "x": -4,
            "y": -4,
            "units": "slots"
          }
        },
        "S1_JwyCAY": {
          "id": "S1_JwyCAY",
          "type": "@/digipot-increment",
          "position": {
            "x": 6,
            "y": -2,
            "units": "slots"
          },
          "boundLiterals": {
            "rJpZtThaK": "D10"
          }
        },
        "BJZQ21R0F": {
          "id": "BJZQ21R0F",
          "type": "xod/debug/tweak-pulse",
          "position": {
            "x": 14,
            "y": -3,
            "units": "slots"
          }
        },
        "rJWh3jA0Y": {
          "id": "rJWh3jA0Y",
          "type": "@/digipot-decrement",
          "position": {
            "x": 11,
            "y": -2,
            "units": "slots"
          }
        },
        "HkhuJ2RAt": {
          "id": "HkhuJ2RAt",
          "type": "@/digipot-kohm-to-step",
          "position": {
            "x": 3,
            "y": -4,
            "units": "slots"
          },
          "boundLiterals": {
            "rkOba03pF": "128"
          }
        },
        "rJ45khARK": {
          "boundLiterals": {
            "rJpZtThaK": "D10"
          },
          "id": "rJ45khARK",
          "type": "@/digipot-write-step",
          "position": {
            "x": 0,
            "y": -2,
            "units": "slots"
          }
        },
        "H1bhc1nA0K": {
          "id": "H1bhc1nA0K",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "label": "SPI"
        },
        "SJ3c12RCY": {
          "id": "SJ3c12RCY",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": -7,
            "y": -4,
            "units": "slots"
          },
          "label": "SPI"
        },
        "BkUj13CAY": {
          "id": "BkUj13CAY",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 0,
            "y": -3,
            "units": "slots"
          },
          "label": "SPI"
        },
        "HJYbxhRAK": {
          "id": "HJYbxhRAK",
          "type": "xod/core/any",
          "position": {
            "x": 2,
            "y": -1,
            "units": "slots"
          },
          "arityLevel": 3
        },
        "rJeXe3ACY": {
          "id": "rJeXe3ACY",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 6,
            "y": -3,
            "units": "slots"
          },
          "label": "SPI"
        },
        "Hk4QehCCK": {
          "id": "Hk4QehCCK",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 11,
            "y": -3,
            "units": "slots"
          },
          "label": "SPI"
        },
        "Byba8ghRRK": {
          "id": "Byba8ghRRK",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": -4,
            "y": -3,
            "units": "slots"
          },
          "label": "Wiper"
        },
        "B16Ue3RRF": {
          "id": "B16Ue3RRF",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": -5,
            "y": -3,
            "units": "slots"
          },
          "label": "Wiper"
        },
        "HJZeb2RRt": {
          "id": "HJZeb2RRt",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 2,
            "y": -3,
            "units": "slots"
          },
          "label": "Wiper"
        },
        "BJLeZ3RAK": {
          "id": "BJLeZ3RAK",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 8,
            "y": -3,
            "units": "slots"
          },
          "label": "Wiper"
        },
        "B1cxZ2R0t": {
          "id": "B1cxZ2R0t",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 13,
            "y": -3,
            "units": "slots"
          },
          "label": "Wiper"
        },
        "r1dbZnRAF": {
          "id": "r1dbZnRAF",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 6,
            "y": -1,
            "units": "slots"
          },
          "label": "Wiper"
        }
      },
      "comments": {
        "Byyten0CF": {
          "id": "Byyten0CF",
          "position": {
            "x": -2,
            "y": -4,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Select The Wipe\nFalse -> Wiper 0\nTrue -> Wiper 1"
        },
        "H15hxhR0K": {
          "id": "H15hxhR0K",
          "position": {
            "x": 7,
            "y": -4,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Convert kOhms to Steps. Adjust to device."
        },
        "rkbffnRRt": {
          "id": "rkbffnRRt",
          "position": {
            "x": 16,
            "y": -3,
            "units": "slots"
          },
          "size": {
            "width": 3,
            "height": 1,
            "units": "slots"
          },
          "content": "Tweak to Send Pulse"
        },
        "BkvIM3CAY": {
          "id": "BkvIM3CAY",
          "position": {
            "x": 9,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 3,
            "height": 1,
            "units": "slots"
          },
          "content": "Read the Steps from the wiper"
        }
      },
      "path": "@/main"
    },
    "@/spi": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#include <SPI.h>\n\nnode {\n    meta {\n        // Define our custom type as a pointer on the class instance.\n        using Type = SPIClass*;\n    }\n\n    SPIClass spi = SPIClass(); // make a reference to SPIClass\n\n    void evaluate(Context ctx) {\n\n    if (isSettingUp())\n            spi.begin();\n\n    emitValue<output_SPI>(ctx, &spi);\n\n    }\n}\n"
        }
      ],
      "description": "MCP413X/415X/423X/425X\nMax STEPS (128 or 256) and Max Resistance (5, 10, 50, 100 kOhm) depend on model of unit.\nSTEP 0 = max resistance.",
      "nodes": {
        "ryvhPpn6Y": {
          "description": "SPI Class",
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          }
        },
        "rygv8QV0F": {
          "label": "SPI",
          "id": "rygv8QV0F",
          "type": "xod/patch-nodes/output-self",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          }
        }
      },
      "path": "@/spi"
    },
    "@/digipot-read-wiper": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n#pragma XOD error_raise enable\n\n\nnode {\n\n\n    void evaluate(Context ctx) {\n\n    if (!isInputDirty<input_UPD>(ctx))\n        return;\n  \n    static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n    ::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select\n\n    auto digipot = getValue<input_SPI>(ctx);\n  \n        \n    ::digitalWrite(constant_input_CS, false); // chip select active\n     uint16_t address = getValue<input_Pot2>(ctx) << 12;\n     uint16_t command = ( (uint16_t) 0b0011 ) << 10;\n    // uint16_t COMMAND_MASK = 0;\n    // uint16_t transferByte =  0;\n         \n    // digipot->transfer((uint8_t) getValue<input_Address>(ctx)); // address\n    //digipot->transfer16( address  | (uint16_t) getValue<input_STEP>(ctx)); // value\n    //uint16_t data = digipot->transfer16( 0b0001110000000000 );  // value\n\n    uint8_t data = digipot->transfer16( address | command );  // value\n        \n    ::digitalWrite(constant_input_CS, true); // chip select unactive\n    emitValue<output_OUT>(ctx,  data )  ;\n    emitValue<output_DONE>(ctx, 1);\n    }\n    \n}\n"
        }
      ],
      "description": "Read the steps  from digipot wiper\nPot2 -> true for reading the 2nd wiper.",
      "nodes": {
        "ryvhPpn6Y": {
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          }
        },
        "rJpZtThaK": {
          "boundLiterals": {
            "__out__": "D10"
          },
          "description": "CS (chip select) pin, can be any digital pin, to allow multiple devices.",
          "label": "CS",
          "id": "rJpZtThaK",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HyNXF63pF": {
          "description": "Read the Wiper",
          "label": "UPD",
          "id": "HyNXF63pF",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Hyd1vXECF": {
          "description": "SPI class reference",
          "label": "SPI",
          "id": "Hyd1vXECF",
          "type": "@/input-spi",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "S1L5OohCK": {
          "label": "DONE",
          "id": "S1L5OohCK",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          }
        },
        "HkGSV5pCK": {
          "id": "HkGSV5pCK",
          "type": "xod/patch-nodes/output-number",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          }
        },
        "By5P11ACt": {
          "description": "False -> Wiper 0\nTrue -> Wiper 1 (for devices with 2 wipers)",
          "label": "Pot2",
          "id": "By5P11ACt",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          }
        }
      },
      "comments": {
        "r1S1t7EAt": {
          "id": "r1S1t7EAt",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 9,
            "height": 2,
            "units": "slots"
          },
          "content": "Pot2 -> True for controlling the 2nd wiper on devices that have two wipers\n"
        }
      },
      "path": "@/digipot-read-wiper"
    },
    "@/digipot-write-step": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n#pragma XOD error_raise enable\n\n\nnode {\n\n\n    void evaluate(Context ctx) {\n\n    if (!isInputDirty<input_UPD>(ctx))\n        return;\n  \n    static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n    ::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select\n\n    auto digipot = getValue<input_SPI>(ctx);\n\n    // Breaks the 16-bit message into 2 8-bit parts\n    uint8_t address = (uint8_t) getValue<input_Pot2>(ctx) ? 0x10 : 0x00 ; // Choose which wiper address (8-bit format)\n    ::digitalWrite(constant_input_CS, false); // chip select active\n    digipot->transfer( address ); // address\n    digipot->transfer( (uint8_t) getValue<input_STEP>(ctx)); // value\n    \n    ::digitalWrite(constant_input_CS, true); // chip select unactive\n\n    emitValue<output_DONE>(ctx, 1);\n    }\n    \n}\n"
        }
      ],
      "description": "MCP413X/415X/423X/425X\nMax STEPS (128 or 256) and Max Resistance (5, 10, 50, 100 kOhm) depend on model of unit.\nSTEP 0 = max resistance.",
      "nodes": {
        "ryvhPpn6Y": {
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          }
        },
        "rJpZtThaK": {
          "boundLiterals": {
            "__out__": "D53"
          },
          "description": "CS (chip select) pin, can be any digital pin, to allow multiple devices.",
          "label": "CS",
          "id": "rJpZtThaK",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HyNXF63pF": {
          "description": "Update the Device",
          "label": "UPD",
          "id": "HyNXF63pF",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Skp4YT2TK": {
          "description": "The Step from 0 to Max Range (128 or 256)",
          "label": "STEP",
          "id": "Skp4YT2TK",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          }
        },
        "Hyd1vXECF": {
          "label": "SPI",
          "id": "Hyd1vXECF",
          "type": "@/input-spi",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "S1L5OohCK": {
          "label": "DONE",
          "id": "S1L5OohCK",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          }
        },
        "SkaClkCCK": {
          "label": "Pot2",
          "id": "SkaClkCCK",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          }
        }
      },
      "comments": {
        "r1S1t7EAt": {
          "id": "r1S1t7EAt",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 12,
            "height": 3,
            "units": "slots"
          },
          "content": "Zero-Scale Error  (MCP4XX1 only)(8-bit code = 00h, 7-bit code = 00h)\n\nFull-Scale Error (MCP4XX1 only)(8-bit code = 100h, 7-bit code = 80h)\n\n"
        }
      },
      "path": "@/digipot-write-step"
    },
    "@/digipot-increment": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_INC\n#pragma XOD error_raise enable\n\n\nnode {\n\n\n    void evaluate(Context ctx) {\n\n    if (!isInputDirty<input_INC>(ctx))\n        return;\n  \n    static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n    ::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select\n\n    auto digipot = getValue<input_SPI>(ctx);\n  \n    uint8_t address = (uint8_t) getValue<input_Pot2>(ctx) ? _BV(4) : 0x00 ;\n    uint8_t command = (uint8_t) 0b0100 ; // Increment\n    \n    ::digitalWrite(constant_input_CS, false); // chip select active\n    digipot->transfer( address | command ); // value\n    \n    ::digitalWrite(constant_input_CS, true); // chip select unactive\n\n    emitValue<output_DONE>(ctx, 1);\n    }\n    \n}\n"
        }
      ],
      "description": "MCP413X/415X/423X/425X\nMax STEPS (128 or 256) and Max Resistance (5, 10, 50, 100 kOhm) depend on model of unit.\nSTEP 0 = max resistance.",
      "nodes": {
        "ryvhPpn6Y": {
          "description": "Increase the Step on the wiper by 1 step",
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          }
        },
        "rJpZtThaK": {
          "boundLiterals": {
            "__out__": "D10"
          },
          "description": "CS (chip select) pin, can be any digital pin, to allow multiple devices.",
          "label": "CS",
          "id": "rJpZtThaK",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HyNXF63pF": {
          "description": "Increment Step",
          "label": "INC",
          "id": "HyNXF63pF",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Hyd1vXECF": {
          "label": "SPI",
          "id": "Hyd1vXECF",
          "type": "@/input-spi",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "S1L5OohCK": {
          "label": "DONE",
          "id": "S1L5OohCK",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          }
        },
        "SkaClkCCK": {
          "label": "Pot2",
          "id": "SkaClkCCK",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          }
        }
      },
      "path": "@/digipot-increment"
    },
    "@/digipot-write-to-class": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n#pragma XOD error_raise enable\n\n\nnode {\n\n\n    void evaluate(Context ctx) {\n\n    if (!isInputDirty<input_UPD>(ctx))\n        return;\n  \n    //static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n    //::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select\n\n    auto spi = getValue<input_SPI>(ctx);\n    auto digipot = getValue<input_POT>(ctx); \n        \n    uint8_t address = (uint8_t) getValue<input_Pot2>(ctx) ? 0x10 : 0x00 ;\n    //uint16_t command = ( (uint16_t) 0b0011 ) << 10;\n    \n    ::digitalWrite(digipot, false); // chip select active\n    spi->transfer( address ); // address\n    spi->transfer( (uint8_t) getValue<input_STEP>(ctx)); // value\n    \n    ::digitalWrite(digipot, true); // chip select unactive\n\n    emitValue<output_DONE>(ctx, 1);\n    }\n    \n}\n"
        }
      ],
      "description": "MCP413X/415X/423X/425X\nMax STEPS (128 or 256) and Max Resistance (5, 10, 50, 100 kOhm) depend on model of unit.\nSTEP 0 = max resistance.",
      "nodes": {
        "ryvhPpn6Y": {
          "description": "(Not Implemented) Needs work for future version. Want to use custom class to reduce nodes",
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          }
        },
        "HyNXF63pF": {
          "description": "Update the Device",
          "label": "UPD",
          "id": "HyNXF63pF",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Skp4YT2TK": {
          "description": "The Step from 0 to Max Range (128 or 256)",
          "label": "STEP",
          "id": "Skp4YT2TK",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          }
        },
        "Hyd1vXECF": {
          "label": "SPI",
          "id": "Hyd1vXECF",
          "type": "@/input-spi",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "S1L5OohCK": {
          "label": "DONE",
          "id": "S1L5OohCK",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          }
        },
        "HkuzikAAY": {
          "id": "HkuzikAAY",
          "type": "@/input-digipot-class",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "label": "POT"
        }
      },
      "comments": {
        "r1S1t7EAt": {
          "id": "r1S1t7EAt",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 12,
            "height": 3,
            "units": "slots"
          },
          "content": "Zero-Scale Error  (MCP4XX1 only)(8-bit code = 00h, 7-bit code = 00h)\n\nFull-Scale Error (MCP4XX1 only)(8-bit code = 100h, 7-bit code = 80h)\n\n"
        }
      },
      "path": "@/digipot-write-to-class"
    },
    "@/digipot-class": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\nnode {\n\n     meta {\n        using Type = Number;\n    } \n    \n    //auto MOhm = 10;\n   // auto bits = 8;\n   // auto CS = 10;\n   // auto maxStep = 128;\n    \n    void evaluate(Context ctx) {\n\n    if (isSettingUp()){\n             static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n             ::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select;\n             Type  digipot = getValue<input_CS>;\n                    digipot.Mohm = getValue<input_MOhm>(ctx);\n                    digipot.maxStep = getValue<input_bits8> ? 255 : 128;\n             \n    }\n\n        emitValue<output_POT>(ctx, digipot);\n\n    }\n}\n"
        }
      ],
      "description": "(Not Implemented) MCP413X/415X/423X/425X\nMax STEPS (128 or 256) and Max Resistance (5, 10, 50, 100 kOhm) ",
      "nodes": {
        "ryvhPpn6Y": {
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          }
        },
        "rygv8QV0F": {
          "label": "POT",
          "id": "rygv8QV0F",
          "type": "xod/patch-nodes/output-self",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          }
        },
        "BJ8MFyC0t": {
          "id": "BJ8MFyC0t",
          "type": "xod/patch-nodes/input-port",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "label": "CS",
          "boundLiterals": {
            "__out__": "D10"
          }
        },
        "SySBtyRCK": {
          "id": "SySBtyRCK",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "label": "bits8"
        },
        "SyIDFk00Y": {
          "id": "SyIDFk00Y",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "label": "MOhm",
          "boundLiterals": {
            "__out__": "10"
          }
        }
      },
      "comments": {
        "ryziKoARK": {
          "id": "ryziKoARK",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 6,
            "height": 1,
            "units": "slots"
          },
          "content": "This is not implemented, yet.\nFuture Update may use Class"
        }
      },
      "path": "@/digipot-class"
    },
    "@/digipot-decrement": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// used for MicroChip Technology MCP413X/415X/423X/425X SPI controlled digitial potentiometers and rheostats\n// Reference for Wiring: http://www.learningaboutelectronics.com/Articles/MCP4131-digital-potentiometer-circuit.php\n\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_DEC\n#pragma XOD error_raise enable\n\n\nnode {\n\n\n    void evaluate(Context ctx) {\n\n    if (!isInputDirty<input_DEC>(ctx))\n        return;\n  \n    static_assert(isValidDigitalPort(constant_input_CS), \"must be a valid digital port\");\n    ::pinMode(constant_input_CS, OUTPUT); // set pinmode output for Chip Select\n\n    auto digipot = getValue<input_SPI>(ctx);\n  \n    uint8_t address = (uint8_t) getValue<input_Pot2>(ctx) ? _BV(4) : 0x00 ;\n    uint8_t command = (uint8_t) 0b1000 ; // Decrement\n    \n    ::digitalWrite(constant_input_CS, false); // chip select active\n    digipot->transfer( address | command ); // value\n    \n    ::digitalWrite(constant_input_CS, true); // chip select unactive\n\n    emitValue<output_DONE>(ctx, 1);\n    }\n    \n}\n"
        }
      ],
      "description": "Decrease the Step on the wiper by 1 step",
      "nodes": {
        "ryvhPpn6Y": {
          "id": "ryvhPpn6Y",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          }
        },
        "rJpZtThaK": {
          "boundLiterals": {
            "__out__": "D10"
          },
          "description": "CS (chip select) pin, can be any digital pin, to allow multiple devices.",
          "label": "CS",
          "id": "rJpZtThaK",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HyNXF63pF": {
          "description": "Decrement Step",
          "label": "DEC",
          "id": "HyNXF63pF",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Hyd1vXECF": {
          "label": "SPI",
          "id": "Hyd1vXECF",
          "type": "@/input-spi",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          }
        },
        "S1L5OohCK": {
          "label": "DONE",
          "id": "S1L5OohCK",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          }
        },
        "SkaClkCCK": {
          "label": "Pot2",
          "id": "SkaClkCCK",
          "type": "xod/patch-nodes/input-boolean",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          }
        }
      },
      "path": "@/digipot-decrement"
    },
    "@/digipot-kohm-to-step": {
      "description": "Example applying math to the parameters of the device to select the resistance, Ohms, you want.",
      "links": {
        "S1qlhoCCt": {
          "id": "S1qlhoCCt",
          "output": {
            "nodeId": "rkOba03pF",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "B1ewT02TY",
            "pinKey": "SkdIRuBD1b"
          }
        },
        "Byol2i00K": {
          "id": "Byol2i00K",
          "output": {
            "nodeId": "SkXsnAnTF",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "B1ewT02TY",
            "pinKey": "BytUCdHD1-"
          }
        },
        "HkCb3oACY": {
          "id": "HkCb3oACY",
          "output": {
            "nodeId": "B1ewT02TY",
            "pinKey": "BkqLCOSw1W"
          },
          "input": {
            "nodeId": "HJO-3jRRK",
            "pinKey": "B1GfLR_SPk-"
          }
        },
        "S1WzhsA0Y": {
          "id": "S1WzhsA0Y",
          "output": {
            "nodeId": "ryQbp0hat",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "HJO-3jRRK",
            "pinKey": "SJ4zUC_BD1-"
          }
        },
        "S1Wu-hRRK": {
          "id": "S1Wu-hRRK",
          "output": {
            "nodeId": "rkOba03pF",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "B16wb3RRt",
            "pinKey": "BypX80uSD1Z"
          }
        },
        "Hkr_WhRRF": {
          "id": "Hkr_WhRRF",
          "output": {
            "nodeId": "HJO-3jRRK",
            "pinKey": "BkQzLCurwJZ"
          },
          "input": {
            "nodeId": "B16wb3RRt",
            "pinKey": "rkJ4URuHDJ-"
          }
        },
        "ByD_bn0RY": {
          "id": "ByD_bn0RY",
          "output": {
            "nodeId": "B16wb3RRt",
            "pinKey": "HyRmUCdBDkZ"
          },
          "input": {
            "nodeId": "S10f3sCRF",
            "pinKey": "__in__"
          }
        }
      },
      "nodes": {
        "SkXsnAnTF": {
          "boundLiterals": {
            "__out__": "10"
          },
          "description": "Max Resistance  kOhm (5, 10, 50, 100)",
          "label": "maxKohm",
          "id": "SkXsnAnTF",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 11,
            "y": 0,
            "units": "slots"
          }
        },
        "ryQbp0hat": {
          "boundLiterals": {
            "__out__": "10"
          },
          "description": "Resistance  kOhm desired",
          "label": "kOhm",
          "id": "ryQbp0hat",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 12,
            "y": 0,
            "units": "slots"
          }
        },
        "rkOba03pF": {
          "boundLiterals": {
            "__out__": "128"
          },
          "description": "Max Steps (128 or 255)",
          "label": "maxSTEP",
          "id": "rkOba03pF",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 9,
            "y": 0,
            "units": "slots"
          }
        },
        "B1ewT02TY": {
          "id": "B1ewT02TY",
          "type": "xod/core/divide",
          "position": {
            "x": 10,
            "y": 1,
            "units": "slots"
          }
        },
        "HJO-3jRRK": {
          "id": "HJO-3jRRK",
          "type": "xod/core/multiply",
          "position": {
            "x": 11,
            "y": 2,
            "units": "slots"
          }
        },
        "S10f3sCRF": {
          "id": "S10f3sCRF",
          "type": "xod/patch-nodes/output-number",
          "position": {
            "x": 9,
            "y": 3,
            "units": "slots"
          },
          "label": "STEP"
        },
        "B16wb3RRt": {
          "id": "B16wb3RRt",
          "type": "xod/core/subtract",
          "position": {
            "x": 9,
            "y": 2,
            "units": "slots"
          }
        }
      },
      "path": "@/digipot-kohm-to-step"
    }
  },
  "version": "0.2.0",
  "description": "Microchip Technology MCP413X/415X/423X/425X  digital potentiometer and rheostat by SPI communication.",
  "name": "digipot-mcp-spi"
}
