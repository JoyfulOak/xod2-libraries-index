{
  "apiKey": "1d6385ca-38f5-438a-a278-08ec40cdeb8f",
  "description": "Node for using the max31855k thermocouple ",
  "name": "adafruit-max31855kdevice",
  "patches": {
    "@/main": {
      "nodes": {
        "SygKj7BSu": {
          "id": "SygKj7BSu",
          "type": "@/max31855k-device",
          "position": {
            "x": -3,
            "y": 0,
            "units": "slots"
          },
          "description": "Node for connecting and measuring the temperature using an Adafruit_31855k device"
        }
      },
      "path": "@/main"
    },
    "@/max31855k-device": {
      "nodes": {
        "BkxsM7HS_": {
          "id": "BkxsM7HS_",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 10,
            "y": 2,
            "units": "slots"
          },
          "description": "Insert the "
        },
        "SySd5XBSO": {
          "id": "SySd5XBSO",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 9,
            "y": 1,
            "units": "slots"
          },
          "label": "MAXCLK",
          "description": "Insert the CLK pin for the SPI communications (the  5 pin is used by default)",
          "boundLiterals": {
            "__out__": "5"
          }
        },
        "r1Odc7Br_": {
          "id": "r1Odc7Br_",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 10,
            "y": 1,
            "units": "slots"
          },
          "label": "MAXCS",
          "description": "Insert the CS pin for the SPI communications (the  4 pin is used by default)",
          "boundLiterals": {
            "__out__": "4"
          }
        },
        "HyhOdq7BHu": {
          "id": "HyhOdq7BHu",
          "type": "xod/patch-nodes/input-number",
          "position": {
            "x": 11,
            "y": 1,
            "units": "slots"
          },
          "label": "MAXDO",
          "description": "Insert the D0 pin for the SPI communications (the  3 pin is used by default)",
          "boundLiterals": {
            "__out__": "3"
          }
        },
        "Symt5mrH_": {
          "id": "Symt5mrH_",
          "type": "xod/patch-nodes/output-number",
          "position": {
            "x": 8,
            "y": 3,
            "units": "slots"
          },
          "label": "Temp",
          "description": "Displays the temperature (in oC)"
        },
        "r1XbeVBBO": {
          "id": "r1XbeVBBO",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 11,
            "y": 3,
            "units": "slots"
          },
          "label": "DONE",
          "description": "Pulses 1 when a measurement has been done"
        },
        "rJxfxNHHu": {
          "id": "rJxfxNHHu",
          "type": "xod/patch-nodes/input-pulse",
          "position": {
            "x": 12,
            "y": 1,
            "units": "slots"
          },
          "label": "UPD",
          "description": "Node for updating the measurements",
          "boundLiterals": {
            "__out__": "Continuously"
          }
        },
        "rkI4Fk8ru": {
          "id": "rkI4Fk8ru",
          "type": "xod/patch-nodes/output-number",
          "position": {
            "x": 9,
            "y": 3,
            "units": "slots"
          },
          "label": "IntTemp",
          "description": "Displays the internal temperature of the thermocouple (in oC)"
        },
        "SyVghkLBO": {
          "id": "SyVghkLBO",
          "type": "xod/patch-nodes/output-number",
          "position": {
            "x": 10,
            "y": 3,
            "units": "slots"
          },
          "label": "TempRead",
          "description": "Test to check if the hardware is working correctly. Gives 1 if the reads give a numeric value, or 0 if  something is wrong with the thermocouple."
        }
      },
      "path": "@/max31855k-device",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD require \"https://github.com/adafruit/Adafruit-MAX31855-library\"\n#pragma XOD require \"https://github.com/adafruit/Adafruit_BusIO\"\n#include <SPI.h>\n#include \"Adafruit_MAX31855.h\"\n\n\nnode {\n    // Internal state variables defined at this level persists across evaluations\n    Number foo;\n    uint8_t bar = 5;\n\n    void evaluate(Context ctx) {\n        bar += 42;\n\n        if (isSettingUp()) {\n            // This run once\n            foo = (Number)(bar + 1);\n        }\n  if (!isInputDirty<input_UPD>(ctx)) \n            return;\n    \n  int MAXCLK;\n  int MAXCS;\n  int MAXDO;\n        \n   MAXCLK = getValue<input_MAXCLK>(ctx);\n   MAXCS = getValue<input_MAXCS>(ctx);\n   MAXDO = getValue<input_MAXDO>(ctx);\n        \n   Adafruit_MAX31855 thermocouple(MAXCLK, MAXCS, MAXDO);\n  \n   thermocouple.begin();\n\n   double c = thermocouple.readCelsius();\n   double r = thermocouple.readInternal()\n        \n   if (isnan(c)) {\n\n   emitValue<output_TempRead>(ctx, 0);\n    \n   } else {\n\n   emitValue<output_Temp>(ctx, c);\n   emitValue<output_TempRead>(ctx, 1);\n\n   emitValue<output_DONE>(ctx, 1);\n       \n   }\n   emitValue<output_IntTemp>(ctx, r);\n    }\n      \n}\n"
        }
      ]
    }
  },
  "version": "0.0.2"
}
