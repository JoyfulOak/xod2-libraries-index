{
  "description": "Memsic MX2125 Dual-axis Accelerometer library for Arduino",
  "license": "Copyright 2015 Aaron Magill, MIT License",
  "name": "x2125",
  "patches": {
    "@/example-mx2125": {
      "links": {
        "BJUUdIHR7": {
          "id": "BJUUdIHR7",
          "input": {
            "nodeId": "rJfUOLHA7",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "S164_8rCX",
            "pinKey": "r14GvLSCQ"
          }
        },
        "BydIuIHRQ": {
          "id": "BydIuIHRQ",
          "input": {
            "nodeId": "rkSI_ISCX",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "S164_8rCX",
            "pinKey": "BkrzvLBRm"
          }
        },
        "rkCEuUSAX": {
          "id": "rkCEuUSAX",
          "input": {
            "nodeId": "S164_8rCX",
            "pinKey": "HJLZPLH0m"
          },
          "output": {
            "nodeId": "HkL0exQ0Q",
            "pinKey": "SkV0LNBRQ"
          }
        },
        "H1VAwZL0Q": {
          "id": "H1VAwZL0Q",
          "output": {
            "nodeId": "HkL0exQ0Q",
            "pinKey": "SkV0LNBRQ"
          },
          "input": {
            "nodeId": "HylAwW8CX",
            "pinKey": "SymSmI-807"
          }
        },
        "r1r0wWUA7": {
          "id": "r1r0wWUA7",
          "output": {
            "nodeId": "HkL0exQ0Q",
            "pinKey": "SkV0LNBRQ"
          },
          "input": {
            "nodeId": "BkDaD-8CQ",
            "pinKey": "HJXSjLZUC7"
          }
        },
        "HJPCwZLRm": {
          "id": "HJPCwZLRm",
          "output": {
            "nodeId": "HkL0exQ0Q",
            "pinKey": "SkV0LNBRQ"
          },
          "input": {
            "nodeId": "BJ6aw-80Q",
            "pinKey": "Sk7sfPWIC7"
          }
        },
        "B1_Kd-8A7": {
          "id": "B1_Kd-8A7",
          "output": {
            "nodeId": "HylAwW8CX",
            "pinKey": "rkNrmUWLC7"
          },
          "input": {
            "nodeId": "ByTddWIAQ",
            "pinKey": "HkXK-dGob"
          }
        },
        "HktKuZIRX": {
          "id": "HktKuZIRX",
          "output": {
            "nodeId": "HylAwW8CX",
            "pinKey": "By-BQ8W8AQ"
          },
          "input": {
            "nodeId": "HJg6OO-80m",
            "pinKey": "HkXK-dGob"
          }
        },
        "HyjFu-ICX": {
          "id": "HyjFu-ICX",
          "output": {
            "nodeId": "BkDaD-8CQ",
            "pinKey": "SkErjUbI0Q"
          },
          "input": {
            "nodeId": "HkQKu-LRQ",
            "pinKey": "HkXK-dGob"
          }
        },
        "B13YObUAm": {
          "id": "B13YObUAm",
          "output": {
            "nodeId": "BJ6aw-80Q",
            "pinKey": "H1NizwbIAQ"
          },
          "input": {
            "nodeId": "rJxKOZ8AX",
            "pinKey": "HkXK-dGob"
          }
        },
        "rkAFObLCm": {
          "id": "rkAFObLCm",
          "output": {
            "nodeId": "BJ6aw-80Q",
            "pinKey": "r1WjGw-LAX"
          },
          "input": {
            "nodeId": "HyxxYuWLCQ",
            "pinKey": "HkXK-dGob"
          }
        },
        "Hklid-IRQ": {
          "id": "Hklid-IRQ",
          "output": {
            "nodeId": "HkV9u-LAX",
            "pinKey": "HJU8CE2lW"
          },
          "input": {
            "nodeId": "BJ6aw-80Q",
            "pinKey": "ByziMDZU0Q"
          }
        }
      },
      "nodes": {
        "HkL0exQ0Q": {
          "boundLiterals": {
            "rJqpny7Am": "A1",
            "ry7aR8EAQ": "Continuously"
          },
          "id": "HkL0exQ0Q",
          "position": {
            "x": 102,
            "y": 102
          },
          "type": "@/device-mx2125"
        },
        "S164_8rCX": {
          "id": "S164_8rCX",
          "position": {
            "x": 102,
            "y": 204
          },
          "type": "@/get-acceleration"
        },
        "rJfUOLHA7": {
          "id": "rJfUOLHA7",
          "position": {
            "x": 102,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "rkSI_ISCX": {
          "id": "rkSI_ISCX",
          "position": {
            "x": 136,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "BkDaD-8CQ": {
          "id": "BkDaD-8CQ",
          "type": "@/get-rotation",
          "position": {
            "x": 374,
            "y": 204
          }
        },
        "BJ6aw-80Q": {
          "id": "BJ6aw-80Q",
          "type": "@/get-temperature",
          "position": {
            "x": 476,
            "y": 204
          }
        },
        "HylAwW8CX": {
          "id": "HylAwW8CX",
          "type": "@/get-tilt",
          "position": {
            "x": 238,
            "y": 204
          }
        },
        "ByTddWIAQ": {
          "id": "ByTddWIAQ",
          "position": {
            "x": 238,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "HJg6OO-80m": {
          "id": "HJg6OO-80m",
          "position": {
            "x": 272,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "rJxKOZ8AX": {
          "id": "rJxKOZ8AX",
          "position": {
            "x": 476,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "HyxxYuWLCQ": {
          "id": "HyxxYuWLCQ",
          "position": {
            "x": 510,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "HkQKu-LRQ": {
          "id": "HkQKu-LRQ",
          "position": {
            "x": 374,
            "y": 306
          },
          "type": "xod/core/watch"
        },
        "HkV9u-LAX": {
          "id": "HkV9u-LAX",
          "type": "xod/core/clock",
          "position": {
            "x": 510,
            "y": 102
          },
          "boundLiterals": {
            "B13SCNhl-": "10"
          }
        }
      },
      "path": "@/example-mx2125"
    },
    "@/get-acceleration": {
      "attachments": [
        {
          "content": "struct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx)){\n        return;}\n\n    // Get a pointer to the class instance\n    auto Accelerometer = getValue<input_IN>(ctx);\n\n    auto X = Accelerometer->mx_acceleration_x();\n    auto Y = Accelerometer->mx_acceleration_y();\n\n    emitValue<output_X>(ctx, X);\n    emitValue<output_Y>(ctx, Y);\n\n    emitValue<output_OK>(ctx, 1);\n}\n",
          "encoding": "utf-8",
          "filename": "patch.cpp"
        }
      ],
      "description": "Measure acceleration in terms of g (acceleration due to earth's gravity).\n\nReturns value that represents the milli G's acting on the axis.",
      "nodes": {
        "B1o-vLBA7": {
          "id": "B1o-vLBA7",
          "position": {
            "x": 68,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "BkT5DIHRm": {
          "description": "Update Completed OK",
          "id": "BkT5DIHRm",
          "label": "OK",
          "position": {
            "x": 238,
            "y": 204
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BkrzvLBRm": {
          "description": "Y Sensor Value",
          "id": "BkrzvLBRm",
          "label": "Y",
          "position": {
            "x": 136,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "H11vvIS07": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Get Value",
          "id": "H11vvIS07",
          "label": "INIT",
          "position": {
            "x": 204,
            "y": 0
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HJLZPLH0m": {
          "description": "Input from Device Block.",
          "id": "HJLZPLH0m",
          "position": {
            "x": 34,
            "y": 0
          },
          "type": "@/input-device-mx2125"
        },
        "r14GvLSCQ": {
          "description": "X Sensor Value",
          "id": "r14GvLSCQ",
          "label": "X",
          "position": {
            "x": 68,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/get-acceleration"
    },
    "@/device-mx2125": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD require \"https://github.com/asmagill/Mx2125\"\n\n{{#global}}\n#include <Mx2125.h>\n{{/global}}\n\nstruct State {\n    uint8_t mem[sizeof(Mx2125)];\n};\n\n// Define our custom type as a pointer on the class instance.\nusing Type = Mx2125*;\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n\n        // It should be evaluated only once on the first (setup) transaction\n    if (!isSettingUp())\n        return;\n\n    auto state = getState(ctx);\n    auto xPin = getValue<input_XPin>(ctx);\n    auto yPin = getValue<input_YPin>(ctx);\n    auto tPin = getValue<input_TPin>(ctx);\n\n    // Create a new object in the memory area reserved previously.\n    Type Accelerometer = new (state->mem) Mx2125(xPin, yPin, tPin);\n\n    emitValue<output_OUT>(ctx, Accelerometer);\n\n}\n"
        }
      ],
      "description": "A simple Wrapper for the MX2125 Library by Aaron Magill",
      "nodes": {
        "H1Pp21XC7": {
          "description": "Constructor which sets the pins being used for the X-Axis. xPin and yPin should be digital pins, while tPin should be an analog pin. Undefined results if you choose poorly.",
          "id": "H1Pp21XC7",
          "label": "XPin",
          "position": {
            "x": 34,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HkOanJXAX": {
          "description": "Constructor which sets the pins being used for the Y-Axis reading. xPin and yPin should be digital pins, while tPin should be an analog pin. Undefined results if you choose poorly.",
          "id": "HkOanJXAX",
          "label": "YPin",
          "position": {
            "x": 102,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "Hyhp2JmAm": {
          "id": "Hyhp2JmAm",
          "position": {
            "x": 34,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SkV0LNBRQ": {
          "id": "SkV0LNBRQ",
          "position": {
            "x": 0,
            "y": 204
          },
          "type": "xod/patch-nodes/output-self"
        },
        "rJqpny7Am": {
          "description": "Constructor which sets the pins being used for the T-Out reading for input. xPin and yPin should be digital pins, while tPin should be an analog pin. Undefined results if you choose poorly.",
          "id": "rJqpny7Am",
          "label": "TPin",
          "position": {
            "x": 170,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        }
      },
      "path": "@/device-mx2125"
    },
    "@/get-tilt": {
      "nodes": {
        "HJSm8ZLR7": {
          "id": "HJSm8ZLR7",
          "position": {
            "x": 33,
            "y": 101
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "HyerQIW8C7": {
          "description": "Update Completed OK",
          "id": "HyerQIW8C7",
          "label": "OK",
          "position": {
            "x": 203,
            "y": 203
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "By-BQ8W8AQ": {
          "description": "Y Sensor Value",
          "id": "By-BQ8W8AQ",
          "label": "Y",
          "position": {
            "x": 101,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HJfH7UbUCX": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Get Value",
          "id": "HJfH7UbUCX",
          "label": "INIT",
          "position": {
            "x": 169,
            "y": -1
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SymSmI-807": {
          "description": "Input from Device Block.",
          "id": "SymSmI-807",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "@/input-device-mx2125"
        },
        "rkNrmUWLC7": {
          "description": "X Sensor Value",
          "id": "rkNrmUWLC7",
          "label": "X",
          "position": {
            "x": 33,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/get-tilt",
      "description": "Measure the level of tilt in terms of +/- 90 degrees. 0 degrees is when the top surface of the accelerometer chip is parallel to the ground.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "struct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx)){\n        return;}\n\n    // Get a pointer to the class instance\n    auto Accelerometer = getValue<input_IN>(ctx);\n\n    auto X = Accelerometer->mx_tilt_x();\n    auto Y = Accelerometer->mx_tilt_y();\n\n    emitValue<output_X>(ctx, X);\n    emitValue<output_Y>(ctx, Y);\n\n    emitValue<output_OK>(ctx, 1);\n}\n"
        }
      ]
    },
    "@/get-rotation": {
      "nodes": {
        "HJBj8bLA7": {
          "id": "HJBj8bLA7",
          "position": {
            "x": 33,
            "y": 101
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "rJxriU-LRm": {
          "description": "Update Completed OK",
          "id": "rJxriU-LRm",
          "label": "OK",
          "position": {
            "x": 203,
            "y": 203
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rkfBsLWICQ": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Get Value",
          "id": "rkfBsLWICQ",
          "label": "INIT",
          "position": {
            "x": 169,
            "y": -1
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HJXSjLZUC7": {
          "description": "Input from Device Block.",
          "id": "HJXSjLZUC7",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "@/input-device-mx2125"
        },
        "SkErjUbI0Q": {
          "description": "Rotation Sensor Value",
          "id": "SkErjUbI0Q",
          "label": "ROT",
          "position": {
            "x": 33,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/get-rotation",
      "description": "Measure clockwise rotation assuming accelerometer is held vertical. Zero degree rotation is when the triangle on the MX2125 chip is pointing up.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "struct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx)){\n        return;}\n\n    // Get a pointer to the class instance\n    auto Accelerometer = getValue<input_IN>(ctx);\n\n    auto rot = Accelerometer->mx_rotation();\n\n    emitValue<output_ROT>(ctx, rot);\n\n    emitValue<output_OK>(ctx, 1);\n}\n"
        }
      ]
    },
    "@/get-temperature": {
      "nodes": {
        "rJszwW8CX": {
          "id": "rJszwW8CX",
          "position": {
            "x": 33,
            "y": 101
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "rkxszPbICQ": {
          "description": "Update Completed OK",
          "id": "rkxszPbICQ",
          "label": "OK",
          "position": {
            "x": 203,
            "y": 203
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "r1WjGw-LAX": {
          "description": "Temperature Sensor Value in F",
          "id": "r1WjGw-LAX",
          "label": "TempF",
          "position": {
            "x": 101,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        },
        "ByziMDZU0Q": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Get Value",
          "id": "ByziMDZU0Q",
          "label": "INIT",
          "position": {
            "x": 169,
            "y": -1
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Sk7sfPWIC7": {
          "description": "Input from Device Block.",
          "id": "Sk7sfPWIC7",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "@/input-device-mx2125"
        },
        "H1NizwbIAQ": {
          "description": "Temperature Sensor Value in C",
          "id": "H1NizwbIAQ",
          "label": "TempC",
          "position": {
            "x": 33,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/get-temperature",
      "description": "Returns floating point number of the temperature in Celsius as reported by the MX2125 chip. The formula used is calculated for use with the ADC bit width of an Arduino UNO and will need to be changed if your model is different.  Note that this seems to fluctuate quite a bit, but should give an idea as to the approximate operating temperature...",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "struct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx)){\n        return;}\n\n    // Get a pointer to the class instance\n    auto Accelerometer = getValue<input_IN>(ctx);\n\n    auto tempc = Accelerometer->mx_temperature();\n    auto tempf = (Accelerometer->mx_temperature()* 9/5 + 32);\n\n    emitValue<output_TempC>(ctx, tempc);\n    emitValue<output_TempF>(ctx, tempf);\n\n    emitValue<output_OK>(ctx, 1);\n}\n"
        }
      ]
    }
  },
  "version": "0.0.7"
}
