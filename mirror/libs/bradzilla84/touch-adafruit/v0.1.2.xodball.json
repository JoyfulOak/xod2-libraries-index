{
  "description": "This is a touch display Wrapper for the common Adafruit TouchScreen.\nCan be used to map display to touch values and make Keypads and Menus.(More examle's to come)",
  "license": "GPL",
  "name": "touch-adafruit",
  "patches": {
    "@/example-map-grid": {
      "links": {
        "BJDpaJe0Q": {
          "id": "BJDpaJe0Q",
          "input": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "S1XXIZ3107"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "B1KNDoJAQ"
          }
        },
        "BJXSP1eAX": {
          "id": "BJXSP1eAX",
          "input": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "Bk1qlRJ0X"
          },
          "output": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "H1gFK31RQ"
          }
        },
        "ByXWw1g0m": {
          "id": "ByXWw1g0m",
          "input": {
            "nodeId": "SkY1tokAX",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "H1gFK31RQ"
          }
        },
        "H1CNDyxAm": {
          "id": "H1CNDyxAm",
          "input": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "Hkpi9hJRX"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "S1W-a8jkAQ"
          }
        },
        "H1rWPyxCX": {
          "id": "H1rWPyxCX",
          "input": {
            "nodeId": "HkTyts1Rm",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "HyftYhkRX"
          }
        },
        "HJuZw1lRm": {
          "id": "HJuZw1lRm",
          "input": {
            "nodeId": "r1eYM8yeRQ",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "ByYRVkxCQ"
          }
        },
        "HkDWPJeRm": {
          "id": "HkDWPJeRm",
          "input": {
            "nodeId": "HkYMLklRX",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "H1XLW3yRX"
          }
        },
        "S1SrvJlAX": {
          "id": "S1SrvJlAX",
          "input": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "Skl15e0kAQ"
          },
          "output": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "HyftYhkRX"
          }
        },
        "SJ2YtgeR7": {
          "id": "SJ2YtgeR7",
          "input": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "B1N-pUsJAm"
          },
          "output": {
            "nodeId": "SJyJFjJ0X",
            "pinKey": "BJxewIjy0Q"
          }
        },
        "Sy54P1eAX": {
          "id": "Sy54P1eAX",
          "input": {
            "nodeId": "HyX5qnyAX",
            "pinKey": "B1si52107"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "S1bpIiJAQ"
          }
        },
        "SytWDJeRX": {
          "id": "SytWDJeRX",
          "input": {
            "nodeId": "B1ZFMIylRQ",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJOQIyx0m",
            "pinKey": "B19CN1l0X"
          }
        },
        "r18GPkl07": {
          "id": "r18GPkl07",
          "input": {
            "nodeId": "r1eaytsyR7",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "SJlWaIjkCX"
          }
        },
        "rJTGP1x0Q": {
          "id": "rJTGP1x0Q",
          "input": {
            "nodeId": "rJxYkphyC7",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "S1W-a8jkAQ"
          }
        },
        "rksMwJe0Q": {
          "id": "rksMwJe0Q",
          "input": {
            "nodeId": "ryYkphkC7",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJoCuj10Q",
            "pinKey": "S1bpIiJAQ"
          }
        }
      },
      "nodes": {
        "B1ZFMIylRQ": {
          "id": "B1ZFMIylRQ",
          "position": {
            "x": 544,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "HkTyts1Rm": {
          "id": "HkTyts1Rm",
          "position": {
            "x": 136,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "HkYMLklRX": {
          "id": "HkYMLklRX",
          "position": {
            "x": 476,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "HyX5qnyAX": {
          "boundLiterals": {
            "B1mwO2JA7": "115",
            "BJLLdnJ07": "115",
            "By1V_n1AQ": "940"
          },
          "id": "HyX5qnyAX",
          "position": {
            "x": 102,
            "y": -306
          },
          "type": "@/touch-map-to-display"
        },
        "SJoCuj10Q": {
          "id": "SJoCuj10Q",
          "position": {
            "x": 340,
            "y": -510
          },
          "type": "@/touch-detect"
        },
        "SJyJFjJ0X": {
          "id": "SJyJFjJ0X",
          "position": {
            "x": 340,
            "y": -612
          },
          "type": "@/touch-device"
        },
        "SkY1tokAX": {
          "id": "SkY1tokAX",
          "position": {
            "x": 102,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "r1eYM8yeRQ": {
          "id": "r1eYM8yeRQ",
          "position": {
            "x": 510,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "r1eaytsyR7": {
          "id": "r1eaytsyR7",
          "position": {
            "x": 408,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "rJOQIyx0m": {
          "boundLiterals": {
            "BJSbD6JAX": "3",
            "H1MWPa1AQ": "4"
          },
          "id": "rJOQIyx0m",
          "position": {
            "x": 476,
            "y": -306
          },
          "type": "@/touch-detect-grid"
        },
        "rJxYkphyC7": {
          "id": "rJxYkphyC7",
          "position": {
            "x": 374,
            "y": -204
          },
          "type": "xod/core/watch"
        },
        "ryYkphkC7": {
          "id": "ryYkphkC7",
          "position": {
            "x": 340,
            "y": -204
          },
          "type": "xod/core/watch"
        }
      },
      "path": "@/example-map-grid"
    },
    "@/touch-detect": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "\nstruct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx))\n        return;\n\n    // Get a pointer to the  class instance\n    auto ts = getValue<input_IN>(ctx);\n\n // a point object holds x y and z coordinates\n  TSPoint p = ts->getPoint();\n  pinMode(getValue<input_XM>(ctx), OUTPUT);        //restore shared pins\n  pinMode(getValue<input_YP>(ctx), OUTPUT);\n  digitalWrite(getValue<input_XM>(ctx), HIGH);     //because TFT control pins\n  digitalWrite(getValue<input_YP>(ctx), HIGH);\n  // we have some minimum pressure we consider 'valid'\n  // pressure of 0 means no pressing above 500 is error!\n  if (p.z > 0 && p.z < 500) {\n      emitValue<output_X>(ctx, p.x);\n      emitValue<output_Y>(ctx, p.y);\n      emitValue<output_Pressure>(ctx, p.z);\n      emitValue<output_TouchDetected>(ctx, 1);\n  }\n}\n"
        }
      ],
      "description": "Detect Touch and output Raw XY",
      "nodes": {
        "B1KNDoJAQ": {
          "description": "Pulse on Touch Detected",
          "id": "B1KNDoJAQ",
          "label": "TouchDetected",
          "position": {
            "x": 136,
            "y": 204
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "B1N-pUsJAm": {
          "id": "B1N-pUsJAm",
          "label": "IN",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "@/input-touch-device"
        },
        "ByXZT8sk0Q": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Check for Touch (just leave set to Continuously to recive touch evets on the TouchDetected pin)",
          "id": "ByXZT8sk0Q",
          "label": "INIT",
          "position": {
            "x": 170,
            "y": 0
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "H1GhKj1A7": {
          "boundLiterals": {
            "__out__": "A2"
          },
          "description": "YP Pin (Some display's share pins with the touch Screen set this to your YP Pin to Workarround)",
          "id": "H1GhKj1A7",
          "label": "YP",
          "position": {
            "x": 68,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "H1M-aIsy0m": {
          "description": "Read out the touch events on trigger or Continuously. X Y coordinates and pressure applied",
          "id": "H1M-aIsy0m",
          "position": {
            "x": 34,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "S1W-a8jkAQ": {
          "description": "Y  Location",
          "id": "S1W-a8jkAQ",
          "label": "Y",
          "position": {
            "x": 34,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "S1bpIiJAQ": {
          "description": "X Location",
          "id": "S1bpIiJAQ",
          "label": "X",
          "position": {
            "x": 0,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SJlWaIjkCX": {
          "description": "Pressure Applied ",
          "id": "SJlWaIjkCX",
          "label": "Pressure",
          "position": {
            "x": 67,
            "y": 203
          },
          "type": "xod/patch-nodes/output-number"
        },
        "r1eM2KoJA7": {
          "boundLiterals": {
            "__out__": "A3"
          },
          "description": "XM Pin (Some display's share pins with the touch Screen set this to your XM Pin to Workarround)",
          "id": "r1eM2KoJA7",
          "label": "XM",
          "position": {
            "x": 102,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        }
      },
      "path": "@/touch-detect"
    },
    "@/touch-detect-grid": {
      "attachments": [
        {
          "content": "\nstruct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // The node responds only if there is an input pulse\n    if (!isInputDirty<input_INIT>(ctx))\n        return;\n    auto grids = (getValue<input_XGridNumber>(ctx) * getValue<input_YGridNumber>(ctx));\n    auto gridPixSizeX =((getValue<input_XMax>(ctx) - getValue<input_XMin>(ctx)) / getValue<input_XGridNumber>(ctx));\n    auto gridPixSizeY =((getValue<input_YMax>(ctx) - getValue<input_YMin>(ctx)) / getValue<input_YGridNumber>(ctx));\n    auto gridnumber = 0;\n    for (int gridy = 1; gridy <= getValue<input_YGridNumber>(ctx); gridy++) {\n        for (int gridx = 1; gridx <= getValue<input_XGridNumber>(ctx); gridx++) {\n            gridnumber++;\n            if(getValue<input_Y>(ctx) < (gridPixSizeY * gridy)){\n                if(getValue<input_X>(ctx) < (gridPixSizeX * gridx)){\n                    emitValue<output_TouchDetected>(ctx, 1);\n                    emitValue<output_GridNumber>(ctx, gridnumber);\n                    emitValue<output_GridX>(ctx, gridx);\n                    emitValue<output_GridY>(ctx, gridy);\n                    return;\n                }\n            }\n          }\n\n      }\n\n\n\n\n\n}\n",
          "encoding": "utf-8",
          "filename": "patch.cpp"
        }
      ],
      "description": "Make a Grid of touch events.( Usefull for making Button grids..Keypads...Ect...)(Trigger different Pages/Events based on what button was Pressed)",
      "nodes": {
        "B19CN1l0X": {
          "description": "Grid Y the touch was detected in.",
          "id": "B19CN1l0X",
          "label": "GridY",
          "position": {
            "x": 102,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BJSbD6JAX": {
          "boundLiterals": {
            "__out__": "4"
          },
          "description": "Number or Blocks/Buttons in the Y Direction.",
          "id": "BJSbD6JAX",
          "label": "YGridNumber",
          "position": {
            "x": 136,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "Bk1qlRJ0X": {
          "description": "X Input from touch Map.",
          "id": "Bk1qlRJ0X",
          "label": "X",
          "position": {
            "x": -2,
            "y": -2
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ByYRVkxCQ": {
          "description": "Grid X the touch was detected in.",
          "id": "ByYRVkxCQ",
          "label": "GridX",
          "position": {
            "x": 68,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "H1MWPa1AQ": {
          "boundLiterals": {
            "__out__": "3"
          },
          "description": "Number or Blocks/Buttons in the X Direction.",
          "id": "H1MWPa1AQ",
          "label": "XGridNumber",
          "position": {
            "x": 102,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "H1XLW3yRX": {
          "description": "Grid number the touch was detected in.",
          "id": "H1XLW3yRX",
          "label": "GridNumber",
          "position": {
            "x": 0,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "H1zQ8Wn1AX": {
          "description": "Read out the touch events on trigger or Continuously. X Y coordinates and pressure applied",
          "id": "H1zQ8Wn1AX",
          "position": {
            "x": 34,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "HJTxFpk0Q": {
          "boundLiterals": {
            "__out__": "0"
          },
          "description": "X Min of Grid Area.",
          "id": "HJTxFpk0Q",
          "label": "XMin",
          "position": {
            "x": 204,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "HJx6xtakAm": {
          "boundLiterals": {
            "__out__": "0"
          },
          "description": "Y Min of Grid Area.",
          "id": "HJx6xtakAm",
          "label": "YMin",
          "position": {
            "x": 238,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "S1XXIZ3107": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Check for Touch in Grid (Connect to the Touct-Detect block OK pin to keep things fast and clean.)",
          "id": "S1XXIZ3107",
          "label": "INIT",
          "position": {
            "x": 408,
            "y": 0
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "S1bTeFakRm": {
          "boundLiterals": {
            "__out__": "320"
          },
          "description": "X Max of Grid Area.",
          "id": "S1bTeFakRm",
          "label": "XMax",
          "position": {
            "x": 272,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SJfpgK6yR7": {
          "boundLiterals": {
            "__out__": "240"
          },
          "description": "X Max of Grid Area.",
          "id": "SJfpgK6yR7",
          "label": "YMax",
          "position": {
            "x": 306,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SkSXLb3kRm": {
          "description": "Pulse on Touch Detected in Grid",
          "id": "SkSXLb3kRm",
          "label": "TouchDetected",
          "position": {
            "x": 170,
            "y": 204
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "Skl15e0kAQ": {
          "description": "Y Input from touch Map.",
          "id": "Skl15e0kAQ",
          "label": "Y",
          "position": {
            "x": 34,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/touch-detect-grid"
    },
    "@/touch-map-to-display": {
      "description": "Map the Touch Events to the Display Dimensions.",
      "links": {
        "BJD85ny07": {
          "id": "BJD85ny07",
          "input": {
            "nodeId": "BkiGFnkAX",
            "pinKey": "B1rSeJlnZ"
          },
          "output": {
            "nodeId": "BJLLdnJ07",
            "pinKey": "__out__"
          }
        },
        "H1I09hJAm": {
          "id": "H1I09hJAm",
          "input": {
            "nodeId": "BkiGFnkAX",
            "pinKey": "HJjEe1lnb"
          },
          "output": {
            "nodeId": "B1si52107",
            "pinKey": "__out__"
          }
        },
        "H1xUK2JRm": {
          "id": "H1xUK2JRm",
          "input": {
            "nodeId": "SyxjMF2J0X",
            "pinKey": "HkFBgJehW"
          },
          "output": {
            "nodeId": "SycjD3kCX",
            "pinKey": "__out__"
          }
        },
        "HkFatn1Rm": {
          "id": "HkFatn1Rm",
          "input": {
            "nodeId": "HyftYhkRX",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "SyxjMF2J0X",
            "pinKey": "rJFmgJehW"
          }
        },
        "SkYIcnyRm": {
          "id": "SkYIcnyRm",
          "input": {
            "nodeId": "SyxjMF2J0X",
            "pinKey": "SJbSlJxh-"
          },
          "output": {
            "nodeId": "rJpHO3yCm",
            "pinKey": "__out__"
          }
        },
        "Syh89nkAm": {
          "id": "Syh89nkAm",
          "input": {
            "nodeId": "SyxjMF2J0X",
            "pinKey": "B1rSeJlnZ"
          },
          "output": {
            "nodeId": "B1mwO2JA7",
            "pinKey": "__out__"
          }
        },
        "r12SYhJC7": {
          "id": "r12SYhJC7",
          "input": {
            "nodeId": "BkiGFnkAX",
            "pinKey": "HkFBgJehW"
          },
          "output": {
            "nodeId": "ryXiP2J0Q",
            "pinKey": "__out__"
          }
        },
        "r1_092kAX": {
          "id": "r1_092kAX",
          "input": {
            "nodeId": "SyxjMF2J0X",
            "pinKey": "HJjEe1lnb"
          },
          "output": {
            "nodeId": "Hkpi9hJRX",
            "pinKey": "__out__"
          }
        },
        "rJD6FhJCQ": {
          "id": "rJD6FhJCQ",
          "input": {
            "nodeId": "H1gFK31RQ",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "BkiGFnkAX",
            "pinKey": "rJFmgJehW"
          }
        },
        "ryHUq3k0m": {
          "id": "ryHUq3k0m",
          "input": {
            "nodeId": "BkiGFnkAX",
            "pinKey": "SJbSlJxh-"
          },
          "output": {
            "nodeId": "By1V_n1AQ",
            "pinKey": "__out__"
          }
        }
      },
      "nodes": {
        "B1mwO2JA7": {
          "boundLiterals": {
            "__out__": "100"
          },
          "description": "X Max of Touch Output. (will need to be remaped for Orientation)",
          "id": "B1mwO2JA7",
          "label": "YMaxTouch",
          "position": {
            "x": 340,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "B1si52107": {
          "description": "X Input from touch detect.",
          "id": "B1si52107",
          "label": "X",
          "position": {
            "x": 34,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "BJLLdnJ07": {
          "boundLiterals": {
            "__out__": "100"
          },
          "description": "X Max of Touch Output. (will need to be remaped for Orientation)",
          "id": "BJLLdnJ07",
          "label": "XMaxTouch",
          "position": {
            "x": 306,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "BkiGFnkAX": {
          "boundLiterals": {
            "B1rSeJlnZ": "100",
            "HkFBgJehW": "320",
            "SJbSlJxh-": "950"
          },
          "id": "BkiGFnkAX",
          "position": {
            "x": 34,
            "y": 204
          },
          "type": "xod/math/map-clip"
        },
        "By1V_n1AQ": {
          "boundLiterals": {
            "__out__": "950"
          },
          "description": "X Min of Touch Output. (will need to be remaped for Orientation)",
          "id": "By1V_n1AQ",
          "label": "XMinTouch",
          "position": {
            "x": 238,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "H1gFK31RQ": {
          "description": "X Position Mapped to the display.",
          "id": "H1gFK31RQ",
          "label": "XDisplayPoint",
          "position": {
            "x": 34,
            "y": 306
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Hkpi9hJRX": {
          "description": "Y Input from touch detect.",
          "id": "Hkpi9hJRX",
          "label": "Y",
          "position": {
            "x": 68,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "HyftYhkRX": {
          "description": "Y Position Mapped to the display.",
          "id": "HyftYhkRX",
          "label": "YDisplayPoint",
          "position": {
            "x": 238,
            "y": 306
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SycjD3kCX": {
          "boundLiterals": {
            "__out__": "240"
          },
          "description": "Display Max Pixels in Y dir",
          "id": "SycjD3kCX",
          "label": "YDisplay",
          "position": {
            "x": 170,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SyxjMF2J0X": {
          "boundLiterals": {
            "B1rSeJlnZ": "100",
            "HkFBgJehW": "240",
            "SJbSlJxh-": "900"
          },
          "id": "SyxjMF2J0X",
          "position": {
            "x": 238,
            "y": 204
          },
          "type": "xod/math/map-clip"
        },
        "rJpHO3yCm": {
          "boundLiterals": {
            "__out__": "900"
          },
          "description": "Y Min of Touch Output. (will need to be remaped for Orientation)",
          "id": "rJpHO3yCm",
          "label": "YMinTouch",
          "position": {
            "x": 272,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ryXiP2J0Q": {
          "boundLiterals": {
            "__out__": "320"
          },
          "description": "Display Max Pixels in X dir",
          "id": "ryXiP2J0Q",
          "label": "XDisplay",
          "position": {
            "x": 136,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/touch-map-to-display"
    },
    "@/touch-screen": {
      "attachments": [
        {
          "content": "// Tell XOD where it could download the library:\n#pragma XOD require \"https://github.com/adafruit/Adafruit_TouchScreen\"\n\n{{#global}}\n#include <stdint.h>\n#include \"TouchScreen.h\"\n{{/global}}\n\nstruct State {\n        uint8_t mem[sizeof(TouchScreen)];\n};\n\n\n{{ GENERATED_CODE }}\nusing Type = TouchScreen*;\nType ts = new TouchScreen(9, A2, A3, 8, 300); //TouchScreen(XP, YP, XM, YM, 300)\nTSPoint tp;\nvoid evaluate(Context ctx) {\n    if (!isInputDirty<input_INIT>(ctx)){\n        return;}\n\n    auto XP = getValue<input_XP>(ctx);\n    auto YP = getValue<input_YP>(ctx);\n    auto XM = getValue<input_XM>(ctx);\n    auto YM = getValue<input_YM>(ctx);\n    auto RES = getValue<input_RES>(ctx);\n\n    if (isSettingUp()){\n        auto state = getState(ctx);\n        Type ts = new (state->mem) TouchScreen(XP, YP, XM, YM, RES);}\n\n\n\n    tp = ts->getPoint();\n    pinMode(A2, OUTPUT);//XM\n    pinMode(A3, OUTPUT);//YP\n\n    emitValue<output_XTouch>(ctx, tp.x);\n    emitValue<output_YTouch>(ctx, tp.y);\n    emitValue<output_TouchPressure>(ctx, tp.z);\n    if (tp.z){\n    emitValue<output_Touch>(ctx, 1);\n    }\n\n}\n",
          "encoding": "utf-8",
          "filename": "patch.cpp"
        }
      ],
      "nodes": {
        "BJEHGV10m": {
          "id": "BJEHGV10m",
          "label": "XTouch",
          "position": {
            "x": 34,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Bk98ME1Am": {
          "id": "Bk98ME1Am",
          "label": "TouchPressure",
          "position": {
            "x": 170,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BkMVG41R7": {
          "boundLiterals": {
            "__out__": "A2"
          },
          "description": "YP Pin",
          "id": "BkMVG41R7",
          "label": "YP",
          "position": {
            "x": 68,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "By2oO91R7": {
          "boundLiterals": {
            "__out__": "300"
          },
          "id": "By2oO91R7",
          "label": "RES",
          "position": {
            "x": 272,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        },
        "H1bf4ME1CQ": {
          "boundLiterals": {
            "__out__": "A3"
          },
          "description": "XM Pin",
          "id": "H1bf4ME1CQ",
          "label": "XM",
          "position": {
            "x": 136,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HJVMNMVkAQ": {
          "id": "HJVMNMVkAQ",
          "position": {
            "x": 102,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "HJ_xXNyAm": {
          "description": "Touch Detected",
          "id": "HJ_xXNyAm",
          "label": "Touch",
          "position": {
            "x": 238,
            "y": 204
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SJa7x51AX": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "id": "SJa7x51AX",
          "label": "INIT",
          "position": {
            "x": 340,
            "y": 0
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rJMfNzNkAm": {
          "boundLiterals": {
            "__out__": "D8"
          },
          "description": "YM Pin",
          "id": "rJMfNzNkAm",
          "label": "YM",
          "position": {
            "x": 204,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "rJQGEzEkCm": {
          "boundLiterals": {
            "__out__": "D9"
          },
          "description": "XP Pin",
          "id": "rJQGEzEkCm",
          "label": "XP",
          "position": {
            "x": 0,
            "y": 0
          },
          "type": "xod/patch-nodes/input-port"
        },
        "ryeLGEkRX": {
          "id": "ryeLGEkRX",
          "label": "YTouch",
          "position": {
            "x": 102,
            "y": 204
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/touch-screen"
    },
    "@/touch-device": {
      "attachments": [
        {
          "content": "// Tell XOD where it could download the library:\n#pragma XOD require \"https://github.com/adafruit/Adafruit_TouchScreen\"\n\n{{#global}}\n#include <stdint.h>\n#include \"TouchScreen.h\"\n{{/global}}\n\nstruct State {\n    uint8_t mem[sizeof(TouchScreen)];\n};\n\nusing Type = TouchScreen*;\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // It should be evaluated only once on the first (setup) transaction\n    if (!isSettingUp())\n        return;\n\n    auto state = getState(ctx);\n    // Create a new object in the memory area reserved previously.\n    Type ts = new (state->mem) TouchScreen(getValue<input_XP>(ctx), getValue<input_YP>(ctx), getValue<input_XM>(ctx), getValue<input_YM>(ctx), getValue<input_ResistanceValue>(ctx));\n    emitValue<output_DEV>(ctx, ts);\n}\n",
          "encoding": "utf-8",
          "filename": "patch.cpp"
        }
      ],
      "description": "Touch Device.\nThese are the pins for some typical shields!\nS6D0154: YP=A1, XM=A2, YM=7, XP=6\nST7783 : YP=A2, XM=A1, YM=6, XP=7\nILI9320: YP=A2, XM=A3, YM=8, XP=9\nILI9325: YP=A1, XM=A2, YM=7, XP=6\nILI9325BG: YP=A2, XM=A1, YM=6, XP=7\nILI9341: YP=A2, XM=A1, YM=7, XP=6\nILI9488: YP=A1, XM=A2, YM=7, XP=6\nR65109V: YP=A2, XM=A1, YM=6, XP=7",
      "nodes": {
        "B1ElwUsJA7": {
          "id": "B1ElwUsJA7",
          "position": {
            "x": 67,
            "y": 101
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "BJxewIjy0Q": {
          "id": "BJxewIjy0Q",
          "label": "DEV",
          "position": {
            "x": 67,
            "y": 203
          },
          "type": "xod/patch-nodes/output-self"
        },
        "HkXewIoJ07": {
          "boundLiterals": {
            "__out__": "D9"
          },
          "description": "XP Pin",
          "id": "HkXewIoJ07",
          "label": "XP",
          "position": {
            "x": 101,
            "y": -1
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HygvUsJCm": {
          "boundLiterals": {
            "__out__": "A2"
          },
          "description": "YP Pin",
          "id": "HygvUsJCm",
          "label": "YP",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "xod/patch-nodes/input-port"
        },
        "S1blPIsy07": {
          "boundLiterals": {
            "__out__": "A3"
          },
          "description": "XM Pin",
          "id": "S1blPIsy07",
          "label": "XM",
          "position": {
            "x": 33,
            "y": -1
          },
          "type": "xod/patch-nodes/input-port"
        },
        "S1zlvIsy0m": {
          "boundLiterals": {
            "__out__": "D8"
          },
          "description": "YM Pin",
          "id": "S1zlvIsy0m",
          "label": "YM",
          "position": {
            "x": 67,
            "y": -1
          },
          "type": "xod/patch-nodes/input-port"
        },
        "SkgPea1RQ": {
          "boundLiterals": {
            "__out__": "300"
          },
          "description": "For better pressure precision, we need to know the resistance\nbetween X+ and X- Use any multimeter to read it\nFor the one i am using, its 300 ohms across the X plate",
          "id": "SkgPea1RQ",
          "label": "ResistanceValue",
          "position": {
            "x": 170,
            "y": 0
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/touch-device"
    }
  },
  "version": "0.1.2"
}
