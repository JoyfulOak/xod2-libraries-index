{
  "description": "Adafruit MPRLS Ported Pressure Sensor Breakout - 0 to 25 PSI",
  "name": "mprls",
  "patches": {
    "@/00-readme": {
      "comments": {
        "H1LH8F9hN": {
          "content": "EOC_pin Optional End-of-Convert indication.",
          "id": "H1LH8F9hN",
          "position": {
            "x": -1,
            "y": 4,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 3,
            "units": "slots"
          }
        },
        "HknGIKq24": {
          "content": "Get read in loop, set time for Tr",
          "id": "HknGIKq24",
          "position": {
            "x": 6,
            "y": 1,
            "units": "slots"
          },
          "size": {
            "height": 2,
            "width": 3,
            "units": "slots"
          }
        },
        "SkfWBY924": {
          "content": "You can easily attach a tube to it, to measure air pressure inside a close space.\n\nThis one uses I2C, it's really easy to use with any microcontroller. Inside is a silicone-gel covered pressure sensing gauge with a pre-calibrated and compensated 24 bit ADC.\n\nYou can measure absolute pressure 0 to 25 PSI, which is a great range since ambient pressure here on Earth is about 14.5 PSI.\n\nThe port is made of stainless steel and is 3.7mm long and 2.5mm diameter.\n\nBoard with 3.3V power regulation and level shifting so you can use it with any kind of microcontroller.",
          "id": "SkfWBY924",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "height": 4,
            "width": 8,
            "units": "slots"
          }
        },
        "r1MOrtc3E": {
          "content": "Pines RST y EOC, disable 256",
          "id": "r1MOrtc3E",
          "position": {
            "x": -2,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 3,
            "units": "slots"
          }
        },
        "rky0HF534": {
          "content": "Min y Max read Psi",
          "id": "rky0HF534",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          }
        },
        "ryWx8Yq3E": {
          "content": "Tr = pulse timed for read",
          "id": "ryWx8Yq3E",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          }
        }
      },
      "links": {
        "H1RuXPq2E": {
          "id": "H1RuXPq2E",
          "input": {
            "nodeId": "rkKOXP9nV",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "Hy4EXP93V",
            "pinKey": "r1Qrzw53N"
          }
        },
        "HJzq7PcnE": {
          "id": "HJzq7PcnE",
          "input": {
            "nodeId": "HJqYXwchN",
            "pinKey": "Bkh8A_Sv1-"
          },
          "output": {
            "nodeId": "Hy4EXP93V",
            "pinKey": "B1MQBzDc34"
          }
        },
        "S1ZMnYu92N": {
          "id": "S1ZMnYu92N",
          "input": {
            "nodeId": "SJgMhYO52E",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SkM2Ku9n4",
            "pinKey": "HkyxURuSPyW"
          }
        },
        "S1lqQD5n4": {
          "id": "S1lqQD5n4",
          "input": {
            "nodeId": "rJSYmw5nV",
            "pinKey": "Bkh8A_Sv1-"
          },
          "output": {
            "nodeId": "Hy4EXP93V",
            "pinKey": "BkW7rMD5n4"
          }
        },
        "SyIsmwc2N": {
          "id": "SyIsmwc2N",
          "input": {
            "nodeId": "rygR5mvc24",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HJqYXwchN",
            "pinKey": "HkyxURuSPyW"
          }
        },
        "rJKhYuqhV": {
          "id": "rJKhYuqhV",
          "input": {
            "nodeId": "SkM2Ku9n4",
            "pinKey": "Bkh8A_Sv1-"
          },
          "output": {
            "nodeId": "Hy4EXP93V",
            "pinKey": "ry8dYd934"
          }
        },
        "rJOimv5nE": {
          "id": "rJOimv5nE",
          "input": {
            "nodeId": "H1R5Qvq3N",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJSYmw5nV",
            "pinKey": "HkyxURuSPyW"
          }
        },
        "rkjumPchE": {
          "id": "rkjumPchE",
          "input": {
            "nodeId": "r1UO7Dcn4",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "Hy4EXP93V",
            "pinKey": "HylmHGD9nN"
          }
        }
      },
      "nodes": {
        "H1R5Qvq3N": {
          "id": "H1R5Qvq3N",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HJqYXwchN": {
          "id": "HJqYXwchN",
          "label": "ERROR",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/flip-flop"
        },
        "Hy4EXP93V": {
          "boundLiterals": {
            "H1esXfvc34": "D256",
            "SyomGDc3N": "D256"
          },
          "id": "Hy4EXP93V",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "@/mprls-sensor"
        },
        "SJgMhYO52E": {
          "id": "SJgMhYO52E",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SkM2Ku9n4": {
          "id": "SkM2Ku9n4",
          "label": "DONE",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/flip-flop"
        },
        "r1UO7Dcn4": {
          "id": "r1UO7Dcn4",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rJSYmw5nV": {
          "id": "rJSYmw5nV",
          "label": "EOC'",
          "position": {
            "x": 2,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/core/flip-flop"
        },
        "rkKOXP9nV": {
          "id": "rkKOXP9nV",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rygR5mvc24": {
          "id": "rygR5mvc24",
          "position": {
            "x": 7,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "path": "@/00-readme"
    },
    "@/mprls": {
      "attachments": [
        {
          "content": "#pragma XOD require \"https://github.com/Adafruit/Adafruit_MPRLS\"\n\n#include <Wire.h>\n#include <Adafruit_MPRLS.h>\n\nnode {\n\n    static_assert(isValidDigitalPort(constant_input_RST), \"must be a valid digital port\");\n    static_assert(isValidDigitalPort(constant_input_EOC), \"must be a valid digital port\");\n\n    meta {\n        using Type = Adafruit_MPRLS*;\n    }\n\n    uint8_t mem[sizeof(Adafruit_MPRLS)];\n\n    void evaluate(Context ctx) {\n        if (isSettingUp()){\n        uint8_t PSI_min = getValue<input_PSI_min>(ctx);\n        uint8_t PSI_max = getValue<input_PSI_max>(ctx);\n        Type mprls = new (mem) Adafruit_MPRLS(constant_input_RST, constant_input_EOC, PSI_min, PSI_max);\n\n            mprls->begin();\n            auto _reset = constant_input_RST;\n            if (_reset != 255) {\n                ::pinMode(_reset, OUTPUT);\n                ::digitalWrite(_reset, HIGH);\n                ::digitalWrite(_reset, LOW);\n                delay(10);\n                ::digitalWrite(_reset, HIGH);\n            }\n            return;\n        }\n\n        if (!isInputDirty<input_Get>(ctx)) return;\n\n        auto mprls = reinterpret_cast<Adafruit_MPRLS*>(mem);\n\n        if (!mprls->begin()) {emitValue<output_Error>(ctx, 1); return;}\n\n        auto _eoc = constant_input_EOC;\n\n        if (_eoc != 255) {pinMode(_eoc, INPUT);}\n\n        float pressure = mprls->readPressure();\n\n        if (_eoc != 255) {while (!digitalRead(_eoc)) {delay(10);} emitValue<output_EOC_Done>(ctx,1);}\n\n        emitValue<output_hPa>(ctx,pressure);\n        emitValue<output_Psi>(ctx,pressure / 68.947572932);\n        emitValue<output_Done>(ctx, 1);\n    }\n}\n",
          "encoding": "utf8",
          "filename": "patch.cpp"
        }
      ],
      "nodes": {
        "BJxqKTI93V": {
          "id": "BJxqKTI93V",
          "label": "hPa",
          "position": {
            "x": -1,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Bk9WKU5h4": {
          "boundLiterals": {
            "__out__": "D255"
          },
          "description": "D255 = no-used",
          "id": "Bk9WKU5h4",
          "label": "RST",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "BkjCkyqhV": {
          "id": "BkjCkyqhV",
          "position": {
            "x": -1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "ByW9t6L52E": {
          "id": "ByW9t6L52E",
          "label": "Done",
          "position": {
            "x": 2,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BylLVw52V": {
          "id": "BylLVw52V",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        },
        "H1u-oD934": {
          "id": "H1u-oD934",
          "label": "PSI_min",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "HkEziw924": {
          "boundLiterals": {
            "__out__": "25"
          },
          "id": "HkEziw924",
          "label": "PSI_max",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "S1Pz0LqhE": {
          "id": "S1Pz0LqhE",
          "label": "Error",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "S1zMCLc3N": {
          "id": "S1zMCLc3N",
          "label": "Get",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SJ5FT85hN": {
          "id": "SJ5FT85hN",
          "label": "Psi",
          "position": {
            "x": 0,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SJQZYu9nV": {
          "id": "SJQZYu9nV",
          "label": "EOC-Done",
          "position": {
            "x": 1,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "ryt1YLq2E": {
          "boundLiterals": {
            "__out__": "D255"
          },
          "description": "D255 = no-used",
          "id": "ryt1YLq2E",
          "label": "EOC",
          "position": {
            "x": -1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        }
      },
      "path": "@/mprls"
    },
    "@/mprls-sensor": {
      "description": "Test of sensor.",
      "links": {
        "BJC8owqnV": {
          "id": "BJC8owqnV",
          "input": {
            "nodeId": "HJV-MPq34",
            "pinKey": "HkEziw924"
          },
          "output": {
            "nodeId": "S1gILoP53E",
            "pinKey": "__out__"
          }
        },
        "H1srfw524": {
          "id": "H1srfw524",
          "input": {
            "nodeId": "r1Qrzw53N",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJV-MPq34",
            "pinKey": "SJ5FT85hN"
          }
        },
        "HJKOK_9nE": {
          "id": "HJKOK_9nE",
          "input": {
            "nodeId": "ry8dYd934",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJV-MPq34",
            "pinKey": "ByW9t6L52E"
          }
        },
        "HJq_F_qh4": {
          "id": "HJq_F_qh4",
          "input": {
            "nodeId": "BkW7rMD5n4",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJV-MPq34",
            "pinKey": "SJQZYu9nV"
          }
        },
        "HyRrfw92V": {
          "id": "HyRrfw92V",
          "input": {
            "nodeId": "B1MQBzDc34",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJV-MPq34",
            "pinKey": "S1Pz0LqhE"
          }
        },
        "S1r4GPq2N": {
          "id": "S1r4GPq2N",
          "input": {
            "nodeId": "HJV-MPq34",
            "pinKey": "Bk9WKU5h4"
          },
          "output": {
            "nodeId": "SyomGDc3N",
            "pinKey": "__out__"
          }
        },
        "SJ9BGw9hN": {
          "id": "SJ9BGw9hN",
          "input": {
            "nodeId": "HylmHGD9nN",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJV-MPq34",
            "pinKey": "BJxqKTI93V"
          }
        },
        "SyFMFvaOI": {
          "id": "SyFMFvaOI",
          "input": {
            "nodeId": "HJV-MPq34",
            "pinKey": "S1zMCLc3N"
          },
          "output": {
            "nodeId": "HJyftwauI",
            "pinKey": "H1H-LLHUr"
          }
        },
        "SyImtwpuU": {
          "id": "SyImtwpuU",
          "input": {
            "nodeId": "HJyftwauI",
            "pinKey": "ByYWULHUr"
          },
          "output": {
            "nodeId": "HJdqMD92V",
            "pinKey": "__out__"
          }
        },
        "SyVfKDpdU": {
          "id": "SyVfKDpdU",
          "input": {
            "nodeId": "HJyftwauI",
            "pinKey": "rkzZUUHLB"
          },
          "output": {
            "nodeId": "B1WoQMw92V",
            "pinKey": "__out__"
          }
        },
        "rJ2UoP93V": {
          "id": "rJ2UoP93V",
          "input": {
            "nodeId": "HJV-MPq34",
            "pinKey": "H1u-oD934"
          },
          "output": {
            "nodeId": "B1LIsD92N",
            "pinKey": "__out__"
          }
        },
        "rymEfw534": {
          "id": "rymEfw534",
          "input": {
            "nodeId": "HJV-MPq34",
            "pinKey": "ryt1YLq2E"
          },
          "output": {
            "nodeId": "H1esXfvc34",
            "pinKey": "__out__"
          }
        }
      },
      "nodes": {
        "B1LIsD92N": {
          "description": "PSI_min The minimum PSI measurement range of the sensor, default 0",
          "id": "B1LIsD92N",
          "label": "PSI_min",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "B1MQBzDc34": {
          "id": "B1MQBzDc34",
          "label": "ERR",
          "position": {
            "x": 8,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "B1WoQMw92V": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Read pulse  timed for Tr",
          "id": "B1WoQMw92V",
          "label": "GET",
          "position": {
            "x": 9,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "BkW7rMD5n4": {
          "description": "Only if pin-EOC is used, if D255 disable EOC",
          "id": "BkW7rMD5n4",
          "label": "EOC-Done",
          "position": {
            "x": 6,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "H1esXfvc34": {
          "boundLiterals": {
            "__out__": "D256"
          },
          "description": "If pin EOC is D256 , is disabled.",
          "id": "H1esXfvc34",
          "label": "EOC",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HJV-MPq34": {
          "id": "HJV-MPq34",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "@/mprls"
        },
        "HJdqMD92V": {
          "boundLiterals": {
            "__out__": "0.5"
          },
          "description": "Time in sec",
          "id": "HJdqMD92V",
          "label": "Tr",
          "position": {
            "x": 8,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "HJyftwauI": {
          "id": "HJyftwauI",
          "position": {
            "x": 8,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/throttle"
        },
        "HylmHGD9nN": {
          "description": "Pressure in  hectopascal.",
          "id": "HylmHGD9nN",
          "label": "hPa",
          "position": {
            "x": 4,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "S1gILoP53E": {
          "boundLiterals": {
            "__out__": "25"
          },
          "description": "PSI_max The maximum PSI measurement range of the sensor, default 25",
          "id": "S1gILoP53E",
          "label": "PSI_max",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SyomGDc3N": {
          "boundLiterals": {
            "__out__": "D256"
          },
          "description": "If pin RST is D256 , is disabled.",
          "id": "SyomGDc3N",
          "label": "RST",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "r1Qrzw53N": {
          "description": "Pressure in Pounds per square inch",
          "id": "r1Qrzw53N",
          "label": "Psi",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "ry8dYd934": {
          "id": "ry8dYd934",
          "label": "DONE",
          "position": {
            "x": 7,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        }
      },
      "path": "@/mprls-sensor"
    }
  },
  "version": "0.0.5"
}
