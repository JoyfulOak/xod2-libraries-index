{
  "patches": {
    "@/example-02": {
      "nodes": {
        "ry1QBtYfn": {
          "id": "ry1QBtYfn",
          "position": {
            "x": 2,
            "y": 4,
            "units": "slots"
          },
          "type": "@/voltage-to-tds"
        },
        "Hk1RW9Fzn": {
          "boundLiterals": {
            "ByfGSDjQE": "25"
          },
          "id": "Hk1RW9Fzn",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "S1VWG5tzh": {
          "boundLiterals": {
            "ByFjk6Gys": "30"
          },
          "id": "S1VWG5tzh",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "wayland/running-median/sample-buffer"
        },
        "SJy8M9Yz2": {
          "boundLiterals": {
            "HygH9nM1j": "5"
          },
          "id": "SJy8M9Yz2",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "wayland/running-median/add"
        },
        "rJXJUzcFz3": {
          "boundLiterals": {
            "SkuhqCqym": "A1"
          },
          "id": "rJXJUzcFz3",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/gpio/analog-read"
        },
        "rJ4y8fqtz3": {
          "boundLiterals": {
            "B13SCNhl-": "0.1"
          },
          "id": "rJ4y8fqtz3",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "rJpMXctMh": {
          "id": "rJpMXctMh",
          "position": {
            "x": 2,
            "y": 3,
            "units": "slots"
          },
          "type": "wayland/running-median/get-median"
        },
        "Byz6M75FMn": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "Byz6M75FMn",
          "position": {
            "x": 2,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "BJu0bqYf2": {
          "id": "BJu0bqYf2",
          "input": {
            "nodeId": "ry1QBtYfn",
            "pinKey": "rJgg_O7Zs"
          },
          "output": {
            "nodeId": "Hk1RW9Fzn",
            "pinKey": "ByfGSDjQE"
          }
        },
        "rJIyLzcKMn": {
          "id": "rJIyLzcKMn",
          "input": {
            "nodeId": "SJy8M9Yz2",
            "pinKey": "HygH9nM1j"
          },
          "output": {
            "nodeId": "rJXJUzcFz3",
            "pinKey": "SyBtREhlW"
          }
        },
        "BywJLz5KM2": {
          "id": "BywJLz5KM2",
          "input": {
            "nodeId": "SJy8M9Yz2",
            "pinKey": "HJvYchMki"
          },
          "output": {
            "nodeId": "rJXJUzcFz3",
            "pinKey": "BkGpcpcJQ"
          }
        },
        "SyOJIMqYz3": {
          "id": "SyOJIMqYz3",
          "input": {
            "nodeId": "rJXJUzcFz3",
            "pinKey": "SyKd0E2x-"
          },
          "output": {
            "nodeId": "rJ4y8fqtz3",
            "pinKey": "HJU8CE2lW"
          }
        },
        "SJ1BQqYMn": {
          "id": "SJ1BQqYMn",
          "input": {
            "nodeId": "ry1QBtYfn",
            "pinKey": "S1oY8dmZs"
          },
          "output": {
            "nodeId": "rJpMXctMh",
            "pinKey": "HyQ9TDc7Jj"
          }
        },
        "SynHXqYMh": {
          "id": "SynHXqYMh",
          "input": {
            "nodeId": "Byz6M75FMn",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "ry1QBtYfn",
            "pinKey": "Ska5IdmZs"
          }
        },
        "ByTLX9tGn": {
          "id": "ByTLX9tGn",
          "input": {
            "nodeId": "rJpMXctMh",
            "pinKey": "HyZqTP97ki"
          },
          "output": {
            "nodeId": "SJy8M9Yz2",
            "pinKey": "BJe3c2fyj"
          }
        },
        "ryqF79YG3": {
          "id": "ryqF79YG3",
          "input": {
            "nodeId": "SJy8M9Yz2",
            "pinKey": "BySNq2f1i"
          },
          "output": {
            "nodeId": "S1VWG5tzh",
            "pinKey": "rJgJPnGko"
          }
        },
        "SJpFQcYfn": {
          "id": "SJpFQcYfn",
          "input": {
            "nodeId": "rJpMXctMh",
            "pinKey": "HylcavqQJo"
          },
          "output": {
            "nodeId": "S1VWG5tzh",
            "pinKey": "rJgJPnGko"
          }
        }
      },
      "comments": {
        "S1Neoe9fh": {
          "id": "S1Neoe9fh",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Enter water temperature  (degrees celsius) in this tweak node."
        }
      },
      "path": "@/example-02",
      "description": "Patch to demonstrate use of running median to smooth analog signal from sensor. Run in debug mode."
    },
    "@/example-03": {
      "nodes": {
        "B1HQr3YM3": {
          "id": "B1HQr3YM3",
          "position": {
            "x": 0,
            "y": 4,
            "units": "slots"
          },
          "type": "@/voltage-to-tds"
        },
        "SybS7rhtM2": {
          "boundLiterals": {
            "ByFjk6Gys": "30"
          },
          "id": "SybS7rhtM2",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "wayland/running-median/sample-buffer"
        },
        "HkGr7H3Yzn": {
          "boundLiterals": {
            "HygH9nM1j": "5"
          },
          "id": "HkGr7H3Yzn",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "wayland/running-median/add"
        },
        "SymrXrhFMn": {
          "boundLiterals": {
            "SkuhqCqym": "A1"
          },
          "id": "SymrXrhFMn",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/gpio/analog-read"
        },
        "HJEr7S2tM3": {
          "boundLiterals": {
            "B13SCNhl-": "0.1"
          },
          "id": "HJEr7S2tM3",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "ryrB7HhFzn": {
          "id": "ryrB7HhFzn",
          "position": {
            "x": 0,
            "y": 3,
            "units": "slots"
          },
          "type": "wayland/running-median/get-median"
        },
        "HJIBXH2Yf3": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "HJIBXH2Yf3",
          "position": {
            "x": 0,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJuEHhtM3": {
          "boundLiterals": {
            "B1VSPLfEG": "D3"
          },
          "id": "SJuEHhtM3",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/common-hardware/ds18b20-thermometer"
        },
        "SJqvS2tf3": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "SJqvS2tf3",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "Skdr7H3Ffn": {
          "id": "Skdr7H3Ffn",
          "input": {
            "nodeId": "HkGr7H3Yzn",
            "pinKey": "HygH9nM1j"
          },
          "output": {
            "nodeId": "SymrXrhFMn",
            "pinKey": "SyBtREhlW"
          }
        },
        "H1FHQS2Ffh": {
          "id": "H1FHQS2Ffh",
          "input": {
            "nodeId": "HkGr7H3Yzn",
            "pinKey": "HJvYchMki"
          },
          "output": {
            "nodeId": "SymrXrhFMn",
            "pinKey": "BkGpcpcJQ"
          }
        },
        "HJ5HmH2tM2": {
          "id": "HJ5HmH2tM2",
          "input": {
            "nodeId": "SymrXrhFMn",
            "pinKey": "SyKd0E2x-"
          },
          "output": {
            "nodeId": "HJEr7S2tM3",
            "pinKey": "HJU8CE2lW"
          }
        },
        "r1jrXBnFfh": {
          "id": "r1jrXBnFfh",
          "input": {
            "nodeId": "B1HQr3YM3",
            "pinKey": "S1oY8dmZs"
          },
          "output": {
            "nodeId": "ryrB7HhFzn",
            "pinKey": "HyQ9TDc7Jj"
          }
        },
        "B12HXS3tGh": {
          "id": "B12HXS3tGh",
          "input": {
            "nodeId": "HJIBXH2Yf3",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B1HQr3YM3",
            "pinKey": "Ska5IdmZs"
          }
        },
        "Sy6S7SnFMn": {
          "id": "Sy6S7SnFMn",
          "input": {
            "nodeId": "ryrB7HhFzn",
            "pinKey": "HyZqTP97ki"
          },
          "output": {
            "nodeId": "HkGr7H3Yzn",
            "pinKey": "BJe3c2fyj"
          }
        },
        "Bk0BQSnKMh": {
          "id": "Bk0BQSnKMh",
          "input": {
            "nodeId": "HkGr7H3Yzn",
            "pinKey": "BySNq2f1i"
          },
          "output": {
            "nodeId": "SybS7rhtM2",
            "pinKey": "rJgJPnGko"
          }
        },
        "SJyxrXHhtz2": {
          "id": "SJyxrXHhtz2",
          "input": {
            "nodeId": "ryrB7HhFzn",
            "pinKey": "HylcavqQJo"
          },
          "output": {
            "nodeId": "SybS7rhtM2",
            "pinKey": "rJgJPnGko"
          }
        },
        "SJ_HBhYz2": {
          "id": "SJ_HBhYz2",
          "input": {
            "nodeId": "SJuEHhtM3",
            "pinKey": "SJlIvIMEM"
          },
          "output": {
            "nodeId": "HJEr7S2tM3",
            "pinKey": "HJU8CE2lW"
          }
        },
        "r11DShtGh": {
          "id": "r11DShtGh",
          "input": {
            "nodeId": "B1HQr3YM3",
            "pinKey": "rJgg_O7Zs"
          },
          "output": {
            "nodeId": "SJuEHhtM3",
            "pinKey": "BJkDP8GEM"
          }
        },
        "SJH_B3YG2": {
          "id": "SJH_B3YG2",
          "input": {
            "nodeId": "SJqvS2tf3",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJuEHhtM3",
            "pinKey": "BJkDP8GEM"
          }
        }
      },
      "path": "@/example-03",
      "description": "Patch demonstrating the use of a thermometer (ds18b20) to report water temperature. Run in debug mode."
    },
    "@/voltage-to-tds": {
      "nodes": {
        "BkxtUd7Zj": {
          "id": "BkxtUd7Zj",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "S1oY8dmZs": {
          "description": "Analog signal from TDS sensor.",
          "label": "Analog",
          "id": "S1oY8dmZs",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "Ska5IdmZs": {
          "description": "Total dissolved solids (ppm).",
          "label": "TDS",
          "id": "Ska5IdmZs",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJgg_O7Zs": {
          "description": "Temperature in degrees celsius.",
          "label": "TempC",
          "id": "rJgg_O7Zs",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "BkbOOuX-s": {
          "boundLiterals": {
            "__out__": "5"
          },
          "description": "Reference voltage. For the Arduino Uno/Mega the reference voltage is 5. For ESP32 the reference voltage is 3.3V.",
          "label": "V-Ref",
          "id": "BkbOOuX-s",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/voltage-to-tds",
      "description": "Convert voltage measured by sensor to total dissolved solids (ppm).",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "//Based on http://www.cqrobot.wiki/index.php/TDS_(Total_Dissolved_Solids)_Meter_Sensor_SKU:_CQRSENTDS01\n\n#pragma XOD dirtieness disable\n\nnode {\n\n    void evaluate(Context ctx) {\n        auto analog = getValue<input_Analog>(ctx);\n        auto refV = getValue<input_V_Ref>(ctx);\n        float voltage = analog*refV;\n        auto tempC = getValue<input_TempC>(ctx);\n        float compensationCoefficient = 1.0 + 0.02 * (tempC-25.0);\n        float compensationVoltage = voltage/compensationCoefficient;\n        Number tds = (133.42 * compensationVoltage * compensationVoltage * compensationVoltage - 255.86 * compensationVoltage * compensationVoltage + 857.39 * compensationVoltage) * 0.5;\n        emitValue<output_TDS>(ctx, tds);\n    }\n}\n"
        }
      ]
    },
    "@/example-01": {
      "nodes": {
        "SJkJk3tz2": {
          "id": "SJkJk3tz2",
          "position": {
            "x": 0,
            "y": 4,
            "units": "slots"
          },
          "type": "@/voltage-to-tds"
        },
        "H1e11kntf3": {
          "boundLiterals": {
            "ByfGSDjQE": "25"
          },
          "id": "H1e11kntf3",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "BJQJyJ3tf3": {
          "boundLiterals": {
            "SkuhqCqym": "A1"
          },
          "id": "BJQJyJ3tf3",
          "position": {
            "x": 0,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/gpio/analog-read"
        },
        "BkVkkk2KM3": {
          "boundLiterals": {
            "B13SCNhl-": "0.1"
          },
          "id": "BkVkkk2KM3",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "Sk8yykhYGh": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "Sk8yykhYGh",
          "position": {
            "x": 0,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "HJvkky3KG2": {
          "id": "HJvkky3KG2",
          "input": {
            "nodeId": "SJkJk3tz2",
            "pinKey": "rJgg_O7Zs"
          },
          "output": {
            "nodeId": "H1e11kntf3",
            "pinKey": "ByfGSDjQE"
          }
        },
        "ry5k1ynYM2": {
          "id": "ry5k1ynYM2",
          "input": {
            "nodeId": "BJQJyJ3tf3",
            "pinKey": "SyKd0E2x-"
          },
          "output": {
            "nodeId": "BkVkkk2KM3",
            "pinKey": "HJU8CE2lW"
          }
        },
        "SJny1yhYfn": {
          "id": "SJny1yhYfn",
          "input": {
            "nodeId": "Sk8yykhYGh",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJkJk3tz2",
            "pinKey": "Ska5IdmZs"
          }
        },
        "SkfGJnKzn": {
          "id": "SkfGJnKzn",
          "input": {
            "nodeId": "SJkJk3tz2",
            "pinKey": "S1oY8dmZs"
          },
          "output": {
            "nodeId": "BJQJyJ3tf3",
            "pinKey": "SyBtREhlW"
          }
        }
      },
      "comments": {
        "HyKwceqfn": {
          "id": "HyKwceqfn",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Enter water temperature  (degrees celsius) in this tweak node."
        }
      },
      "path": "@/example-01",
      "description": "Simple example patch. Run in debug mode."
    }
  },
  "license": "AGPL",
  "version": "0.0.1",
  "description": "Library for Total Dissolved Solids (TDS) sensor with temperature compensation. A TDS sensor can be used to measure water quality.  Compatible devices include https://www.dfrobot.com/product-1662.html and http://www.cqrobot.wiki/index.php/TDS_(Total_Dissolved_Solids)_Meter_Sensor_SKU:_CQRSENTDS01",
  "name": "total-dissolved-solids"
}
