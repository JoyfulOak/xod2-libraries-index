{
  "patches": {
    "@/01-example": {
      "nodes": {
        "B172tShSA": {
          "id": "B172tShSA",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "@/simple-scd4x-sensor"
        },
        "HkOhtrhBA": {
          "boundLiterals": {
            "B13SCNhl-": "1"
          },
          "id": "HkOhtrhBA",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "rJxRtBhSA": {
          "id": "rJxRtBhSA",
          "position": {
            "x": 4,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rJVRYB3H0": {
          "id": "rJVRYB3H0",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rkhERtrnH0": {
          "id": "rkhERtrnH0",
          "position": {
            "x": 6,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SkS0FBhHR": {
          "id": "SkS0FBhHR",
          "position": {
            "x": 8,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HyvyqrhB0": {
          "id": "HyvyqrhB0",
          "position": {
            "x": 8,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/core/count"
        }
      },
      "links": {
        "By3nKHhrA": {
          "id": "By3nKHhrA",
          "input": {
            "nodeId": "B172tShSA",
            "pinKey": "By8rtS3S0"
          },
          "output": {
            "nodeId": "HkOhtrhBA",
            "pinKey": "HJU8CE2lW"
          }
        },
        "HJu0tr2HR": {
          "id": "HJu0tr2HR",
          "input": {
            "nodeId": "rJxRtBhSA",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B172tShSA",
            "pinKey": "rkNK_r2SR"
          }
        },
        "B1tAKB3S0": {
          "id": "B1tAKB3S0",
          "input": {
            "nodeId": "rJVRYB3H0",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B172tShSA",
            "pinKey": "Hyz9dS3BC"
          }
        },
        "Hk3F0Yr3BC": {
          "id": "Hk3F0Yr3BC",
          "input": {
            "nodeId": "rkhERtrnH0",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B172tShSA",
            "pinKey": "HJCM5_H3HC"
          }
        },
        "H1s1cr2BA": {
          "id": "H1s1cr2BA",
          "input": {
            "nodeId": "HyvyqrhB0",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "B172tShSA",
            "pinKey": "Byo6_H2SC"
          }
        },
        "rkxeqShSA": {
          "id": "rkxeqShSA",
          "input": {
            "nodeId": "SkS0FBhHR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyvyqrhB0",
            "pinKey": "r1yhZRd8W"
          }
        }
      },
      "path": "@/01-example",
      "description": "Patch to test simple-scd4x-sensor node. Run in debugger."
    },
    "@/02-example": {
      "nodes": {
        "Hyd-7H2rR": {
          "id": "Hyd-7H2rR",
          "position": {
            "x": 7,
            "y": -1,
            "units": "slots"
          },
          "type": "@/scd4x-device"
        },
        "HkpZmBhSR": {
          "id": "HkpZmBhSR",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "@/init"
        },
        "rk7z7r3SA": {
          "id": "rk7z7r3SA",
          "position": {
            "x": 12,
            "y": 0,
            "units": "slots"
          },
          "type": "@/is-data-ready"
        },
        "HkqfQShrR": {
          "id": "HkqfQShrR",
          "position": {
            "x": 10,
            "y": 2,
            "units": "slots"
          },
          "type": "@/read-measurement"
        },
        "S1RGmH3BR": {
          "id": "S1RGmH3BR",
          "position": {
            "x": 10,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HkCQmr3BR": {
          "id": "HkCQmr3BR",
          "position": {
            "x": 11,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rknR7QHhr0": {
          "id": "rknR7QHhr0",
          "position": {
            "x": 12,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rJIEXr3S0": {
          "id": "rJIEXr3S0",
          "position": {
            "x": 14,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "ByjEXBnHR": {
          "id": "ByjEXBnHR",
          "position": {
            "x": 14,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "B1DLmHhB0": {
          "id": "B1DLmHhB0",
          "position": {
            "x": 11,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/core/gate"
        },
        "SJrDQSnrC": {
          "id": "SJrDQSnrC",
          "position": {
            "x": 13,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "HJjd7B3SA": {
          "id": "HJjd7B3SA",
          "position": {
            "x": 13,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HyrHLB3SC": {
          "id": "HyrHLB3SC",
          "position": {
            "x": 19,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "SkxBHIShrR": {
          "id": "SkxBHIShrR",
          "position": {
            "x": 19,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rJTpIB3BR": {
          "id": "rJTpIB3BR",
          "position": {
            "x": 6,
            "y": 1,
            "units": "slots"
          },
          "type": "@/start-measurement"
        },
        "SkV0IBnHC": {
          "label": "DEV",
          "id": "SkV0IBnHC",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/to-bus"
        },
        "HJhgwBhBA": {
          "label": "DEV",
          "id": "HJhgwBhBA",
          "position": {
            "x": 12,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/from-bus"
        },
        "HkagPrnSC": {
          "label": "DEV",
          "id": "HkagPrnSC",
          "position": {
            "x": 10,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/from-bus"
        },
        "SkfeyFpBA": {
          "id": "SkfeyFpBA",
          "type": "xod/core/flip-flop",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          }
        },
        "HkalyYTSR": {
          "id": "HkalyYTSR",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "label": "init"
        },
        "Sya-1FaB0": {
          "id": "Sya-1FaB0",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 13,
            "y": -2,
            "units": "slots"
          },
          "label": "init"
        }
      },
      "links": {
        "Hk1zXB2rR": {
          "id": "Hk1zXB2rR",
          "input": {
            "nodeId": "HkpZmBhSR",
            "pinKey": "B1bDa6a4C"
          },
          "output": {
            "nodeId": "Hyd-7H2rR",
            "pinKey": "Hkce6paVA"
          }
        },
        "HyxEQSnBA": {
          "id": "HyxEQSnBA",
          "input": {
            "nodeId": "S1RGmH3BR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HkqfQShrR",
            "pinKey": "ByWO-B3BR"
          }
        },
        "ryZ4Qr3SR": {
          "id": "ryZ4Qr3SR",
          "input": {
            "nodeId": "HkCQmr3BR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HkqfQShrR",
            "pinKey": "By4_ZBnH0"
          }
        },
        "HyMNQShB0": {
          "id": "HyMNQShB0",
          "input": {
            "nodeId": "rknR7QHhr0",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HkqfQShrR",
            "pinKey": "Hk3V_bShrA"
          }
        },
        "HJCVXH3SA": {
          "id": "HJCVXH3SA",
          "input": {
            "nodeId": "ByjEXBnHR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJIEXr3S0",
            "pinKey": "r1yhZRd8W"
          }
        },
        "S1xSQSnBR": {
          "id": "S1xSQSnBR",
          "input": {
            "nodeId": "rJIEXr3S0",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HkqfQShrR",
            "pinKey": "ryeY5iE2BA"
          }
        },
        "H1kvXH2B0": {
          "id": "H1kvXH2B0",
          "input": {
            "nodeId": "B1DLmHhB0",
            "pinKey": "B1P1nFwaM"
          },
          "output": {
            "nodeId": "rk7z7r3SA",
            "pinKey": "B1QGF43S0"
          }
        },
        "BkEO7rhrA": {
          "id": "BkEO7rhrA",
          "input": {
            "nodeId": "rk7z7r3SA",
            "pinKey": "B1-KbYEnSA"
          },
          "output": {
            "nodeId": "SJrDQSnrC",
            "pinKey": "HJU8CE2lW"
          }
        },
        "B1ltmrhrC": {
          "id": "B1ltmrhrC",
          "input": {
            "nodeId": "HJjd7B3SA",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rk7z7r3SA",
            "pinKey": "B1QGF43S0"
          }
        },
        "HkTY7BhrC": {
          "id": "HkTY7BhrC",
          "input": {
            "nodeId": "B1DLmHhB0",
            "pinKey": "SJ-1mZPTz"
          },
          "output": {
            "nodeId": "rk7z7r3SA",
            "pinKey": "BygYZF4nSC"
          }
        },
        "Bkgq7H2HR": {
          "id": "Bkgq7H2HR",
          "input": {
            "nodeId": "HkqfQShrR",
            "pinKey": "SybK9iN2rR"
          },
          "output": {
            "nodeId": "B1DLmHhB0",
            "pinKey": "OkPg7GDaW"
          }
        },
        "BkZSrLHhr0": {
          "id": "BkZSrLHhr0",
          "input": {
            "nodeId": "SkxBHIShrR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyrHLB3SC",
            "pinKey": "r1yhZRd8W"
          }
        },
        "SycBLrhHA": {
          "id": "SycBLrhHA",
          "input": {
            "nodeId": "HyrHLB3SC",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "SJrDQSnrC",
            "pinKey": "HJU8CE2lW"
          }
        },
        "HybJDS3BA": {
          "id": "HybJDS3BA",
          "input": {
            "nodeId": "SkV0IBnHC",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "Hyd-7H2rR",
            "pinKey": "Hkce6paVA"
          }
        },
        "S1CZvB3B0": {
          "id": "S1CZvB3B0",
          "input": {
            "nodeId": "HkqfQShrR",
            "pinKey": "HJzt9oNhr0"
          },
          "output": {
            "nodeId": "HkagPrnSC",
            "pinKey": "__out__"
          }
        },
        "HkjQwB2BC": {
          "id": "HkjQwB2BC",
          "input": {
            "nodeId": "rk7z7r3SA",
            "pinKey": "r1ftZKNhBA"
          },
          "output": {
            "nodeId": "HJhgwBhBA",
            "pinKey": "__out__"
          }
        },
        "rkZ4DShHA": {
          "id": "rkZ4DShHA",
          "input": {
            "nodeId": "rJTpIB3BR",
            "pinKey": "rJZCnDVhSR"
          },
          "output": {
            "nodeId": "HkpZmBhSR",
            "pinKey": "SJ8up66EA"
          }
        },
        "rJF4DrhSA": {
          "id": "rJF4DrhSA",
          "input": {
            "nodeId": "rJTpIB3BR",
            "pinKey": "r1fChvV2BC"
          },
          "output": {
            "nodeId": "Hyd-7H2rR",
            "pinKey": "Hkce6paVA"
          }
        },
        "B1Sl1KTHA": {
          "id": "B1Sl1KTHA",
          "output": {
            "nodeId": "rJTpIB3BR",
            "pinKey": "SJgChwE2BA"
          },
          "input": {
            "nodeId": "SkfeyFpBA",
            "pinKey": "Bkh8A_Sv1-"
          }
        },
        "ryO-1YaSC": {
          "id": "ryO-1YaSC",
          "output": {
            "nodeId": "SkfeyFpBA",
            "pinKey": "HkyxURuSPyW"
          },
          "input": {
            "nodeId": "HkalyYTSR",
            "pinKey": "__in__"
          }
        },
        "B18GktaSC": {
          "id": "B18GktaSC",
          "output": {
            "nodeId": "Sya-1FaB0",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "SJrDQSnrC",
            "pinKey": "r1jzp_DTZ"
          }
        }
      },
      "comments": {
        "HyYTqBhHC": {
          "content": "*Ready* output changes with availability of new measurement data.",
          "id": "HyYTqBhHC",
          "position": {
            "x": 14,
            "y": 1,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 4,
            "units": "slots"
          }
        },
        "ByyEoS2SC": {
          "content": "*Number of measurements.* N.B. these are fewer than the number of clock cycles, because the sensor makes a measurement every 5 seconds.",
          "id": "ByyEoS2SC",
          "position": {
            "x": 15,
            "y": 4,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 7,
            "units": "slots"
          }
        },
        "BJ6lnHnS0": {
          "content": "A pulse is sent to the *read-measurement* node only if new data are available.",
          "id": "BJ6lnHnS0",
          "position": {
            "x": 14,
            "y": 2,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 5,
            "units": "slots"
          }
        },
        "rJzHnBnrR": {
          "content": "After initialization the device is put into measurement mode.",
          "id": "rJzHnBnrR",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 4,
            "units": "slots"
          }
        },
        "HyeFnr2SA": {
          "content": "Number of ticks from *clock*.",
          "id": "HyeFnr2SA",
          "position": {
            "x": 20,
            "y": 1,
            "units": "slots"
          },
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          }
        }
      },
      "path": "@/02-example",
      "description": "Patch to demonstrate a selection of the low level nodes. Run in debugger."
    },
    "@/init": {
      "nodes": {
        "BygIapT4A": {
          "id": "BygIapT4A",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "r1EUTT6NR": {
          "boundLiterals": {
            "__out__": "On Boot"
          },
          "description": "Initialize.",
          "label": "INIT",
          "id": "r1EUTT6NR",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "B1bDa6a4C": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "B1bDa6a4C",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        },
        "SJ8up66EA": {
          "description": "Pulse on successful initialization. ",
          "label": "OK",
          "id": "SJ8up66EA",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rJ-KVS2B0": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "rJ-KVS2B0",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        }
      },
      "path": "@/init",
      "description": "Initialize SCD4X device. The SCD4X device is in idle mode on initialization.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_INIT\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_INIT>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n        auto wire = getValue<input_I2C>(ctx);\n\n        // Initialize SCD4X device with user specified I2C interface\n        sensor->begin(*wire);\n\n        auto sensorError = sensor->stopPeriodicMeasurement();\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    },
    "@/power-down": {
      "nodes": {
        "rk7LyShHA": {
          "id": "rk7LyShHA",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "Syx7L1S2r0": {
          "description": "Pulse on successfully putting SCD4X device into sleep mode. ",
          "label": "OK",
          "id": "Syx7L1S2r0",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HJbQLyH3rR": {
          "description": "Update.",
          "label": "UPD",
          "id": "HJbQLyH3rR",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "r1MmLkS2HR": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "r1MmLkS2HR",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        }
      },
      "path": "@/power-down",
      "description": "Put the sensor from idle to sleep mode to reduce current consumption. Only available in idle mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        auto sensorError = sensor->powerDown();\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    },
    "@/is-data-ready": {
      "nodes": {
        "SyFbK4hHC": {
          "id": "SyFbK4hHC",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "BygYZF4nSC": {
          "description": "Pulse on successful check of data availability.",
          "label": "OK",
          "id": "BygYZF4nSC",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "B1-KbYEnSA": {
          "description": "Update.",
          "label": "UPD",
          "id": "B1-KbYEnSA",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "r1ftZKNhBA": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "r1ftZKNhBA",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        },
        "B1QGF43S0": {
          "description": "True if new data available, false otherwise.",
          "label": "Ready",
          "id": "B1QGF43S0",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-boolean"
        }
      },
      "path": "@/is-data-ready",
      "description": "Check whether new measurement data is available for read-out.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        bool isDataReady = false;\n\n        auto sensorError = sensor->getDataReadyFlag(isDataReady);\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n        emitValue<output_Ready>(ctx, isDataReady);\n\n    }\n}\n"
        }
      ]
    },
    "@/read-measurement": {
      "nodes": {
        "Byt9s4hrC": {
          "id": "Byt9s4hrC",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "ryeY5iE2BA": {
          "description": "Pulse on successfully reading measurement data.",
          "label": "OK",
          "id": "ryeY5iE2BA",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SybK9iN2rR": {
          "description": "Update.",
          "label": "UPD",
          "id": "SybK9iN2rR",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HJzt9oNhr0": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "HJzt9oNhr0",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        },
        "ByWO-B3BR": {
          "description": "CO₂ concentration in ppm.",
          "label": "CO2",
          "id": "ByWO-B3BR",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "By4_ZBnH0": {
          "description": "Temperature in °C",
          "label": "Temp",
          "id": "By4_ZBnH0",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Hk3V_bShrA": {
          "description": "Relative humidity (%).",
          "label": "RH",
          "id": "Hk3V_bShrA",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "path": "@/read-measurement",
      "description": "Read sensor output. The measurement data can only be read out once per signal update interval as the buffer is emptied upon read-out. This command is only available in measurement mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n        \n        uint16_t co2 = 0;\n        float temperature = 0.0f;\n        float humidity = 0.0f;\n\n        auto sensorError = sensor->readMeasurement(co2, temperature, humidity);\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_CO2>(ctx, co2);\n        emitValue<output_Temp>(ctx, temperature);\n        emitValue<output_RH>(ctx, humidity);\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    },
    "@/simple-scd4x-sensor": {
      "nodes": {
        "S1PH_S3HA": {
          "id": "S1PH_S3HA",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "@/scd4x-device"
        },
        "rJlPS_rhHC": {
          "id": "rJlPS_rhHC",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "@/init"
        },
        "Bk-DH_BhSA": {
          "id": "Bk-DH_BhSA",
          "position": {
            "x": 7,
            "y": 1,
            "units": "slots"
          },
          "type": "@/is-data-ready"
        },
        "r1MPS_BhB0": {
          "id": "r1MPS_BhB0",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "@/read-measurement"
        },
        "ry_DrOr2SC": {
          "id": "ry_DrOr2SC",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/gate"
        },
        "SyTwHurhS0": {
          "id": "SyTwHurhS0",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "@/start-measurement"
        },
        "B1CvBOr3rA": {
          "label": "DEV",
          "id": "B1CvBOr3rA",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/to-bus"
        },
        "HJkxvruS2B0": {
          "label": "DEV",
          "id": "HJkxvruS2B0",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/from-bus"
        },
        "SyxlPrOShBA": {
          "label": "DEV",
          "id": "SyxlPrOShBA",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/from-bus"
        },
        "rkNK_r2SR": {
          "description": "CO₂ concentration in ppm.",
          "label": "CO2",
          "id": "rkNK_r2SR",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Hyz9dS3BC": {
          "description": "Temperature in °C",
          "label": "Temp",
          "id": "Hyz9dS3BC",
          "position": {
            "x": 6,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HJCM5_H3HC": {
          "description": "Relative humidity (%).",
          "label": "RH",
          "id": "HJCM5_H3HC",
          "position": {
            "x": 7,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Byo6_H2SC": {
          "description": "Pulse on successfully reading measurement data.",
          "label": "OK",
          "id": "Byo6_H2SC",
          "position": {
            "x": 8,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BJ5eKB2BA": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "BJ5eKB2BA",
          "position": {
            "x": 3,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "B1vGFBnS0": {
          "boundLiterals": {
            "__out__": "On Boot"
          },
          "description": "Initialize SCD4X device.",
          "label": "INIT",
          "id": "B1vGFBnS0",
          "position": {
            "x": 4,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "By8rtS3S0": {
          "description": "Update",
          "label": "UPD",
          "id": "By8rtS3S0",
          "position": {
            "x": 8,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SJFxAu6HR": {
          "id": "SJFxAu6HR",
          "type": "xod/core/flip-flop",
          "position": {
            "x": 1,
            "y": 3,
            "units": "slots"
          }
        },
        "H1fb0uprC": {
          "id": "H1fb0uprC",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": 1,
            "y": 4,
            "units": "slots"
          },
          "label": "init"
        },
        "S1pi0uTSC": {
          "id": "S1pi0uTSC",
          "type": "xod/core/gate",
          "position": {
            "x": 8,
            "y": 0,
            "units": "slots"
          }
        },
        "rJ02Rdar0": {
          "id": "rJ02Rdar0",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 9,
            "y": -1,
            "units": "slots"
          },
          "label": "init"
        }
      },
      "links": {
        "HyZxwHuB2HA": {
          "id": "HyZxwHuB2HA",
          "input": {
            "nodeId": "rJlPS_rhHC",
            "pinKey": "B1bDa6a4C"
          },
          "output": {
            "nodeId": "S1PH_S3HA",
            "pinKey": "Hkce6paVA"
          }
        },
        "SyvxPHdB2BA": {
          "id": "SyvxPHdB2BA",
          "input": {
            "nodeId": "ry_DrOr2SC",
            "pinKey": "B1P1nFwaM"
          },
          "output": {
            "nodeId": "Bk-DH_BhSA",
            "pinKey": "B1QGF43S0"
          }
        },
        "rk9xvS_H2S0": {
          "id": "rk9xvS_H2S0",
          "input": {
            "nodeId": "ry_DrOr2SC",
            "pinKey": "SJ-1mZPTz"
          },
          "output": {
            "nodeId": "Bk-DH_BhSA",
            "pinKey": "BygYZF4nSC"
          }
        },
        "S1olPS_ShrA": {
          "id": "S1olPS_ShrA",
          "input": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "SybK9iN2rR"
          },
          "output": {
            "nodeId": "ry_DrOr2SC",
            "pinKey": "OkPg7GDaW"
          }
        },
        "ryCePHOrhS0": {
          "id": "ryCePHOrhS0",
          "input": {
            "nodeId": "B1CvBOr3rA",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "S1PH_S3HA",
            "pinKey": "Hkce6paVA"
          }
        },
        "r1JbvBOr2rA": {
          "id": "r1JbvBOr2rA",
          "input": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "HJzt9oNhr0"
          },
          "output": {
            "nodeId": "SyxlPrOShBA",
            "pinKey": "__out__"
          }
        },
        "HkxbPS_rnBA": {
          "id": "HkxbPS_rnBA",
          "input": {
            "nodeId": "Bk-DH_BhSA",
            "pinKey": "r1ftZKNhBA"
          },
          "output": {
            "nodeId": "HJkxvruS2B0",
            "pinKey": "__out__"
          }
        },
        "ry-WvrOBhB0": {
          "id": "ry-WvrOBhB0",
          "input": {
            "nodeId": "SyTwHurhS0",
            "pinKey": "rJZCnDVhSR"
          },
          "output": {
            "nodeId": "rJlPS_rhHC",
            "pinKey": "SJ8up66EA"
          }
        },
        "HkMZPSuBnB0": {
          "id": "HkMZPSuBnB0",
          "input": {
            "nodeId": "SyTwHurhS0",
            "pinKey": "r1fChvV2BC"
          },
          "output": {
            "nodeId": "S1PH_S3HA",
            "pinKey": "Hkce6paVA"
          }
        },
        "Hy7TOB3H0": {
          "id": "Hy7TOB3H0",
          "input": {
            "nodeId": "rkNK_r2SR",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "ByWO-B3BR"
          }
        },
        "By4puHnH0": {
          "id": "By4puHnH0",
          "input": {
            "nodeId": "Hyz9dS3BC",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "By4_ZBnH0"
          }
        },
        "ByBp_r3HA": {
          "id": "ByBp_r3HA",
          "input": {
            "nodeId": "HJCM5_H3HC",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "Hk3V_bShrA"
          }
        },
        "rJ01tS2rC": {
          "id": "rJ01tS2rC",
          "input": {
            "nodeId": "Byo6_H2SC",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "r1MPS_BhB0",
            "pinKey": "ryeY5iE2BA"
          }
        },
        "SyZfYHhr0": {
          "id": "SyZfYHhr0",
          "input": {
            "nodeId": "rJlPS_rhHC",
            "pinKey": "rJ-KVS2B0"
          },
          "output": {
            "nodeId": "BJ5eKB2BA",
            "pinKey": "__out__"
          }
        },
        "rkp_4FrhB0": {
          "id": "rkp_4FrhB0",
          "input": {
            "nodeId": "rJlPS_rhHC",
            "pinKey": "r1EUTT6NR"
          },
          "output": {
            "nodeId": "B1vGFBnS0",
            "pinKey": "__out__"
          }
        },
        "S1ag0_6rR": {
          "id": "S1ag0_6rR",
          "output": {
            "nodeId": "SyTwHurhS0",
            "pinKey": "SJgChwE2BA"
          },
          "input": {
            "nodeId": "SJFxAu6HR",
            "pinKey": "Bkh8A_Sv1-"
          }
        },
        "BJlGR_pr0": {
          "id": "BJlGR_pr0",
          "output": {
            "nodeId": "SJFxAu6HR",
            "pinKey": "HkyxURuSPyW"
          },
          "input": {
            "nodeId": "H1fb0uprC",
            "pinKey": "__in__"
          }
        },
        "r1XnAuTrC": {
          "id": "r1XnAuTrC",
          "output": {
            "nodeId": "By8rtS3S0",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "S1pi0uTSC",
            "pinKey": "SJ-1mZPTz"
          }
        },
        "ByShC_TBC": {
          "id": "ByShC_TBC",
          "output": {
            "nodeId": "S1pi0uTSC",
            "pinKey": "OkPg7GDaW"
          },
          "input": {
            "nodeId": "Bk-DH_BhSA",
            "pinKey": "B1-KbYEnSA"
          }
        },
        "rygp0dpHC": {
          "id": "rygp0dpHC",
          "output": {
            "nodeId": "rJ02Rdar0",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "S1pi0uTSC",
            "pinKey": "B1P1nFwaM"
          }
        }
      },
      "path": "@/simple-scd4x-sensor",
      "description": "Combines lower level nodes to create a ready to use sensor."
    },
    "@/scd4x-device": {
      "nodes": {
        "B1iR2a64A": {
          "id": "B1iR2a64A",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "Hkce6paVA": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "Hkce6paVA",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-self"
        }
      },
      "path": "@/scd4x-device",
      "description": "Create an SCD4X device.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD require \"https://github.com/sensirion/arduino-core\"\n#pragma XOD require \"https://github.com/Sensirion/arduino-i2c-scd4x\"\n\n#include <SensirionI2CScd4x.h>\n\nnode {\n\n    meta {\n        // Define our custom type as a pointer on the class instance.\n        using Type = SensirionI2CScd4x*;\n    }\n\n    // Keep Adafruit_SGP30 object in state\n    SensirionI2CScd4x sensor = SensirionI2CScd4x();\n\n\n    void evaluate(Context ctx) {\n        emitValue<output_DEV>(ctx, &sensor);\n    }\n}\n"
        }
      ]
    },
    "@/start-measurement": {
      "nodes": {
        "BkA3vEnrR": {
          "id": "BkA3vEnrR",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SJgChwE2BA": {
          "description": "Pulse on successfully entering measurement mode.",
          "label": "OK",
          "id": "SJgChwE2BA",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rJZCnDVhSR": {
          "description": "Update.",
          "label": "UPD",
          "id": "rJZCnDVhSR",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "r1fChvV2BC": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "r1fChvV2BC",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        }
      },
      "path": "@/start-measurement",
      "description": "Start periodic measurement, signal update interval is 5 seconds. This command is only available in idle mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        auto sensorError = sensor->startPeriodicMeasurement();\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    },
    "@/stop-measurement": {
      "nodes": {
        "ry3e07hSR": {
          "id": "ry3e07hSR",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "HkdZ0mnS0": {
          "description": "Pulse on successful termination of measurements.",
          "label": "OK",
          "id": "HkdZ0mnS0",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "S10bRm2S0": {
          "description": "Update.",
          "label": "UPD",
          "id": "S10bRm2S0",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rJLVkNnHA": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "rJLVkNnHA",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        }
      },
      "path": "@/stop-measurement",
      "description": "Stop periodic measurement and return to idle mode for sensor configuration or to safe energy. This command is only available in measurement mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        auto sensorError = sensor->stopPeriodicMeasurement();\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    },
    "@/wake-up": {
      "nodes": {
        "SJsUyH2BR": {
          "id": "SJsUyH2BR",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "HJgiLJB3SC": {
          "description": "Pulse on successfully waking from sleep mode.",
          "label": "OK",
          "id": "HJgiLJB3SC",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "ByWjLyHnSA": {
          "description": "Update.",
          "label": "UPD",
          "id": "ByWjLyHnSA",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SyGo8JBhS0": {
          "description": "An SCD4X device.",
          "label": "DEV",
          "id": "SyGo8JBhS0",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-scd4x-device"
        }
      },
      "path": "@/wake-up",
      "description": "Wake up sensor from sleep mode to idle mode. Only available in sleep mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        auto sensorError = sensor->wakeUp();\n        if (sensorError) {\n            raiseError(ctx);\n            return;\n        }\n\n        emitValue<output_OK>(ctx, 1);\n\n    }\n}\n"
        }
      ]
    }
  },
  "license": "BSD 3-Clause \"New\" or \"Revised\" License",
  "version": "0.0.3",
  "description": "Sensirion SCD4x CO2, relative humidity and temperature sensor. Wraps https://github.com/Sensirion/arduino-i2c-scd4x",
  "name": "scd4x-co2-rh-temp"
}
