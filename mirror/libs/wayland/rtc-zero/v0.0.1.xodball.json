{
  "patches": {
    "@/example": {
      "nodes": {
        "Skdlrwpx0": {
          "id": "Skdlrwpx0",
          "position": {
            "x": 12,
            "y": 1,
            "units": "slots"
          },
          "type": "@/read"
        },
        "BJsgBwalC": {
          "id": "BJsgBwalC",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "@/rtc-zero-device"
        },
        "r1D-rwae0": {
          "id": "r1D-rwae0",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/write"
        },
        "rkOMBv6xR": {
          "label": "DEV",
          "id": "rkOMBv6xR",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/to-bus"
        },
        "SyB7SPTgA": {
          "label": "DEV",
          "id": "SyB7SPTgA",
          "position": {
            "x": 12,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/from-bus"
        },
        "rJlSHv6gA": {
          "boundLiterals": {
            "ByfGSDjQE": "24"
          },
          "id": "rJlSHv6gA",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "SkHrrvTlR": {
          "boundLiterals": {
            "ByfGSDjQE": "4"
          },
          "id": "SkHrrvTlR",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "S1UrBDagR": {
          "boundLiterals": {
            "ByfGSDjQE": "17"
          },
          "id": "S1UrBDagR",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "rk-LBBDaeC": {
          "boundLiterals": {
            "ByfGSDjQE": "17"
          },
          "id": "rk-LBBDaeC",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "rJDrBDagC": {
          "boundLiterals": {
            "ByfGSDjQE": "16"
          },
          "id": "rJDrBDagC",
          "position": {
            "x": 8,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "rJbvrrDTl0": {
          "boundLiterals": {
            "ByfGSDjQE": "0"
          },
          "id": "rJbvrrDTl0",
          "position": {
            "x": 9,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-number"
        },
        "r1OUBPagR": {
          "id": "r1OUBPagR",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "SklDSv6eR": {
          "id": "SklDSv6eR",
          "position": {
            "x": 13,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "HJhDBvpgC": {
          "id": "HJhDBvpgC",
          "position": {
            "x": 12,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/datetime/datetime"
        },
        "HkqYSwTgC": {
          "id": "HkqYSwTgC",
          "position": {
            "x": 12,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/datetime/format-timestamp"
        },
        "ByecrPaxR": {
          "size": {
            "height": 1,
            "width": 7,
            "units": "slots"
          },
          "id": "ByecrPaxR",
          "position": {
            "x": 12,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "H1hMrvTlC": {
          "id": "H1hMrvTlC",
          "input": {
            "nodeId": "rkOMBv6xR",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "BJsgBwalC",
            "pinKey": "SyyHeI6xC"
          }
        },
        "HJi7rDTgR": {
          "id": "HJi7rDTgR",
          "input": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "SJEVW8Te0"
          },
          "output": {
            "nodeId": "SyB7SPTgA",
            "pinKey": "__out__"
          }
        },
        "ryfEBvpe0": {
          "id": "ryfEBvpe0",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "ryeDC7PTeC"
          },
          "output": {
            "nodeId": "BJsgBwalC",
            "pinKey": "SyyHeI6xC"
          }
        },
        "B1FSSw6eA": {
          "id": "B1FSSw6eA",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "Sy9yNv6gR"
          },
          "output": {
            "nodeId": "rJlSHv6gA",
            "pinKey": "ByfGSDjQE"
          }
        },
        "Hk3BSwTeA": {
          "id": "Hk3BSwTeA",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "ryTyNDag0"
          },
          "output": {
            "nodeId": "SkHrrvTlR",
            "pinKey": "ByfGSDjQE"
          }
        },
        "HJABSvTxC": {
          "id": "HJABSvTxC",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "Skg6JVD6g0"
          },
          "output": {
            "nodeId": "S1UrBDagR",
            "pinKey": "ByfGSDjQE"
          }
        },
        "Hk1IrDaxC": {
          "id": "Hk1IrDaxC",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "SkAJEwpgR"
          },
          "output": {
            "nodeId": "rk-LBBDaeC",
            "pinKey": "ByfGSDjQE"
          }
        },
        "BJxUHDaxC": {
          "id": "BJxUHDaxC",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "SkgC14vaxC"
          },
          "output": {
            "nodeId": "rJDrBDagC",
            "pinKey": "ByfGSDjQE"
          }
        },
        "rkGIrv6eC": {
          "id": "rkGIrv6eC",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "SyZ0y4walA"
          },
          "output": {
            "nodeId": "rJbvrrDTl0",
            "pinKey": "ByfGSDjQE"
          }
        },
        "By2UBvplR": {
          "id": "By2UBvplR",
          "input": {
            "nodeId": "r1D-rwae0",
            "pinKey": "SJdPR7Dax0"
          },
          "output": {
            "nodeId": "r1OUBPagR",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "BkEDSwalA": {
          "id": "BkEDSwalA",
          "input": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "SJ--fU6lR"
          },
          "output": {
            "nodeId": "SklDSv6eR",
            "pinKey": "HJU8CE2lW"
          }
        },
        "ByM_Bv6lC": {
          "id": "ByM_Bv6lC",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "r1f2FeXP7"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "Syu_-LplC"
          }
        },
        "r1QdSwTl0": {
          "id": "r1QdSwTl0",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "HJgzhKxmvm"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "HJFO-8agA"
          }
        },
        "S1BuBDpl0": {
          "id": "S1BuBDpl0",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "S1-M2YemPQ"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "ByeF_Z86x0"
          }
        },
        "r18urDTx0": {
          "id": "r18urDTx0",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "SkQnYg7wQ"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "SycubLpeA"
          }
        },
        "rJwdBPpl0": {
          "id": "rJwdBPpl0",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "HygQhYlQw7"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "Hylc_W86gR"
          }
        },
        "BkTKBD6xA": {
          "id": "BkTKBD6xA",
          "input": {
            "nodeId": "HkqYSwTgC",
            "pinKey": "Hy_D4G0JOX"
          },
          "output": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "r1ZqKlXPX"
          }
        },
        "B1EcBDpeR": {
          "id": "B1EcBDpeR",
          "input": {
            "nodeId": "ByecrPaxR",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HkqYSwTgC",
            "pinKey": "BkvDEzR1Om"
          }
        },
        "Skgwr_pe0": {
          "id": "Skgwr_pe0",
          "input": {
            "nodeId": "HJhDBvpgC",
            "pinKey": "ryjoteXwm"
          },
          "output": {
            "nodeId": "Skdlrwpx0",
            "pinKey": "HJ-dWI6g0"
          }
        }
      },
      "path": "@/example",
      "description": "Patch to set and read the real time clock. Run in debugger."
    },
    "@/read": {
      "nodes": {
        "Sy1V-U6x0": {
          "id": "Sy1V-U6x0",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SJEVW8Te0": {
          "description": "An rtc-zero device.",
          "label": "DEV",
          "id": "SJEVW8Te0",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-rtc-zero-device"
        },
        "HJ-dWI6g0": {
          "description": "Year (YYYY).",
          "label": "Year",
          "id": "HJ-dWI6g0",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Syu_-LplC": {
          "description": "Month value in range [1, 12]",
          "label": "Month",
          "id": "Syu_-LplC",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HJFO-8agA": {
          "description": "Days value in range [1, 28-31]",
          "label": "Day",
          "id": "HJFO-8agA",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "ByeF_Z86x0": {
          "description": "Hours value in range [0, 23]",
          "label": "Hour",
          "id": "ByeF_Z86x0",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SycubLpeA": {
          "description": "Minutes value in range [0, 59]",
          "label": "Minute",
          "id": "SycubLpeA",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Hylc_W86gR": {
          "description": "Seconds value in range [0, 59]",
          "label": "Sec",
          "id": "Hylc_W86gR",
          "position": {
            "x": 7,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BkNxzIaxR": {
          "description": "Pulse on read.",
          "label": "Done",
          "id": "BkNxzIaxR",
          "position": {
            "x": 8,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SJ--fU6lR": {
          "description": "Update",
          "label": "UPD",
          "id": "SJ--fU6lR",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        }
      },
      "path": "@/read",
      "description": "Read the real time clock.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto rtc = getValue<input_DEV>(ctx);\n\n        emitValue<output_Year>(ctx, rtc->getYear()+2000);\n        emitValue<output_Month>(ctx, rtc->getMonth());\n        emitValue<output_Day>(ctx, rtc->getDay());\n        emitValue<output_Hour>(ctx, rtc->getHours());\n        emitValue<output_Minute>(ctx, rtc->getMinutes());\n        emitValue<output_Sec>(ctx, rtc->getSeconds());\n        emitValue<output_Done>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/rtc-zero-device": {
      "nodes": {
        "ryxrAHpgA": {
          "id": "ryxrAHpgA",
          "position": {
            "x": 2,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SyyHeI6xC": {
          "description": "An rtc-zero device.",
          "label": "DEV",
          "id": "SyyHeI6xC",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-self"
        }
      },
      "path": "@/rtc-zero-device",
      "description": "Create an rtc-zero device.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "#pragma XOD require \"https://github.com/arduino-libraries/RTCZero\"\n\n#include <RTCZero.h>\n\nnode {\n        meta {\n        // Define our custom type as a pointer on the class instance.\n        using Type = RTCZero*;\n    }\n\n    RTCZero rtc = RTCZero();\n\n    void evaluate(Context ctx) {\n\n        // It should be evaluated only once on the first (setup) transaction\n        if (!isSettingUp())\n            return;\n\n        rtc.begin();\n        \n        emitValue<output_DEV>(ctx, &rtc);\n    }\n}\n"
        }
      ]
    },
    "@/write": {
      "nodes": {
        "ByDCmDalA": {
          "id": "ByDCmDalA",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "ryeDC7PTeC": {
          "description": "An rtc-zero device.",
          "label": "DEV",
          "id": "ryeDC7PTeC",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-rtc-zero-device"
        },
        "SkDwCQv6eR": {
          "description": "Pulse on read.",
          "label": "Done",
          "id": "SkDwCQv6eR",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SJdPR7Dax0": {
          "description": "Update",
          "label": "UPD",
          "id": "SJdPR7Dax0",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Sy9yNv6gR": {
          "description": "Year (YY). 24 represents 2024.",
          "label": "Year",
          "id": "Sy9yNv6gR",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "ryTyNDag0": {
          "description": "Month value in range [1, 12]",
          "label": "Month",
          "id": "ryTyNDag0",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "Skg6JVD6g0": {
          "description": "Days value in range [1, 28-31]",
          "label": "Day",
          "id": "Skg6JVD6g0",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SkAJEwpgR": {
          "description": "Hours value in range [0, 23]",
          "label": "Hour",
          "id": "SkAJEwpgR",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SkgC14vaxC": {
          "description": "Minutes value in range [0, 59]",
          "label": "Minute",
          "id": "SkgC14vaxC",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "SyZ0y4walA": {
          "description": "Seconds value in range [0, 59]",
          "label": "Sec",
          "id": "SyZ0y4walA",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        }
      },
      "path": "@/write",
      "description": "Set the real time clock.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\n#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto rtc = getValue<input_DEV>(ctx);\n        rtc->setYear(getValue<input_Year>(ctx));\n        rtc->setMonth(getValue<input_Month>(ctx));\n        rtc->setDay(getValue<input_Day>(ctx));\n        rtc->setHours(getValue<input_Hour>(ctx));\n        rtc->setMinutes(getValue<input_Minute>(ctx));\n        rtc->setSeconds(getValue<input_Sec>(ctx));\n        emitValue<output_Done>(ctx, 1);\n    }\n}\n"
        }
      ]
    }
  },
  "license": "LGPL-2.1 ",
  "version": "0.0.1",
  "description": "XOD library to control the internal real time clock (RTC) of the Arduino Zero, MKR1000 and related boards. Tested using the MKR Vidor 4000. Wraps https://github.com/arduino-libraries/RTCZero",
  "name": "rtc-zero"
}
