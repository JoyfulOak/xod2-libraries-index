{
  "patches": {
    "@/example-flow-meter": {
      "nodes": {
        "r16RWdgaO": {
          "id": "r16RWdgaO",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-flow-meter"
        },
        "rJvxM_ga_": {
          "id": "rJvxM_ga_",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "ryGzM_lTO": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "ryGzM_lTO",
          "position": {
            "x": 0,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "H107f_g6u": {
          "id": "H107f_g6u",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "SkG4GOxaO": {
          "id": "SkG4GOxaO",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "rk3Efux6u": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "rk3Efux6u",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "ryn2NM_xT_": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "ryn2NM_xT_",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "BJiez_e6O": {
          "id": "BJiez_e6O",
          "input": {
            "nodeId": "r16RWdgaO",
            "pinKey": "S1z1-icVw"
          },
          "output": {
            "nodeId": "rJvxM_ga_",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "rJJmMOla_": {
          "id": "rJJmMOla_",
          "input": {
            "nodeId": "ryGzM_lTO",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "r16RWdgaO",
            "pinKey": "SknHgsqVw"
          }
        },
        "rkVEG_gpO": {
          "id": "rkVEG_gpO",
          "input": {
            "nodeId": "H107f_g6u",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "r16RWdgaO",
            "pinKey": "rkxnBliqEw"
          }
        },
        "B1Hrzul6O": {
          "id": "B1Hrzul6O",
          "input": {
            "nodeId": "rk3Efux6u",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H107f_g6u",
            "pinKey": "r1yhZRd8W"
          }
        },
        "HkvrfOla_": {
          "id": "HkvrfOla_",
          "input": {
            "nodeId": "ryn2NM_xT_",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SkG4GOxaO",
            "pinKey": "r1yhZRd8W"
          }
        },
        "ByYBMueTd": {
          "id": "ByYBMueTd",
          "input": {
            "nodeId": "SkG4GOxaO",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "r16RWdgaO",
            "pinKey": "B1_VLT54v"
          }
        }
      },
      "path": "@/example-flow-meter",
      "description": "Patch to test sfm3x00-flow-meter. The sfm3x00-flow-meter can be reset by sending a pulse to the RST input. Run in debug mode and use the tweak node to send a pulse to the RST input."
    },
    "@/example-insufflation-monitor": {
      "nodes": {
        "Hke7pkf03_": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "Hke7pkf03_",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SybmpJfCnO": {
          "id": "SybmpJfCnO",
          "position": {
            "x": 7,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "BJzQakfR3O": {
          "id": "BJzQakfR3O",
          "position": {
            "x": 10,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "BymX6JGRhd": {
          "id": "BymX6JGRhd",
          "position": {
            "x": 7,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "B1E7pyz03d": {
          "id": "B1E7pyz03d",
          "position": {
            "x": 10,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "HySQp1zRnu": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "HySQp1zRnu",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJLXTkGAhu": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "SJLXTkGAhu",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "BJBZvUR3u": {
          "id": "BJBZvUR3u",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "HJfgQcl6O": {
          "id": "HJfgQcl6O",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-insufflation-monitor"
        },
        "SJ58XhxTd": {
          "id": "SJ58XhxTd",
          "position": {
            "x": 13,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJl9I7ne6O": {
          "id": "SJl9I7ne6O",
          "position": {
            "x": 13,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        }
      },
      "links": {
        "rJPQ61GR3O": {
          "id": "rJPQ61GR3O",
          "input": {
            "nodeId": "BJzQakfR3O",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B1E7pyz03d",
            "pinKey": "r1yhZRd8W"
          }
        },
        "SkOX6kGRhd": {
          "id": "SkOX6kGRhd",
          "input": {
            "nodeId": "SybmpJfCnO",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "BymX6JGRhd",
            "pinKey": "r1yhZRd8W"
          }
        },
        "H1ul79ead": {
          "id": "H1ul79ead",
          "input": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "rJyTZqxT_"
          },
          "output": {
            "nodeId": "BJBZvUR3u",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "By2f75gaO": {
          "id": "By2f75gaO",
          "input": {
            "nodeId": "SJLXTkGAhu",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "Hk5gG9xpd"
          }
        },
        "SypMX9epd": {
          "id": "SypMX9epd",
          "input": {
            "nodeId": "Hke7pkf03_",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "rJzWGqx6u"
          }
        },
        "r1AM75gpd": {
          "id": "r1AM75gpd",
          "input": {
            "nodeId": "HySQp1zRnu",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "SkhMWzqx6O"
          }
        },
        "HJtLH9ead": {
          "id": "HJtLH9ead",
          "input": {
            "nodeId": "BymX6JGRhd",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "Byszz9gaO"
          }
        },
        "B1j8Sqg6_": {
          "id": "B1j8Sqg6_",
          "input": {
            "nodeId": "B1E7pyz03d",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "rJUfG9l6_"
          }
        },
        "Bk-qL72xaO": {
          "id": "Bk-qL72xaO",
          "input": {
            "nodeId": "SJ58XhxTd",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJl9I7ne6O",
            "pinKey": "r1yhZRd8W"
          }
        },
        "ByC87nlad": {
          "id": "ByC87nlad",
          "input": {
            "nodeId": "SJl9I7ne6O",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HJfgQcl6O",
            "pinKey": "B12iff5ga_"
          }
        }
      },
      "path": "@/example-insufflation-monitor",
      "description": "Patch to test sfm3x00-insufflation-monitor. Run in debug mode."
    },
    "@/example-show-sensor-details": {
      "nodes": {
        "ByAxinqqP": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "ByAxinqqP",
          "position": {
            "x": 1,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "Sy7Wr629cv": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "Sy7Wr629cv",
          "position": {
            "x": 8,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SyZHp3qcP": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "SyZHp3qcP",
          "position": {
            "x": 11,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rkXDhn55D": {
          "size": {
            "height": 1,
            "width": 3,
            "units": "slots"
          },
          "id": "rkXDhn55D",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "B14_Csyp_": {
          "boundLiterals": {
            "rkE_poJa_": "40h"
          },
          "id": "B14_Csyp_",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "@/sfm3x00-about"
        }
      },
      "links": {
        "rJcuAjJT_": {
          "id": "rJcuAjJT_",
          "input": {
            "nodeId": "ByAxinqqP",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B14_Csyp_",
            "pinKey": "BkZopskTd"
          }
        },
        "Byjd0j1TO": {
          "id": "Byjd0j1TO",
          "input": {
            "nodeId": "rkXDhn55D",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B14_Csyp_",
            "pinKey": "SJ8s6oJpO"
          }
        },
        "Hyn_Cj16u": {
          "id": "Hyn_Cj16u",
          "input": {
            "nodeId": "Sy7Wr629cv",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B14_Csyp_",
            "pinKey": "rJ38spo1aO"
          }
        },
        "HJAuCj1p_": {
          "id": "HJAuCj1p_",
          "input": {
            "nodeId": "SyZHp3qcP",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "B14_Csyp_",
            "pinKey": "Skvsaj1a_"
          }
        }
      },
      "path": "@/example-show-sensor-details",
      "description": "Patch to test sfm3x00-about node. Run in debug mode. Article number, serial number, offset and scale factor should be reported."
    },
    "@/example-flow-volume-meter": {
      "nodes": {
        "rJp2GOeTu": {
          "id": "rJp2GOeTu",
          "position": {
            "x": 14,
            "y": 2,
            "units": "slots"
          },
          "type": "@/sfm3x00-flow-volume-meter"
        },
        "rkI6GOlT_": {
          "id": "rkI6GOlT_",
          "position": {
            "x": 16,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "rkgIazdl6d": {
          "id": "rkgIazdl6d",
          "position": {
            "x": 18,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "H1bLaG_xa_": {
          "boundLiterals": {
            "Sk1e_NIVE": "True"
          },
          "id": "H1bLaG_xa_",
          "position": {
            "x": 17,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/debug/tweak-boolean"
        },
        "rknhJjx6u": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "rknhJjx6u",
          "position": {
            "x": 13,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJgh3kjga_": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "SJgh3kjga_",
          "position": {
            "x": 15,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HyZ32yoeTu": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "HyZ32yoeTu",
          "position": {
            "x": 17,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rJIyljgpO": {
          "id": "rJIyljgpO",
          "position": {
            "x": 20,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HJqlgogaO": {
          "id": "HJqlgogaO",
          "position": {
            "x": 20,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/count"
        }
      },
      "links": {
        "H1P6kigaO": {
          "id": "H1P6kigaO",
          "input": {
            "nodeId": "rknhJjx6u",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "SyF8J3k6O"
          }
        },
        "HJtaJix6u": {
          "id": "HJtaJix6u",
          "input": {
            "nodeId": "SJgh3kjga_",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "ryCUk2Jau"
          }
        },
        "rysTJog6O": {
          "id": "rysTJog6O",
          "input": {
            "nodeId": "HyZ32yoeTu",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "HJhA8J3yau"
          }
        },
        "SynT1ieTd": {
          "id": "SynT1ieTd",
          "input": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "BkhCfOx6d"
          },
          "output": {
            "nodeId": "H1bLaG_xa_",
            "pinKey": "Sk1e_NIVE"
          }
        },
        "B1x01sgTd": {
          "id": "B1x01sgTd",
          "input": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "HkqVJ3k6_"
          },
          "output": {
            "nodeId": "rkgIazdl6d",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "SkaAJjxau": {
          "id": "SkaAJjxau",
          "input": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "S1r4k2J6O"
          },
          "output": {
            "nodeId": "rkI6GOlT_",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "H1XbeseT_": {
          "id": "H1XbeseT_",
          "input": {
            "nodeId": "HJqlgogaO",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "rJp2GOeTu",
            "pinKey": "rk4v12yaO"
          }
        },
        "H1V-lslaO": {
          "id": "H1V-lslaO",
          "input": {
            "nodeId": "rJIyljgpO",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HJqlgogaO",
            "pinKey": "r1yhZRd8W"
          }
        }
      },
      "path": "@/example-flow-volume-meter",
      "description": "Patch to test sfm3x00-flow-volume-meter. Run in debug mode."
    },
    "@/example-ventilation-monitor": {
      "nodes": {
        "SJk9spnhd": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "SJk9spnhd",
          "position": {
            "x": 1,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "H1d9jT2hu": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "H1d9jT2hu",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "rkiGfC23O": {
          "id": "rkiGfC23O",
          "position": {
            "x": 9,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJxXMR3hd": {
          "id": "SJxXMR3hd",
          "position": {
            "x": 12,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJj7zRhn_": {
          "id": "SJj7zRhn_",
          "position": {
            "x": 9,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "SkYEfA32O": {
          "id": "SkYEfA32O",
          "position": {
            "x": 12,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "B1N0GRn2_": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "B1N0GRn2_",
          "position": {
            "x": 7,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "ryCNdCh2d": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "ryCNdCh2d",
          "position": {
            "x": 3,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJKQ-xAnd": {
          "id": "SJKQ-xAnd",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/tweak-pulse"
        },
        "HyH4X2e6O": {
          "id": "HyH4X2e6O",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "@/sfm3x00-ventilation-monitor"
        },
        "SJ3S7he6_": {
          "id": "SJ3S7he6_",
          "position": {
            "x": 15,
            "y": 5,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJg3B7hxaO": {
          "id": "SJg3B7hxaO",
          "position": {
            "x": 15,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/core/count"
        }
      },
      "links": {
        "SJREzC2nu": {
          "id": "SJREzC2nu",
          "input": {
            "nodeId": "SJxXMR3hd",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SkYEfA32O",
            "pinKey": "r1yhZRd8W"
          }
        },
        "rJxBf02n_": {
          "id": "rJxBf02n_",
          "input": {
            "nodeId": "rkiGfC23O",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJj7zRhn_",
            "pinKey": "r1yhZRd8W"
          }
        },
        "BkcE7ngTO": {
          "id": "BkcE7ngTO",
          "input": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "HJ8F12la_"
          },
          "output": {
            "nodeId": "SJKQ-xAnd",
            "pinKey": "Bkf4BDsmV"
          }
        },
        "BJ2EQ3la_": {
          "id": "BJ2EQ3la_",
          "input": {
            "nodeId": "SJk9spnhd",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "B1rBb3xaO"
          }
        },
        "r1AVm3xTu": {
          "id": "r1AVm3xTu",
          "input": {
            "nodeId": "ryCNdCh2d",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "HkJPZngau"
          }
        },
        "r1yrQnx6O": {
          "id": "r1yrQnx6O",
          "input": {
            "nodeId": "H1d9jT2hu",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "SkeBS-2xpO"
          }
        },
        "SkWHQnxau": {
          "id": "SkWHQnxau",
          "input": {
            "nodeId": "B1N0GRn2_",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "ryWHSZ2xpO"
          }
        },
        "rJMSQ2eaO": {
          "id": "rJMSQ2eaO",
          "input": {
            "nodeId": "SJj7zRhn_",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "rkgpp-3xp_"
          }
        },
        "rJVBXne6d": {
          "id": "rJVBXne6d",
          "input": {
            "nodeId": "SkYEfA32O",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "B1pTZ2e6u"
          }
        },
        "BJWnrmhxau": {
          "id": "BJWnrmhxau",
          "input": {
            "nodeId": "SJ3S7he6_",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "SJg3B7hxaO",
            "pinKey": "r1yhZRd8W"
          }
        },
        "S1RSXnead": {
          "id": "S1RSXnead",
          "input": {
            "nodeId": "SJg3B7hxaO",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "HyH4X2e6O",
            "pinKey": "S1frrbne6d"
          }
        }
      },
      "path": "@/example-ventilation-monitor",
      "description": "Patch to test sfm3x00-ventilation-monitor node. Run in debug mode.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n    // Internal state variables defined at this level persists across evaluations\n    Number foo;\n    uint8_t bar = 5;\n\n    void evaluate(Context ctx) {\n        bar += 42;\n\n        if (isSettingUp()) {\n            // This run once\n            foo = (Number)(bar + 1);\n        }\n\n        auto inValue = getValue<input_IN>(ctx);\n        emitValue<output_OUT>(ctx, inValue);\n    }\n}\n"
        }
      ]
    },
    "@/measure-insufflation": {
      "nodes": {
        "Hy_QRe0hu": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "Hy_QRe0hu",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BJxOXCgR2_": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "BJxOXCgR2_",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "Bk-um0l02O": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "Bk-um0l02O",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HkzdmAgA3_": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update.",
          "label": "UPD",
          "id": "HkzdmAgA3_",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "By7_Q0lRnu": {
          "id": "By7_Q0lRnu",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "ryE_XCg03d": {
          "description": "Insufflation volume (cubic centimetres).",
          "label": "iVOL",
          "id": "ryE_XCg03d",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HkrdmCe0nu": {
          "description": "Pulse on start of insufflation.",
          "label": "Start",
          "id": "HkrdmCe0nu",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SyIuQAlRhd": {
          "description": "Pulse on end of insufflation.",
          "label": "End",
          "id": "SyIuQAlRhd",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "ByuuXAgCh_": {
          "description": "Respiratory rate (breaths per minute).",
          "label": "RR",
          "id": "ByuuXAgCh_",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SJKd7Ag0nd": {
          "description": "Reset. Triggers soft reset and reinitialisation of sensor.",
          "label": "RST",
          "id": "SJKd7Ag0nd",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HJlTfbC3u": {
          "boundLiterals": {
            "__out__": "5"
          },
          "description": "Insufflation threshold (SLM).",
          "label": "IT",
          "id": "HJlTfbC3u",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "HJLIhVJT_": {
          "id": "HJLIhVJT_",
          "position": {
            "x": 6,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/measure-insufflation",
      "description": "Monitor unidirectional flow (inspiration/insufflation). Measures flow rate, respiratory rate and inspiration/insufflation volume.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "node {\n    // Volume (cm3)\n    Number vol=0;\n    // Inspiratory flow: true during inspiration/insufflation.\n    bool inspFlow = true;\n    // Previous value of inspFlow.\n    bool inspFlowPrev = true;\n    // Previous flow measurement time (ms).\n    TimeMs mt_prev;\n    // Time of latest inspiration (ms).\n    TimeMs ins_t = 0;\n    // Time of previous inspiration (ms).\n    TimeMs ins_t_prev = 0;\n    // Flow rate (standard litres per minute).\n    // Flow has positive value for inspiration/insufflation, negative for expiration/exsufflation.\n    Number flow;\n\n    void evaluate(Context ctx) {\n\n        // Measure flow rate only if there is an input pulse.\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        // Check for reset\n        bool rst = isInputDirty<input_RST>(ctx);\n\n        TimeMs mt = transactionTime();\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        auto thresh = getValue<input_IT>(ctx);\n\n        // soft reset\n        if (rst) {\n            sensor->sendCommand(SOFT_RESET);\n            delay(100);\n            sensor->begin();\n        }\n\n        // Setting up. If we start measuring during an inspiration/insufflation or expiration/exsufflation,\n        // the first measurement will be inaccurate. The following code makes the program wait for an\n        // inspiration/insufflation before starting measurements.\n        if (isSettingUp() || rst){\n            uint8_t flow_dir_changes = 0;\n            while (flow_dir_changes<2) {\n                // Measure flow\n                flow = sensor->readFlow();\n                // Check to see if rate of flow is above user-defined inspiratory threshold.\n                inspFlow = round(flow) > thresh;\n                if (inspFlowPrev!=inspFlow) {\n                    flow_dir_changes += 1;\n                    if(inspFlowPrev) {\n                        ins_t_prev=mt;\n                    }\n                    inspFlowPrev=inspFlow;\n                }\n                delay(20);\n            }\n            mt_prev = millis();\n            return;\n        }\n\n        // Measure flow rate, volume and respiratory rate.\n        flow = sensor->readFlow();\n        inspFlow = round(flow) > thresh;\n\n        // check for change of flow direction\n        if (inspFlowPrev!=inspFlow) {\n            // if direction of flow has changed\n            if(inspFlowPrev) {\n                emitValue<output_iVOL>(ctx, vol);\n                emitValue<output_End>(ctx, 1);\n                ins_t=mt;\n                // Calculate respiratory rate\n                Number resp_rate = 60/((ins_t-ins_t_prev)/1000.0);\n                emitValue<output_RR>(ctx, resp_rate);\n                ins_t_prev=ins_t;\n            } else {\n                emitValue<output_Start>(ctx, 1);\n            }\n            inspFlowPrev=inspFlow;\n            // reset volume\n            vol = 0;\n        }\n\n        TimeMs mt_delta = mt - mt_prev;\n        mt_prev = mt;\n        vol += flow/60*mt_delta;\n\n        emitValue<output_FR>(ctx, flow);\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/measure-flow-volume": {
      "nodes": {
        "rk0JSyJa_": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "rk0JSyJa_",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rygAyHykTO": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "rygAyHykTO",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "HJbCyrJyTd": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "HJbCyrJyTd",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HyfA1BJJ6_": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update.",
          "label": "UPD",
          "id": "HyfA1BJJ6_",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rkN0JBJJad": {
          "description": "Inspiratory volume (cubic centimetres).",
          "label": "iVOL",
          "id": "rkN0JBJJad",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "H1_Ckr1k6u": {
          "description": "Reset. Triggers soft reset.",
          "label": "RST",
          "id": "H1_Ckr1k6u",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HJndSJJ6d": {
          "description": "Reset volume.",
          "label": "RVol",
          "id": "HJndSJJ6d",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rJQ0S1JT_": {
          "description": "Enable volume measurement. When true volume will be measured.",
          "label": "VolEn",
          "id": "rJQ0S1JT_",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "B16Iv-1pd": {
          "description": "Expiratory volume (cubic centimetres).",
          "label": "eVOL",
          "id": "B16Iv-1pd",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HJrShNyTu": {
          "id": "HJrShNyTu",
          "position": {
            "x": 5,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        },
        "H1Q-jjepd": {
          "id": "H1Q-jjepd",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        }
      },
      "path": "@/measure-flow-volume",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "node {\n    // Volume (cm3)\n    Number iVol=0;\n    Number eVol=0;\n    TimeMs mt_prev;\n    // Time of latest inspiration (ms).\n    TimeMs ins_t = 0;\n    // Time of previous inspiration (ms).\n    TimeMs ins_t_prev = 0;\n\n    void evaluate(Context ctx) {\n\n        // Measure flow rate only if there is an input pulse.\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        TimeMs mt = transactionTime();\n        \n        if (isSettingUp()) {\n            delay(100);\n            mt_prev = millis();\n            return;\n        }\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        // soft reset\n        if (isInputDirty<input_RST>(ctx)) {\n            sensor->sendCommand(SOFT_RESET);\n            delay(100);\n            sensor->begin();\n        }\n\n        // Measure flow rate, volume and respiratory rate.\n        // Flow rate (standard litres per minute).\n        // Flow has positive value for inspiration/insufflation, negative for expiration/exsufflation.\n        Number flow = sensor->readFlow();\n\n        TimeMs mt_delta = mt - mt_prev;\n        mt_prev = mt;\n\n        if (isInputDirty<input_RVol>(ctx)) {\n            iVol=0;\n            eVol=0;\n        } else {\n            if (getValue<input_VolEn>(ctx)){\n                if (flow>0) {\n                    iVol += flow/60*mt_delta;\n                } else {\n                    eVol += -flow/60*mt_delta;\n                }\n            }\n        }\n\n        emitValue<output_FR>(ctx, flow);\n        emitValue<output_iVOL>(ctx, iVol);\n        emitValue<output_eVOL>(ctx, eVol);\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/measure-ventilation": {
      "nodes": {
        "rJQfRn33d": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "rJQfRn33d",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "SklXM022hO": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "SklXM022hO",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "rybXzR332u": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "rybXzR332u",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Byz7fChhhO": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update.",
          "label": "UPD",
          "id": "Byz7fChhhO",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "r177fCh3nO": {
          "id": "r177fCh3nO",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "rkHH0nh3_": {
          "description": "Inspiratory volume (cubic centimetres).",
          "label": "iVOL",
          "id": "rkHH0nh3_",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "r1TCkC2hu": {
          "description": "Pulse on end of expiration (start of inspiration).",
          "label": "EXP",
          "id": "r1TCkC2hu",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "H1gpRJ023u": {
          "description": "Pulse on end of inspiration (start of expiration).",
          "label": "INS",
          "id": "H1gpRJ023u",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "S1hUg022_": {
          "description": "Expiratory volume (cubic centimetres).",
          "label": "eVOL",
          "id": "S1hUg022_",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Hyb0eCh3O": {
          "description": "Respiratory rate (breaths per minute).",
          "label": "RR",
          "id": "Hyb0eCh3O",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BkXVkT62u": {
          "description": "Reset. Triggers soft reset and reinitialisation of sensor.",
          "label": "RST",
          "id": "BkXVkT62u",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "B1JP34yTu": {
          "id": "B1JP34yTu",
          "position": {
            "x": 7,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/measure-ventilation",
      "description": "Monitor bidirectional flow (inspiration/insufflation and expiration/exsufflation). Measures flow rate, respiratory rate, inspiratory volume and expiratory volume. ",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "node {\n    // Volume (cm3)\n    Number vol=0;\n    // Flow has positive value: true for inspiration/insufflation, false for expiration/exsufflation.\n    bool posFlow = true;\n    // Previous value of posFlow.\n    bool posFlowPrev = true;\n    // Previous flow measurement time (ms).\n    TimeMs mt_prev;\n    // Time of latest inspiration (ms).\n    TimeMs ins_t = 0;\n    // Time of previous inspiration (ms).\n    TimeMs ins_t_prev = 0;\n    // Flow rate (standard litres per minute).\n    // Flow has positive value for inspiration/insufflation, negative for expiration/exsufflation.\n    Number flow;\n\n    void evaluate(Context ctx) {\n\n        // Measure flow rate only if there is an input pulse.\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        // Check for reset\n        bool rst = isInputDirty<input_RST>(ctx);\n\n        TimeMs mt = transactionTime();\n        auto sensor = getValue<input_DEV>(ctx);\n\n        // soft reset\n        if (rst) {\n            sensor->sendCommand(SOFT_RESET);\n            delay(100);\n            sensor->begin();\n        }\n\n        // Setting up. If we start measuring during an inspiration/insufflation or expiration/exsufflation,\n        // the first measurement will be inaccurate. The following code makes the program wait for an\n        // expiration/exsufflation before starting measurements.\n        if (isSettingUp() || rst){\n            uint8_t flow_dir_changes = 0;\n            while (flow_dir_changes<2) {\n                // Measure flow\n                flow = sensor->readFlow();\n                // Check direction of flow. Round flow to prevent small fluctuations around zero\n                // from changing the value of posFlow.\n                posFlow = 0 < round(flow);\n                if (posFlowPrev!=posFlow) {\n                    // if direction of flow has changed\n                    flow_dir_changes += 1;\n                    if(posFlowPrev) {\n                        ins_t_prev=mt;\n                    }\n                    posFlowPrev=posFlow;\n                }\n                delay(20);\n            }\n            mt_prev = millis();\n            return;\n        }\n\n        // Measure flow rate, volume and respiratory rate.\n        flow = sensor->readFlow();\n        posFlow = 0 < round(flow); \n\n        if (posFlowPrev!=posFlow) {\n            if(posFlowPrev) {\n                emitValue<output_iVOL>(ctx, vol);\n                emitValue<output_INS>(ctx, 1);\n                ins_t=mt;\n                // Calculate respiratory rate\n                Number resp_rate = 60/((ins_t-ins_t_prev)/1000.0);\n                emitValue<output_RR>(ctx, resp_rate);\n                ins_t_prev=ins_t;\n            } else {\n                emitValue<output_eVOL>(ctx, -vol);\n                emitValue<output_EXP>(ctx, 1);\n            }\n            posFlowPrev=posFlow;\n            // reset volume\n            vol = 0;\n        }\n\n        TimeMs mt_delta = mt - mt_prev;\n        mt_prev = mt;\n        vol += flow/60*mt_delta;\n\n        emitValue<output_FR>(ctx, flow);\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/read-article-number": {
      "nodes": {
        "Byhfu2q5D": {
          "id": "Byhfu2q5D",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "S1kf9hqcD": {
          "description": "Article number.",
          "label": "ART",
          "id": "S1kf9hqcD",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJ-m_hcqw": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "rJ-m_hcqw",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "r1uUySJT_": {
          "id": "r1uUySJT_",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/read-article-number",
      "description": "Read article number of SFM3x00 device.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n\n    void evaluate(Context ctx) {\n        auto sensor = getValue<input_DEV>(ctx);\n        emitValue<output_ART>(ctx, sensor->requestArticleNumber());\n    }\n}\n"
        }
      ]
    },
    "@/read-flow": {
      "nodes": {
        "B1gs9c5Nw": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "B1gs9c5Nw",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "H175K5cEw": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "H175K5cEw",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "H1_AF9qVD": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "H1_AF9qVD",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "S1jhKqcEw": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update.",
          "label": "UPD",
          "id": "S1jhKqcEw",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "ryKKF554v": {
          "id": "ryKKF554v",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "S1m_hEk6O": {
          "id": "S1m_hEk6O",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/read-flow",
      "description": "Read flow rate (standard litre per minute).",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n\n    void evaluate(Context ctx) {\n        // Measure flow rate only if there is an input pulse.\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        emitValue<output_FR>(ctx, sensor->readFlow());\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/read-serial-number": {
      "nodes": {
        "H1Wyijhqcw": {
          "description": "Serial number.",
          "label": "SN",
          "id": "H1Wyijhqcw",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HkxJjin5cD": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "HkxJjin5cD",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "Hyyji39qP": {
          "id": "Hyyji39qP",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "r1bvJB1Tu": {
          "id": "r1bvJB1Tu",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/read-serial-number",
      "description": "Read serial number of SFM3x00 device.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n\n    void evaluate(Context ctx) {\n        auto sensor = getValue<input_DEV>(ctx);\n        emitValue<output_SN>(ctx, sensor->requestSerialNumber());\n    }\n}\n"
        }
      ]
    },
    "@/sfm3x00-about": {
      "nodes": {
        "Syomajya_": {
          "id": "Syomajya_",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "@/read-offset-scale-factor"
        },
        "SkeoX6jka_": {
          "id": "SkeoX6jka_",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "@/read-article-number"
        },
        "ryZomajJ6d": {
          "id": "ryZomajJ6d",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "@/read-serial-number"
        },
        "ByGo7pjJ6d": {
          "id": "ByGo7pjJ6d",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-device"
        },
        "ByhN6okT_": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "ByhN6okT_",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "rkE_poJa_": {
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "rkE_poJa_",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "BkZopskTd": {
          "description": "Article number.",
          "label": "ART",
          "id": "BkZopskTd",
          "position": {
            "x": 1,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SJ8s6oJpO": {
          "description": "Serial number.",
          "label": "SN",
          "id": "SJ8s6oJpO",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJ38spo1aO": {
          "description": "Offset.",
          "label": "Offset",
          "id": "rJ38spo1aO",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Skvsaj1a_": {
          "description": "Scale factor.",
          "label": "Scale",
          "id": "Skvsaj1a_",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        }
      },
      "links": {
        "rymoQpikTd": {
          "id": "rymoQpikTd",
          "input": {
            "nodeId": "SkeoX6jka_",
            "pinKey": "rJ-m_hcqw"
          },
          "output": {
            "nodeId": "ByGo7pjJ6d",
            "pinKey": "SkkfLc5ED"
          }
        },
        "rJ4sXTikp_": {
          "id": "rJ4sXTikp_",
          "input": {
            "nodeId": "Syomajya_",
            "pinKey": "SkS51viNv"
          },
          "output": {
            "nodeId": "ByGo7pjJ6d",
            "pinKey": "SkkfLc5ED"
          }
        },
        "H1Si76oyau": {
          "id": "H1Si76oyau",
          "input": {
            "nodeId": "ryZomajJ6d",
            "pinKey": "HkxJjin5cD"
          },
          "output": {
            "nodeId": "ByGo7pjJ6d",
            "pinKey": "SkkfLc5ED"
          }
        },
        "BkhDTs1p_": {
          "id": "BkhDTs1p_",
          "input": {
            "nodeId": "ByGo7pjJ6d",
            "pinKey": "S1mr9e0hu"
          },
          "output": {
            "nodeId": "ByhN6okT_",
            "pinKey": "__out__"
          }
        },
        "BJO5Tjk6O": {
          "id": "BJO5Tjk6O",
          "input": {
            "nodeId": "ByGo7pjJ6d",
            "pinKey": "rkTlIccND"
          },
          "output": {
            "nodeId": "rkE_poJa_",
            "pinKey": "__out__"
          }
        },
        "ryCoTo1pd": {
          "id": "ryCoTo1pd",
          "input": {
            "nodeId": "BkZopskTd",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "SkeoX6jka_",
            "pinKey": "S1kf9hqcD"
          }
        },
        "S17hpiJ6d": {
          "id": "S17hpiJ6d",
          "input": {
            "nodeId": "SJ8s6oJpO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "ryZomajJ6d",
            "pinKey": "H1Wyijhqcw"
          }
        },
        "BkS3TokTO": {
          "id": "BkS3TokTO",
          "input": {
            "nodeId": "rJ38spo1aO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "Syomajya_",
            "pinKey": "rJ4aJwoVD"
          }
        },
        "SJUnpokaO": {
          "id": "SJUnpokaO",
          "input": {
            "nodeId": "Skvsaj1a_",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "Syomajya_",
            "pinKey": "r1dpkDi4D"
          }
        }
      },
      "path": "@/sfm3x00-about",
      "description": "Reports the following information about a SFM3x00 sensor: article number, serial number, offset and scale factor."
    },
    "@/reset": {
      "nodes": {
        "H1c4o59Ew": {
          "id": "H1c4o59Ew",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "rkUUicc4P": {
          "description": "Reset. Triggers soft reset.",
          "label": "RST",
          "id": "rkUUicc4P",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rkpNo59Nw": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "rkpNo59Nw",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "rykFo5cVD": {
          "description": "Pulse on reset.",
          "label": "DONE",
          "id": "rykFo5cVD",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "B13uh4kpO": {
          "id": "B13uh4kpO",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/reset",
      "description": "Perform a soft-reset.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n\n    void evaluate(Context ctx) {\n        // Measure flow rate only if there is an input pulse.\n        if (!isInputDirty<input_RST>(ctx))\n            return;\n\n        auto sensor = getValue<input_DEV>(ctx);\n\n        sensor->sendCommand(SOFT_RESET);\n        delay(100);\n        sensor->begin();\n\n        emitValue<output_DONE>(ctx, 1);\n    }\n}\n"
        }
      ]
    },
    "@/sfm3x00-device": {
      "nodes": {
        "BJxy8qqVP": {
          "description": "Create a SFM3x00 device.",
          "id": "BJxy8qqVP",
          "position": {
            "x": 0,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SkkfLc5ED": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "SkkfLc5ED",
          "position": {
            "x": 0,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-self"
        },
        "rkTlIccND": {
          "boundLiterals": {
            "__out__": "40h"
          },
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "rkTlIccND",
          "position": {
            "x": 0,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "S1mr9e0hu": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "S1mr9e0hu",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "r1Fg3EypO": {
          "id": "r1Fg3EypO",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/sfm3x00-device",
      "description": "Create a SFM3x00 device.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// Tell XOD where it could download the library:\n#pragma XOD require \"https://github.com/WaylandM/MTW-SFM3X00\"\n\n//Include C++ libraries\n#include <Wire.h>\n#include <SFM3X00.h>\n\nnode {\n    meta {\n        using Type = SFM3X00*;\n    }\n\n    uint8_t mem[sizeof(SFM3X00)];\n\n    void evaluate(Context ctx) {\n        if (!isSettingUp()) return;\n\n        auto address = getValue<input_ADDR>(ctx);\n        auto wire = getValue<input_I2C>(ctx);\n\n        Type sensor = new (mem) SFM3X00(address, *wire);\n\n        sensor->begin();\n\n        emitValue<output_DEV>(ctx, sensor);\n\n    }\n}\n"
        }
      ]
    },
    "@/sfm3x00-flow-volume-meter": {
      "nodes": {
        "ryh2RjkTd": {
          "id": "ryh2RjkTd",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "@/measure-flow-volume"
        },
        "HkdJJnkaO": {
          "id": "HkdJJnkaO",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-device"
        },
        "Syvxk2kTO": {
          "boundLiterals": {
            "__out__": "40h"
          },
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "Syvxk2kTO",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "S1dWkn1T_": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "S1dWkn1T_",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "S1r4k2J6O": {
          "description": "Reset. Triggers soft reset.",
          "label": "RST",
          "id": "S1r4k2J6O",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HkqVJ3k6_": {
          "description": "Reset volume measurements to zero.",
          "label": "RVol",
          "id": "HkqVJ3k6_",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "r1ncNyhkpd": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update. Trigger read.",
          "label": "UPD",
          "id": "r1ncNyhkpd",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SyF8J3k6O": {
          "description": "Flow rate (standard litre per minute). Inspiration/insufflation results in a positive flow. Flow is negative during expiration/exsufflation.",
          "label": "FR",
          "id": "SyF8J3k6O",
          "position": {
            "x": 2,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "ryCUk2Jau": {
          "description": "Inspiratory/insufflation volume (cubic centimetres).",
          "label": "iVOL",
          "id": "ryCUk2Jau",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HJhA8J3yau": {
          "description": "Expiratory/exsufflation volume (cubic centimetres).",
          "label": "eVOL",
          "id": "HJhA8J3yau",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rk4v12yaO": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "rk4v12yaO",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BkhCfOx6d": {
          "description": "Enable volume measurement. When true volume will be measured.",
          "label": "VolEn",
          "id": "BkhCfOx6d",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        }
      },
      "links": {
        "SJ5Jy2kTd": {
          "id": "SJ5Jy2kTd",
          "input": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "rygAyHykTO"
          },
          "output": {
            "nodeId": "HkdJJnkaO",
            "pinKey": "SkkfLc5ED"
          }
        },
        "HJ7-k3yaO": {
          "id": "HJ7-k3yaO",
          "input": {
            "nodeId": "HkdJJnkaO",
            "pinKey": "rkTlIccND"
          },
          "output": {
            "nodeId": "Syvxk2kTO",
            "pinKey": "__out__"
          }
        },
        "SJmMy2kpu": {
          "id": "SJmMy2kpu",
          "input": {
            "nodeId": "HkdJJnkaO",
            "pinKey": "S1mr9e0hu"
          },
          "output": {
            "nodeId": "S1dWkn1T_",
            "pinKey": "__out__"
          }
        },
        "HJaDyh16u": {
          "id": "HJaDyh16u",
          "input": {
            "nodeId": "rk4v12yaO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "rk0JSyJa_"
          }
        },
        "BJkOJhkau": {
          "id": "BJkOJhkau",
          "input": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "HyfA1BJJ6_"
          },
          "output": {
            "nodeId": "r1ncNyhkpd",
            "pinKey": "__out__"
          }
        },
        "HJl_khkpu": {
          "id": "HJl_khkpu",
          "input": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "HJndSJJ6d"
          },
          "output": {
            "nodeId": "HkqVJ3k6_",
            "pinKey": "__out__"
          }
        },
        "HJX_13yp_": {
          "id": "HJX_13yp_",
          "input": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "H1_Ckr1k6u"
          },
          "output": {
            "nodeId": "S1r4k2J6O",
            "pinKey": "__out__"
          }
        },
        "rkOdJhyau": {
          "id": "rkOdJhyau",
          "input": {
            "nodeId": "SyF8J3k6O",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "HJbCyrJyTd"
          }
        },
        "B1KOy3J6O": {
          "id": "B1KOy3J6O",
          "input": {
            "nodeId": "ryCUk2Jau",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "rkN0JBJJad"
          }
        },
        "SJ9_y31p_": {
          "id": "SJ9_y31p_",
          "input": {
            "nodeId": "HJhA8J3yau",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "B16Iv-1pd"
          }
        },
        "By517dg6O": {
          "id": "By517dg6O",
          "input": {
            "nodeId": "ryh2RjkTd",
            "pinKey": "rJQ0S1JT_"
          },
          "output": {
            "nodeId": "BkhCfOx6d",
            "pinKey": "__out__"
          }
        }
      },
      "path": "@/sfm3x00-flow-volume-meter",
      "description": "Measurement of flow and volume using SFM3x00. This node is designed for use with a ventilator. It does not detect inspiration or expiration, but relies on a pulse to the RVol input to reset volume measurements at the start of each breathing cycle."
    },
    "@/sfm3x00-insufflation-monitor": {
      "nodes": {
        "rJqdW5gTO": {
          "id": "rJqdW5gTO",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-device"
        },
        "HkbYZclTd": {
          "id": "HkbYZclTd",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "@/measure-insufflation"
        },
        "r16YZ9epu": {
          "boundLiterals": {
            "__out__": "5"
          },
          "description": "Flow threshold for detection of inspiration/insufflation.",
          "label": "IT",
          "id": "r16YZ9epu",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-number"
        },
        "rJyTZqxT_": {
          "description": "Reset. Triggers soft reset and reinitialisation of sensor.",
          "label": "RST",
          "id": "rJyTZqxT_",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "B1N6Z5xp_": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update",
          "label": "UPD",
          "id": "B1N6Z5xp_",
          "position": {
            "x": 7,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Hk5gG9xpd": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "Hk5gG9xpd",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJzWGqx6u": {
          "description": "Respiratory rate (breaths per minute).",
          "label": "RR",
          "id": "rJzWGqx6u",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SkhMWzqx6O": {
          "description": "Inspiratory volume (cubic centimetres).",
          "label": "iVOL",
          "id": "SkhMWzqx6O",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJUfG9l6_": {
          "description": "Pulse on end of insufflation/inspiration.",
          "label": "End",
          "id": "rJUfG9l6_",
          "position": {
            "x": 8,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "Byszz9gaO": {
          "description": "Pulse on start of insufflation/inspiration.",
          "label": "Start",
          "id": "Byszz9gaO",
          "position": {
            "x": 7,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "B12iff5ga_": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "B12iff5ga_",
          "position": {
            "x": 9,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "BJ5Tz9lad": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "BJ5Tz9lad",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "HJQzehe6_": {
          "boundLiterals": {
            "__out__": "40h"
          },
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "HJQzehe6_",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        }
      },
      "links": {
        "Skmt-5xTu": {
          "id": "Skmt-5xTu",
          "input": {
            "nodeId": "HkbYZclTd",
            "pinKey": "BJxOXCgR2_"
          },
          "output": {
            "nodeId": "rJqdW5gTO",
            "pinKey": "SkkfLc5ED"
          }
        },
        "B1iqhWceTu": {
          "id": "B1iqhWceTu",
          "input": {
            "nodeId": "HkbYZclTd",
            "pinKey": "HJlTfbC3u"
          },
          "output": {
            "nodeId": "r16YZ9epu",
            "pinKey": "__out__"
          }
        },
        "H1ACWcl6_": {
          "id": "H1ACWcl6_",
          "input": {
            "nodeId": "HkbYZclTd",
            "pinKey": "SJKd7Ag0nd"
          },
          "output": {
            "nodeId": "rJyTZqxT_",
            "pinKey": "__out__"
          }
        },
        "rkl1z5lTd": {
          "id": "rkl1z5lTd",
          "input": {
            "nodeId": "HkbYZclTd",
            "pinKey": "HkzdmAgA3_"
          },
          "output": {
            "nodeId": "B1N6Z5xp_",
            "pinKey": "__out__"
          }
        },
        "r114Mqxpu": {
          "id": "r114Mqxpu",
          "input": {
            "nodeId": "Hk5gG9xpd",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "Bk-um0l02O"
          }
        },
        "rJ-Vzcgad": {
          "id": "rJ-Vzcgad",
          "input": {
            "nodeId": "rJzWGqx6u",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "ByuuXAgCh_"
          }
        },
        "rJG4M5lTO": {
          "id": "rJG4M5lTO",
          "input": {
            "nodeId": "SkhMWzqx6O",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "ryE_XCg03d"
          }
        },
        "SJmNM9e6d": {
          "id": "SJmNM9e6d",
          "input": {
            "nodeId": "rJUfG9l6_",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "SyIuQAlRhd"
          }
        },
        "BJS4fcla_": {
          "id": "BJS4fcla_",
          "input": {
            "nodeId": "Byszz9gaO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "HkrdmCe0nu"
          }
        },
        "BkIEMqepO": {
          "id": "BkIEMqepO",
          "input": {
            "nodeId": "B12iff5ga_",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkbYZclTd",
            "pinKey": "Hy_QRe0hu"
          }
        },
        "SJRpM9eTd": {
          "id": "SJRpM9eTd",
          "input": {
            "nodeId": "rJqdW5gTO",
            "pinKey": "S1mr9e0hu"
          },
          "output": {
            "nodeId": "BJ5Tz9lad",
            "pinKey": "__out__"
          }
        },
        "SyvMehx6O": {
          "id": "SyvMehx6O",
          "input": {
            "nodeId": "rJqdW5gTO",
            "pinKey": "rkTlIccND"
          },
          "output": {
            "nodeId": "HJQzehe6_",
            "pinKey": "__out__"
          }
        }
      },
      "path": "@/sfm3x00-insufflation-monitor",
      "description": "Node for monitoring insufflation/inspiration using sfm3x00. Measures flow rate, respiratory rate and insufflation volume. Beginning and end of insufflation are indicated by pulses from Start an End outputs."
    },
    "@/sfm3x00-ventilation-monitor": {
      "nodes": {
        "HJ4uyhlTu": {
          "id": "HJ4uyhlTu",
          "position": {
            "x": -14,
            "y": -2,
            "units": "slots"
          },
          "type": "@/measure-ventilation"
        },
        "B1tOyheTu": {
          "id": "B1tOyheTu",
          "position": {
            "x": -15,
            "y": -3,
            "units": "slots"
          },
          "type": "@/sfm3x00-device"
        },
        "HJ8F12la_": {
          "description": "Reset. Triggers soft reset and reinitialisation of sensor.",
          "label": "RST",
          "id": "HJ8F12la_",
          "position": {
            "x": -13,
            "y": -4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "rJpJe2gpO": {
          "boundLiterals": {
            "__out__": "40h"
          },
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "rJpJe2gpO",
          "position": {
            "x": -15,
            "y": -4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "HyeayehxTu": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "HyeayehxTu",
          "position": {
            "x": -14,
            "y": -4,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "HJbblhl6O": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update",
          "label": "UPD",
          "id": "HJbblhl6O",
          "position": {
            "x": -12,
            "y": -4,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "B1rBb3xaO": {
          "description": "Flow rate (standard litre per minute). Inspiration/insufflation results in a positive flow. Flow is negative during expiration/exsufflation.",
          "label": "FR",
          "id": "B1rBb3xaO",
          "position": {
            "x": -14,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SkeBS-2xpO": {
          "description": "Inspiratory/insufflation volume (cubic centimetres).",
          "label": "iVOL",
          "id": "SkeBS-2xpO",
          "position": {
            "x": -12,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "ryWHSZ2xpO": {
          "description": "Expiratory/exsufflation volume (cubic centimetres).",
          "label": "eVOL",
          "id": "ryWHSZ2xpO",
          "position": {
            "x": -11,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "S1frrbne6d": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "S1frrbne6d",
          "position": {
            "x": -8,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HkJPZngau": {
          "description": "Respiratory rate (breaths per minute).",
          "label": "RR",
          "id": "HkJPZngau",
          "position": {
            "x": -13,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "B1pTZ2e6u": {
          "description": "Pulse on end of expiration (start of inspiration).",
          "label": "EXP",
          "id": "B1pTZ2e6u",
          "position": {
            "x": -9,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "rkgpp-3xp_": {
          "description": "Pulse on end of inspiration (start of expiration).",
          "label": "INS",
          "id": "rkgpp-3xp_",
          "position": {
            "x": -10,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        }
      },
      "links": {
        "BJjOJ3gaO": {
          "id": "BJjOJ3gaO",
          "input": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "SklXM022hO"
          },
          "output": {
            "nodeId": "B1tOyheTu",
            "pinKey": "SkkfLc5ED"
          }
        },
        "By4xxngT_": {
          "id": "By4xxngT_",
          "input": {
            "nodeId": "B1tOyheTu",
            "pinKey": "rkTlIccND"
          },
          "output": {
            "nodeId": "rJpJe2gpO",
            "pinKey": "__out__"
          }
        },
        "SyUxlnxpu": {
          "id": "SyUxlnxpu",
          "input": {
            "nodeId": "B1tOyheTu",
            "pinKey": "S1mr9e0hu"
          },
          "output": {
            "nodeId": "HyeayehxTu",
            "pinKey": "__out__"
          }
        },
        "S15lgngpd": {
          "id": "S15lgngpd",
          "input": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "BkXVkT62u"
          },
          "output": {
            "nodeId": "HJ8F12la_",
            "pinKey": "__out__"
          }
        },
        "ByHbe3xpO": {
          "id": "ByHbe3xpO",
          "input": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "Byz7fChhhO"
          },
          "output": {
            "nodeId": "HJbblhl6O",
            "pinKey": "__out__"
          }
        },
        "Hko0W2lad": {
          "id": "Hko0W2lad",
          "input": {
            "nodeId": "B1rBb3xaO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "rybXzR332u"
          }
        },
        "S1hC-3gad": {
          "id": "S1hC-3gad",
          "input": {
            "nodeId": "HkJPZngau",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "Hyb0eCh3O"
          }
        },
        "SJ6Cbnxpd": {
          "id": "SJ6Cbnxpd",
          "input": {
            "nodeId": "SkeBS-2xpO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "rkHH0nh3_"
          }
        },
        "Bk00-ngpu": {
          "id": "Bk00-ngpu",
          "input": {
            "nodeId": "ryWHSZ2xpO",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "S1hUg022_"
          }
        },
        "ry1JG3xpd": {
          "id": "ry1JG3xpd",
          "input": {
            "nodeId": "rkgpp-3xp_",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "H1gpRJ023u"
          }
        },
        "HkZJM3eaO": {
          "id": "HkZJM3eaO",
          "input": {
            "nodeId": "B1pTZ2e6u",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "r1TCkC2hu"
          }
        },
        "SJm1zhlau": {
          "id": "SJm1zhlau",
          "input": {
            "nodeId": "S1frrbne6d",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HJ4uyhlTu",
            "pinKey": "rJQfRn33d"
          }
        }
      },
      "path": "@/sfm3x00-ventilation-monitor",
      "description": "Node for monitoring ventilation using sfm3x00. Measures flow rate, respiratory rate, inspiratory/insufflation volume and expiratory/exsufflation volume. End of inspiratory and expiratory phases are indicated by a pulse from INS and EXP, respectively."
    },
    "@/read-offset-scale-factor": {
      "nodes": {
        "By9FyPiEP": {
          "id": "By9FyPiEP",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "SkS51viNv": {
          "description": "A SFM3x00 device.",
          "label": "DEV",
          "id": "SkS51viNv",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "type": "@/input-sfm3x00-device"
        },
        "r1dpkDi4D": {
          "description": "Scale factor.",
          "label": "Scale",
          "id": "r1dpkDi4D",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJ4aJwoVD": {
          "description": "Offset.",
          "label": "Offset",
          "id": "rJ4aJwoVD",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BkDvJH16O": {
          "id": "BkDvJH16O",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/utility"
        }
      },
      "path": "@/read-offset-scale-factor",
      "description": "Read offset and scale factor.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "\nnode {\n    void evaluate(Context ctx) {\n        auto sensor = getValue<input_DEV>(ctx);\n        emitValue<output_Offset>(ctx, sensor->requestOffset());\n        emitValue<output_Scale>(ctx, sensor->requestScaleFactor());\n    }\n}\n"
        }
      ]
    },
    "@/sfm3x00-flow-meter": {
      "nodes": {
        "B1_VLT54v": {
          "description": "Pulse on soft reset.",
          "label": "SR",
          "id": "B1_VLT54v",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HkKteicED": {
          "id": "HkKteicED",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "@/reset"
        },
        "Hy1DeicEv": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Update.",
          "label": "UPD",
          "id": "Hy1DeicEv",
          "position": {
            "x": 5,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "S1z1-icVw": {
          "description": "Reset. Triggers soft reset.",
          "label": "RST",
          "id": "S1z1-icVw",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SJGQes9NP": {
          "id": "SJGQes9NP",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "type": "@/read-flow"
        },
        "Sk0gljqEP": {
          "id": "Sk0gljqEP",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "@/sfm3x00-device"
        },
        "SknHgsqVw": {
          "description": "Flow rate (standard litre per minute).",
          "label": "FR",
          "id": "SknHgsqVw",
          "position": {
            "x": 2,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "Sy0PlicNw": {
          "boundLiterals": {
            "__out__": "40h"
          },
          "description": "I²C address of device.",
          "label": "ADDR",
          "id": "Sy0PlicNw",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "rkxnBliqEw": {
          "description": "Pulse on read.",
          "label": "DONE",
          "id": "rkxnBliqEw",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HkxVe-R3_": {
          "description": "I²C bus",
          "label": "I2C",
          "id": "HkxVe-R3_",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        }
      },
      "links": {
        "H14UxiqNP": {
          "id": "H14UxiqNP",
          "input": {
            "nodeId": "SknHgsqVw",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "SJGQes9NP",
            "pinKey": "H1_AF9qVD"
          }
        },
        "HJPJ-i94w": {
          "id": "HJPJ-i94w",
          "input": {
            "nodeId": "HkKteicED",
            "pinKey": "rkUUicc4P"
          },
          "output": {
            "nodeId": "S1z1-icVw",
            "pinKey": "__out__"
          }
        },
        "HkrDxocND": {
          "id": "HkrDxocND",
          "input": {
            "nodeId": "SJGQes9NP",
            "pinKey": "S1jhKqcEw"
          },
          "output": {
            "nodeId": "Hy1DeicEv",
            "pinKey": "__out__"
          }
        },
        "Hy7Oxj5VD": {
          "id": "Hy7Oxj5VD",
          "input": {
            "nodeId": "Sk0gljqEP",
            "pinKey": "rkTlIccND"
          },
          "output": {
            "nodeId": "Sy0PlicNw",
            "pinKey": "__out__"
          }
        },
        "Hy8Ugo9Ew": {
          "id": "Hy8Ugo9Ew",
          "input": {
            "nodeId": "rkxnBliqEw",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "SJGQes9NP",
            "pinKey": "B1gs9c5Nw"
          }
        },
        "S1XXeocNv": {
          "id": "S1XXeocNv",
          "input": {
            "nodeId": "SJGQes9NP",
            "pinKey": "H175K5cEw"
          },
          "output": {
            "nodeId": "Sk0gljqEP",
            "pinKey": "SkkfLc5ED"
          }
        },
        "SkTE8a5VD": {
          "id": "SkTE8a5VD",
          "input": {
            "nodeId": "B1_VLT54v",
            "pinKey": "__in__"
          },
          "output": {
            "nodeId": "HkKteicED",
            "pinKey": "rykFo5cVD"
          }
        },
        "Syjiej5Ev": {
          "id": "Syjiej5Ev",
          "input": {
            "nodeId": "HkKteicED",
            "pinKey": "rkpNo59Nw"
          },
          "output": {
            "nodeId": "Sk0gljqEP",
            "pinKey": "SkkfLc5ED"
          }
        },
        "r1NEeWAnd": {
          "id": "r1NEeWAnd",
          "input": {
            "nodeId": "Sk0gljqEP",
            "pinKey": "S1mr9e0hu"
          },
          "output": {
            "nodeId": "HkxVe-R3_",
            "pinKey": "__out__"
          }
        }
      },
      "path": "@/sfm3x00-flow-meter",
      "description": "SFM3x00 flow meter.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf8",
          "content": "// Tell XOD where it could download the library:\n#pragma XOD require \"https://github.com/PubInv/SFM3X00\"\n\n//Include C++ libraries\n{{#global}}\n#include <Wire.h>\n#include <SFM3X00.h>\n{{/global}}\n\n\n\nstruct State {\n    uint8_t mem[sizeof(SFM3X00)];\n};\n\n// Define our custom type as a pointer on the class instance.\nusing Type = SFM3X00*;\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // It should be evaluated only once on the first (setup) transaction\n    if (isSettingUp()) {\n        auto state = getState(ctx);\n        auto address = getValue<input_ADDR>(ctx);\n        // Create a new object in the memory area reserved previously.\n        Type sensor = new (state->mem) SFM3X00(address);\n        Wire.begin();\n        sensor->begin();\n    }\n\n    // Measure flow rate only if there is an input pulse.\n    if (isInputDirty<input_UPD>(ctx)) {\n        auto state = getState(ctx);\n        auto sensor = reinterpret_cast<SFM3X00*>(state->mem);\n\n        emitValue<output_SLM>(ctx, sensor->readFlow());\n\n        emitValue<output_DONE>(ctx, 1);\n    }\n    \n\n}\n"
        }
      ]
    }
  },
  "license": "BSD-3-Clause License ",
  "version": "0.0.8",
  "description": "Sensirion SFM3x00 series flow meter. Supported devices include SFM3200, SFM3300 and SFM3400. Wraps a modified version of https://github.com/PubInv/SFM3X00. Volume calculations based on https://github.com/MyElectrons/sfm3300-arduino. This software library has not been submitted for medical device approval; it is provided for research, educational and development purposes only.",
  "name": "sfm3x00-flow-meter"
}
