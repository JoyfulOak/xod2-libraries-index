{
  "description": "TCA9548A 1-to-8 I²C multiplexer breakout (https://learn.adafruit.com/adafruit-tca9548a-1-to-8-i2c-multiplexer-breakout).",
  "license": "BSD-3-Clause",
  "version": "0.0.1",
  "patches": {
    "@/example": {
      "nodes": {
        "S1mvSDL1q": {
          "id": "S1mvSDL1q",
          "type": "wayland/bmp280-barometer/bmp280-device",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          }
        },
        "SJgQPrPLyq": {
          "id": "SJgQPrPLyq",
          "type": "wayland/bmp280-barometer/init",
          "position": {
            "x": 1,
            "y": 3,
            "units": "slots"
          }
        },
        "r1MQwBPIyc": {
          "id": "r1MQwBPIyc",
          "type": "wayland/bmp280-barometer/init",
          "position": {
            "x": 1,
            "y": 5,
            "units": "slots"
          }
        },
        "S177DBwLJq": {
          "id": "S177DBwLJq",
          "type": "xod/core/boot",
          "position": {
            "x": 8,
            "y": 1,
            "units": "slots"
          }
        },
        "SkLmPBv8k5": {
          "id": "SkLmPBv8k5",
          "type": "xod/core/flip-flop",
          "position": {
            "x": 1,
            "y": 6,
            "units": "slots"
          }
        },
        "SJvXDSDUJ9": {
          "id": "SJvXDSDUJ9",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": 1,
            "y": 7,
            "units": "slots"
          },
          "label": "INTD"
        },
        "B1OmDBDL19": {
          "id": "B1OmDBDL19",
          "type": "xod/core/clock",
          "position": {
            "x": 14,
            "y": 2,
            "units": "slots"
          }
        },
        "Bkt7wBD8J5": {
          "id": "Bkt7wBD8J5",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 14,
            "y": 1,
            "units": "slots"
          },
          "label": "INTD"
        },
        "By97PHvUyq": {
          "id": "By97PHvUyq",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": 0,
            "y": 3,
            "units": "slots"
          },
          "label": "B0"
        },
        "rJpmwSP81c": {
          "id": "rJpmwSP81c",
          "type": "wayland/bmp280-barometer/read-temperature",
          "position": {
            "x": 12,
            "y": 4,
            "units": "slots"
          }
        },
        "Hy07PBPUJq": {
          "id": "Hy07PBPUJq",
          "type": "wayland/bmp280-barometer/read-pressure",
          "position": {
            "x": 10,
            "y": 4,
            "units": "slots"
          }
        },
        "r11x7vBDLyc": {
          "id": "r11x7vBDLyc",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 10,
            "y": 3,
            "units": "slots"
          },
          "label": "B0"
        },
        "H1bgXDHDIy5": {
          "id": "H1bgXDHDIy5",
          "type": "wayland/bmp280-barometer/read-temperature",
          "position": {
            "x": 17,
            "y": 4,
            "units": "slots"
          }
        },
        "SyMgQwBvU1c": {
          "id": "SyMgQwBvU1c",
          "type": "wayland/bmp280-barometer/read-pressure",
          "position": {
            "x": 15,
            "y": 4,
            "units": "slots"
          }
        },
        "BkEgXvHP8J9": {
          "id": "BkEgXvHP8J9",
          "type": "xod/debug/watch",
          "position": {
            "x": 10,
            "y": 5,
            "units": "slots"
          },
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          }
        },
        "rySxQwrDI15": {
          "id": "rySxQwrDI15",
          "type": "xod/debug/watch",
          "position": {
            "x": 12,
            "y": 5,
            "units": "slots"
          },
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          }
        },
        "H1UeQDrP8Jc": {
          "id": "H1UeQDrP8Jc",
          "type": "xod/debug/watch",
          "position": {
            "x": 15,
            "y": 5,
            "units": "slots"
          },
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          }
        },
        "rywlmDBPUy5": {
          "id": "rywlmDBPUy5",
          "type": "xod/debug/watch",
          "position": {
            "x": 17,
            "y": 5,
            "units": "slots"
          },
          "size": {
            "width": 2,
            "height": 1,
            "units": "slots"
          }
        },
        "BkXdBvLkq": {
          "id": "BkXdBvLkq",
          "type": "@/select-channel",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          }
        },
        "BkLoHPI1q": {
          "id": "BkLoHPI1q",
          "type": "@/select-channel",
          "position": {
            "x": 5,
            "y": 4,
            "units": "slots"
          },
          "boundLiterals": {
            "BJ-6mP8J9": "03h"
          }
        },
        "rkf7IPLk9": {
          "id": "rkf7IPLk9",
          "type": "@/select-channel",
          "position": {
            "x": 11,
            "y": 3,
            "units": "slots"
          }
        },
        "BkElVIwLJ5": {
          "id": "BkElVIwLJ5",
          "type": "@/select-channel",
          "position": {
            "x": 16,
            "y": 3,
            "units": "slots"
          },
          "boundLiterals": {
            "BJ-6mP8J9": "03h"
          }
        },
        "BkBiDPLJq": {
          "id": "BkBiDPLJq",
          "type": "xod/patch-nodes/from-bus",
          "position": {
            "x": 15,
            "y": 3,
            "units": "slots"
          },
          "label": "B3"
        },
        "HJ8XcwUy5": {
          "id": "HJ8XcwUy5",
          "type": "wayland/bmp280-barometer/bmp280-device",
          "position": {
            "x": 1,
            "y": 4,
            "units": "slots"
          }
        },
        "r1eVcPI15": {
          "id": "r1eVcPI15",
          "type": "xod/patch-nodes/to-bus",
          "position": {
            "x": 0,
            "y": 5,
            "units": "slots"
          },
          "label": "B3"
        }
      },
      "links": {
        "HJOeQvBPU19": {
          "id": "HJOeQvBPU19",
          "output": {
            "nodeId": "S1mvSDL1q",
            "pinKey": "HJrGxGPcI"
          },
          "input": {
            "nodeId": "SJgQPrPLyq",
            "pinKey": "Bkcu0DSJ5"
          }
        },
        "B1nemDrPIy5": {
          "id": "B1nemDrPIy5",
          "output": {
            "nodeId": "SkLmPBv8k5",
            "pinKey": "HkyxURuSPyW"
          },
          "input": {
            "nodeId": "SJvXDSDUJ9",
            "pinKey": "__in__"
          }
        },
        "r1ag7wHvUJ5": {
          "id": "r1ag7wHvUJ5",
          "output": {
            "nodeId": "Bkt7wBD8J5",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "B1OmDBDL19",
            "pinKey": "r1jzp_DTZ"
          }
        },
        "BkRl7vrwLy9": {
          "id": "BkRl7vrwLy9",
          "output": {
            "nodeId": "S1mvSDL1q",
            "pinKey": "HJrGxGPcI"
          },
          "input": {
            "nodeId": "By97PHvUyq",
            "pinKey": "__in__"
          }
        },
        "S1zWQvHwUJ5": {
          "id": "S1zWQvHwUJ5",
          "output": {
            "nodeId": "Hy07PBPUJq",
            "pinKey": "BJ5uO4w9U"
          },
          "input": {
            "nodeId": "rJpmwSP81c",
            "pinKey": "Syee4FVw98"
          }
        },
        "r1mbXvHv8yq": {
          "id": "r1mbXvHv8yq",
          "output": {
            "nodeId": "r11x7vBDLyc",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "Hy07PBPUJq",
            "pinKey": "SkY_U4D5I"
          }
        },
        "SJ4WmvBvU19": {
          "id": "SJ4WmvBvU19",
          "output": {
            "nodeId": "r11x7vBDLyc",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "rJpmwSP81c",
            "pinKey": "HJbgVtNvcL"
          }
        },
        "ryrbmwSvUJ5": {
          "id": "ryrbmwSvUJ5",
          "output": {
            "nodeId": "SyMgQwBvU1c",
            "pinKey": "BJ5uO4w9U"
          },
          "input": {
            "nodeId": "H1bgXDHDIy5",
            "pinKey": "Syee4FVw98"
          }
        },
        "rJtZQvBwIkq": {
          "id": "rJtZQvBwIkq",
          "output": {
            "nodeId": "Hy07PBPUJq",
            "pinKey": "SJ89UNvq8"
          },
          "input": {
            "nodeId": "BkEgXvHP8J9",
            "pinKey": "HkXK-dGob"
          }
        },
        "HyqW7PHPIyc": {
          "id": "HyqW7PHPIyc",
          "output": {
            "nodeId": "SyMgQwBvU1c",
            "pinKey": "SJ89UNvq8"
          },
          "input": {
            "nodeId": "H1UeQDrP8Jc",
            "pinKey": "HkXK-dGob"
          }
        },
        "H1ibQDrwIJ5": {
          "id": "H1ibQDrwIJ5",
          "output": {
            "nodeId": "H1bgXDHDIy5",
            "pinKey": "ByfeNFNwqU"
          },
          "input": {
            "nodeId": "rywlmDBPUy5",
            "pinKey": "HkXK-dGob"
          }
        },
        "Sy2b7PBvUJq": {
          "id": "Sy2b7PBvUJq",
          "output": {
            "nodeId": "rJpmwSP81c",
            "pinKey": "ByfeNFNwqU"
          },
          "input": {
            "nodeId": "rySxQwrDI15",
            "pinKey": "HkXK-dGob"
          }
        },
        "ByyzXPHwL19": {
          "id": "ByyzXPHwL19",
          "output": {
            "nodeId": "r1MQwBPIyc",
            "pinKey": "ByF-HnDByq"
          },
          "input": {
            "nodeId": "SkLmPBv8k5",
            "pinKey": "Bkh8A_Sv1-"
          }
        },
        "SySKrvUyc": {
          "id": "SySKrvUyc",
          "output": {
            "nodeId": "BkXdBvLkq",
            "pinKey": "BkzrQvIyq"
          },
          "input": {
            "nodeId": "SJgQPrPLyq",
            "pinKey": "H1_brnPBJ9"
          }
        },
        "rJAsSDLk9": {
          "id": "rJAsSDLk9",
          "output": {
            "nodeId": "BkLoHPI1q",
            "pinKey": "BkzrQvIyq"
          },
          "input": {
            "nodeId": "r1MQwBPIyc",
            "pinKey": "H1_brnPBJ9"
          }
        },
        "B1YCHDUyq": {
          "id": "B1YCHDUyq",
          "output": {
            "nodeId": "SJgQPrPLyq",
            "pinKey": "ByF-HnDByq"
          },
          "input": {
            "nodeId": "BkLoHPI1q",
            "pinKey": "SJq7mP8y5"
          }
        },
        "ByL7IPLyq": {
          "id": "ByL7IPLyq",
          "output": {
            "nodeId": "rkf7IPLk9",
            "pinKey": "BkzrQvIyq"
          },
          "input": {
            "nodeId": "Hy07PBPUJq",
            "pinKey": "HJywIVwq8"
          }
        },
        "r1FmLD8k5": {
          "id": "r1FmLD8k5",
          "output": {
            "nodeId": "B1OmDBDL19",
            "pinKey": "HJU8CE2lW"
          },
          "input": {
            "nodeId": "rkf7IPLk9",
            "pinKey": "SJq7mP8y5"
          }
        },
        "rJI4Iw8Jq": {
          "id": "rJI4Iw8Jq",
          "output": {
            "nodeId": "BkElVIwLJ5",
            "pinKey": "BkzrQvIyq"
          },
          "input": {
            "nodeId": "SyMgQwBvU1c",
            "pinKey": "HJywIVwq8"
          }
        },
        "BJjL8wUk9": {
          "id": "BJjL8wUk9",
          "output": {
            "nodeId": "rJpmwSP81c",
            "pinKey": "rkmeNFVv98"
          },
          "input": {
            "nodeId": "BkElVIwLJ5",
            "pinKey": "SJq7mP8y5"
          }
        },
        "S1X3wvL1c": {
          "id": "S1X3wvL1c",
          "output": {
            "nodeId": "BkBiDPLJq",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "SyMgQwBvU1c",
            "pinKey": "SkY_U4D5I"
          }
        },
        "r1STvwLkq": {
          "id": "r1STvwLkq",
          "output": {
            "nodeId": "BkBiDPLJq",
            "pinKey": "__out__"
          },
          "input": {
            "nodeId": "H1bgXDHDIy5",
            "pinKey": "HJbgVtNvcL"
          }
        },
        "B1pQqw8kq": {
          "id": "B1pQqw8kq",
          "output": {
            "nodeId": "HJ8XcwUy5",
            "pinKey": "HJrGxGPcI"
          },
          "input": {
            "nodeId": "r1MQwBPIyc",
            "pinKey": "Bkcu0DSJ5"
          }
        },
        "HJSVqDLyc": {
          "id": "HJSVqDLyc",
          "output": {
            "nodeId": "HJ8XcwUy5",
            "pinKey": "HJrGxGPcI"
          },
          "input": {
            "nodeId": "r1eVcPI15",
            "pinKey": "__in__"
          }
        },
        "SJ6PsDIk5": {
          "id": "SJ6PsDIk5",
          "output": {
            "nodeId": "S177DBwLJq",
            "pinKey": "ryVmUAOrvkb"
          },
          "input": {
            "nodeId": "BkXdBvLkq",
            "pinKey": "SJq7mP8y5"
          }
        }
      },
      "comments": {
        "SyigKO8y9": {
          "id": "SyigKO8y9",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 8,
            "height": 1,
            "units": "slots"
          },
          "content": "# Initialize sensors\n_______________________________________________"
        },
        "H1TRjd8yq": {
          "id": "H1TRjd8yq",
          "position": {
            "x": 10,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "width": 10,
            "height": 1,
            "units": "slots"
          },
          "content": "# Measure temperature and pressure\n_____________________________________________________"
        },
        "B1TPDtLkq": {
          "id": "B1TPDtLkq",
          "position": {
            "x": 2,
            "y": 2,
            "units": "slots"
          },
          "size": {
            "width": 3,
            "height": 1,
            "units": "slots"
          },
          "content": "Select channel *0* for first bmp280 device."
        },
        "rJ12vKU1q": {
          "id": "rJ12vKU1q",
          "position": {
            "x": 2,
            "y": 4,
            "units": "slots"
          },
          "size": {
            "width": 3,
            "height": 1,
            "units": "slots"
          },
          "content": "Select channel *3* for first bmp280 device."
        },
        "BJATvF8Jq": {
          "id": "BJATvF8Jq",
          "position": {
            "x": -3,
            "y": 2,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Create a bmp280-device for the first sensor."
        },
        "SyyVutLJ5": {
          "id": "SyyVutLJ5",
          "position": {
            "x": -3,
            "y": 4,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Create a bmp280-device for the second sensor."
        },
        "SJ7UutIk5": {
          "id": "SJ7UutIk5",
          "position": {
            "x": -3,
            "y": 3,
            "units": "slots"
          },
          "size": {
            "width": 3,
            "height": 1,
            "units": "slots"
          },
          "content": "Initialize first bmp280-device on channel *0*."
        },
        "rkU_dt8yc": {
          "id": "rkU_dt8yc",
          "position": {
            "x": -3,
            "y": 5,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "Initialize second bmp280-device on channel *3*."
        },
        "Bk0ZttIJ5": {
          "id": "Bk0ZttIJ5",
          "position": {
            "x": -3,
            "y": 7,
            "units": "slots"
          },
          "size": {
            "width": 4,
            "height": 1,
            "units": "slots"
          },
          "content": "*INTD* boolean changes from false to true once sensors initialized."
        },
        "SJBSFKLJc": {
          "id": "SJBSFKLJc",
          "position": {
            "x": 15,
            "y": 1,
            "units": "slots"
          },
          "size": {
            "width": 5,
            "height": 1,
            "units": "slots"
          },
          "content": "Clock will start emitting pulses once sensors have been initialized."
        }
      },
      "path": "@/example",
      "description": "Patch to demonstrate the TCA9548A I²C multiplexer using two BMP280 pressure/temperature sensors."
    },
    "@/select-channel": {
      "nodes": {
        "rJmpfPLJc": {
          "id": "rJmpfPLJc",
          "type": "xod/patch-nodes/not-implemented-in-xod",
          "position": {
            "x": 1,
            "y": 1,
            "units": "slots"
          }
        },
        "SJvCGPIk5": {
          "id": "SJvCGPIk5",
          "type": "xod/i2c/input-i2c",
          "position": {
            "x": 1,
            "y": 0,
            "units": "slots"
          },
          "label": "I2C",
          "description": "I²C bus."
        },
        "SkcZXwLJ5": {
          "id": "SkcZXwLJ5",
          "type": "xod/patch-nodes/input-byte",
          "position": {
            "x": 2,
            "y": 0,
            "units": "slots"
          },
          "label": "ADDR",
          "description": "I²C address (default = 70h).",
          "boundLiterals": {
            "__out__": "70h"
          }
        },
        "SJq7mP8y5": {
          "id": "SJq7mP8y5",
          "type": "xod/patch-nodes/input-pulse",
          "position": {
            "x": 4,
            "y": 0,
            "units": "slots"
          },
          "label": "UPD",
          "description": "Update."
        },
        "BkzrQvIyq": {
          "id": "BkzrQvIyq",
          "type": "xod/patch-nodes/output-pulse",
          "position": {
            "x": 1,
            "y": 2,
            "units": "slots"
          },
          "label": "Done",
          "description": "Pulse on completion."
        },
        "BJ-6mP8J9": {
          "id": "BJ-6mP8J9",
          "type": "xod/patch-nodes/input-byte",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "label": "CHAN",
          "description": "Multiplexer channel (00h - 07h)."
        }
      },
      "path": "@/select-channel",
      "description": "Select multiplexer channel.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "#pragma XOD evaluate_on_pin disable\n#pragma XOD evaluate_on_pin enable input_UPD\n\nnode {\n\n    void evaluate(Context ctx) {\n        // The node responds only if there is an input pulse\n        if (!isInputDirty<input_UPD>(ctx))\n            return;\n\n        uint8_t channel = getValue<input_CHAN>(ctx);\n        if (channel > 7) return;\n\n        auto wire = getValue<input_I2C>(ctx);\n\n        wire->beginTransmission(getValue<input_ADDR>(ctx));\n        wire->write(1 << channel);\n        wire->endTransmission();  \n\n        emitValue<output_Done>(ctx, 1);\n    }\n}\n"
        }
      ]
    }
  },
  "name": "tca9548a-i2c-mux"
}
