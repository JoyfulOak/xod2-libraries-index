{
  "patches": {
    "@/example-test-pulse-oximeter": {
      "nodes": {
        "H17oj2ZJY": {
          "id": "H17oj2ZJY",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/pulse-oximeter"
        },
        "SJgps2bkt": {
          "boundLiterals": {
            "B13SCNhl-": "0.25"
          },
          "id": "SJgps2bkt",
          "position": {
            "x": 6,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "HyZRshZkF": {
          "id": "HyZRshZkF",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJtAj3ZyF": {
          "id": "SJtAj3ZyF",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "HkcAo3-1Y": {
          "id": "HkcAo3-1Y",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SJp0o3W1F": {
          "id": "SJp0o3W1F",
          "position": {
            "x": 6,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "SknaRj2-Jt": {
          "id": "SknaRj2-Jt",
          "position": {
            "x": 7,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        },
        "BJRJh3bkY": {
          "id": "BJRJh3bkY",
          "position": {
            "x": 8,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/count"
        },
        "HJHx3hbyK": {
          "size": {
            "height": 1,
            "width": 2,
            "units": "slots"
          },
          "id": "HJHx3hbyK",
          "position": {
            "x": 8,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/debug/watch"
        }
      },
      "links": {
        "ry6aon-yt": {
          "id": "ry6aon-yt",
          "input": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "ryt6Ij-JY"
          },
          "output": {
            "nodeId": "SJgps2bkt",
            "pinKey": "HJU8CE2lW"
          }
        },
        "H18Co2bkK": {
          "id": "H18Co2bkK",
          "input": {
            "nodeId": "HyZRshZkF",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "HkNmvsWJK"
          }
        },
        "ryE122Wyt": {
          "id": "ryE122Wyt",
          "input": {
            "nodeId": "SJtAj3ZyF",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "B1K7vobyK"
          }
        },
        "S1I122W1F": {
          "id": "S1I122W1F",
          "input": {
            "nodeId": "HkcAo3-1Y",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "rJNjwsWJF"
          }
        },
        "HJPJ23WJF": {
          "id": "HJPJ23WJF",
          "input": {
            "nodeId": "SJp0o3W1F",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "HkThusWJF"
          }
        },
        "Sku13hb1F": {
          "id": "Sku13hb1F",
          "input": {
            "nodeId": "SknaRj2-Jt",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "rJ_7Fob1F"
          }
        },
        "SyXxn2WyF": {
          "id": "SyXxn2WyF",
          "input": {
            "nodeId": "BJRJh3bkY",
            "pinKey": "HJAq-A_8-"
          },
          "output": {
            "nodeId": "H17oj2ZJY",
            "pinKey": "rJObPo-yY"
          }
        },
        "S1Ke32WJt": {
          "id": "S1Ke32WJt",
          "input": {
            "nodeId": "HJHx3hbyK",
            "pinKey": "HkXK-dGob"
          },
          "output": {
            "nodeId": "BJRJh3bkY",
            "pinKey": "r1yhZRd8W"
          }
        }
      },
      "path": "@/example-test-pulse-oximeter",
      "description": "Patch to test pulse-oximeter. Run in debug mode."
    },
    "@/pulse-oximeter": {
      "nodes": {
        "Sy9nLiZkY": {
          "id": "Sy9nLiZkY",
          "position": {
            "x": -10,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "ryt6Ij-JY": {
          "description": "Update. Trigger read.",
          "label": "UPD",
          "id": "ryt6Ij-JY",
          "position": {
            "x": -7,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "S1IeDoZ1t": {
          "description": "I²C bus.",
          "label": "I2C",
          "id": "S1IeDoZ1t",
          "position": {
            "x": -10,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/i2c/input-i2c"
        },
        "rJObPo-yY": {
          "description": "Pulse on read.",
          "label": "Done",
          "id": "rJObPo-yY",
          "position": {
            "x": -5,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HkNmvsWJK": {
          "description": "Heart rate (beats per minute).",
          "label": "BPM",
          "id": "HkNmvsWJK",
          "position": {
            "x": -10,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "B1K7vobyK": {
          "description": "Oxygen saturation (%).",
          "label": "SpO2",
          "id": "B1K7vobyK",
          "position": {
            "x": -9,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "rJNjwsWJF": {
          "description": "Sensor's confidence in the reported data. Range: 0 to 100%.",
          "label": "Conf",
          "id": "rJNjwsWJF",
          "position": {
            "x": -8,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "HkThusWJF": {
          "description": "Finger detection status. 00h = no object detected, 01h = object detected, 02h = object other than finger detected, 03h = finger detected.",
          "label": "Status",
          "id": "HkThusWJF",
          "position": {
            "x": -7,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-byte"
        },
        "rJ_7Fob1F": {
          "description": "Finger detection status extended. 0 = success, 1 = not ready, -1 = object detected, -2 = excessive sensor device motion, -3 = no object detected, -4 = pressing too hard, -5 = object other than finger detected, -6 excessive finger motion.",
          "label": "exStat",
          "id": "rJ_7Fob1F",
          "position": {
            "x": -6,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-number"
        },
        "BypH5sb1F": {
          "boundLiterals": {
            "__out__": "D4"
          },
          "description": "Reset pin.",
          "label": "Reset",
          "id": "BypH5sb1F",
          "position": {
            "x": -9,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "BkQ89sZyK": {
          "boundLiterals": {
            "__out__": "D5"
          },
          "description": "Multi-function input/output pin.",
          "label": "MFIO",
          "id": "BkQ89sZyK",
          "position": {
            "x": -8,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        }
      },
      "path": "@/pulse-oximeter",
      "description": "SparkFun Pulse Oximeter and Heart-Rate Sensor. The sensor is an I²C based biometric sensor, utilising two chips from Maxim Integrated: the MAX32664 Bio Metric Sensor Hub and the MAX30101 Pulse Oximetry and Heart-Rate Module.",
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "// Tell XOD where it can download the libraries:\n#pragma XOD require \"https://github.com/sparkfun/SparkFun_Bio_Sensor_Hub_Library\"\n\n// Include C++ libraries\n#include <SparkFun_Bio_Sensor_Hub_Library.h>\n#include <Wire.h>\n\nnode {\n    meta {\n        using Type = SparkFun_Bio_Sensor_Hub*;\n    }\n\n    static_assert(isValidDigitalPort(constant_input_Reset), \"must be a valid digital port\");\n    static_assert(isValidDigitalPort(constant_input_MFIO), \"must be a valid digital port\");\n\n    SparkFun_Bio_Sensor_Hub bioHub = SparkFun_Bio_Sensor_Hub(constant_input_Reset, constant_input_MFIO);\n\n    void evaluate(Context ctx) {\n        \n        if (isSettingUp()) {\n            auto wire = getValue<input_I2C>(ctx);\n            \n            if (bioHub.begin(*wire)!=0){\n                raiseError(ctx);\n                return;\n            }\n            if (bioHub.configBpm(MODE_TWO)!=0){\n                raiseError(ctx);\n                return;\n            }\n            // allow time for buffer to be loaded with data\n            delay(4000);\n        }\n\n        if (isInputDirty<input_UPD>(ctx)) {\n            bioData body;\n            body = bioHub.readBpm();\n            emitValue<output_BPM>(ctx, body.heartRate);\n            emitValue<output_SpO2>(ctx, body.oxygen);\n            emitValue<output_Conf>(ctx, body.confidence);\n            emitValue<output_Status>(ctx, body.status);\n            emitValue<output_exStat>(ctx, body.extStatus);\n            emitValue<output_Done>(ctx, 1);\n        }\n    }\n}\n"
        }
      ]
    }
  },
  "license": "MIT",
  "version": "0.0.3",
  "description": "XOD library for the SparkFun Pulse Oximeter and Heart Rate Monitor (SEN-15291). The sensor is an I²C based biometric sensor, utilising two chips from Maxim Integrated: the MAX32664 Bio Metric Sensor Hub and the MAX30101 Pulse Oximetry and Heart-Rate Module. Wraps https://github.com/sparkfun/SparkFun_Bio_Sensor_Hub_Library",
  "name": "sparkfun-pulse-oximeter"
}
