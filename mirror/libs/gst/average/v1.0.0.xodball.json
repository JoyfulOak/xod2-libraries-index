{
  "description": "Average a incomming number at the output.",
  "license": "Mit",
  "name": "average",
  "patches": {
    "@/average": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "\nstruct State {\n      // Number a;\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n // State* state = getState(ctx);\n    Number a = a;\n   \n    Number average = average;\n    average = getValue<output_OUT>(ctx);\n    Number sum = getValue<output_SUMOUT>(ctx);\n    int incist = getValue<output_INCOUT>(ctx);\n    incist ++;\n   //emitValue<output_inc_out>(ctx, incist);\n    Number Step = getValue<input_STEP>(ctx);\n   \n    if (incist >= Step)\n    {\n        incist = 0;\n        sum = (sum / Step);\n        average = sum;\n    }\n        else if (isInputDirty<input_INC>(ctx))\n        sum += getValue<input_IN>(ctx);\n    emitValue<output_INCOUT>(ctx, incist);\n    emitValue<output_OUT>(ctx, average);\n    emitValue<output_SUMOUT>(ctx, sum);\n   // state->a = a;\n}"
        }
      ],
      "nodes": {
        "B1OjlaOZE": {
          "id": "B1OjlaOZE",
          "label": "OUT",
          "position": {
            "x": 340,
            "y": 408
          },
          "type": "xod/patch-nodes/output-number"
        },
        "H1BbhcP-N": {
          "id": "H1BbhcP-N",
          "label": "IN",
          "position": {
            "x": 340,
            "y": 204
          },
          "type": "xod/patch-nodes/input-number"
        },
        "H1RXpBqWN": {
          "id": "H1RXpBqWN",
          "label": "SUMOUT",
          "position": {
            "x": 408,
            "y": 408
          },
          "type": "xod/patch-nodes/output-number"
        },
        "S1TwUhPb4": {
          "id": "S1TwUhPb4",
          "label": "INC",
          "position": {
            "x": 476,
            "y": 204
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "Sk3szp_ZE": {
          "id": "Sk3szp_ZE",
          "label": "INCOUT",
          "position": {
            "x": 442,
            "y": 408
          },
          "type": "xod/patch-nodes/output-number"
        },
        "SyHM25v-E": {
          "id": "SyHM25v-E",
          "label": "STEP",
          "position": {
            "x": 408,
            "y": 204
          },
          "type": "xod/patch-nodes/input-number"
        },
        "r1kgn5Db4": {
          "id": "r1kgn5Db4",
          "position": {
            "x": 340,
            "y": 306
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        }
      },
      "path": "@/average"
    },
    "@/main": {
      "comments": {
        "rkf308m-E": {
          "content": "Average a incomming number at the output.\nIN = number input\nStep =number of readings   \nINC = start next reading\nout = number (average) output\nSUMOUT = added readings\nINCOUT = number of recorded readings",
          "id": "rkf308m-E",
          "position": {
            "x": 510,
            "y": 204
          },
          "size": {
            "width": 306,
            "height": 153
          }
        }
      },
      "nodes": {
        "rJ1f3hOWN": {
          "boundLiterals": {
            "SyHM25v-E": "10"
          },
          "id": "rJ1f3hOWN",
          "position": {
            "x": 374,
            "y": 306
          },
          "type": "@/average"
        }
      },
      "path": "@/main"
    }
  },
  "version": "1.0.0"
}
