{
  "description": "Make your Arduino pretend to be a keyboard",
  "license": "AGPL-3.0",
  "name": "hid",
  "patches": {
    "@/00-example-awesome": {
      "comments": {
        "HkZ2aF1FV": {
          "content": "Click a button on port D11 to print “This is awesome” like a keyboard.\n\n`delay`s are here just to add some drama.",
          "id": "HkZ2aF1FV",
          "position": {
            "x": 3,
            "y": 0,
            "units": "slots"
          },
          "size": {
            "height": 2,
            "width": 5,
            "units": "slots"
          }
        }
      },
      "links": {
        "BJTncYytE": {
          "id": "BJTncYytE",
          "input": {
            "nodeId": "HyjDtYktV",
            "pinKey": "SycI_t1tE"
          },
          "output": {
            "nodeId": "SJJ3qKkF4",
            "pinKey": "Bk4gU0drwJ-"
          }
        },
        "SJ0YYYJKN": {
          "id": "SJ0YYYJKN",
          "input": {
            "nodeId": "H1buKtJFE",
            "pinKey": "SJsQutkFE"
          },
          "output": {
            "nodeId": "HyjDtYktV",
            "pinKey": "SJdVOFktV"
          }
        },
        "Skup5F1FN": {
          "id": "Skup5F1FN",
          "input": {
            "nodeId": "rkya9tJtN",
            "pinKey": "SkSuD6LMb"
          },
          "output": {
            "nodeId": "HyjDtYktV",
            "pinKey": "By7v_YJFV"
          }
        },
        "Sy5acKyFN": {
          "id": "Sy5acKyFN",
          "input": {
            "nodeId": "H1buKtJFE",
            "pinKey": "SycI_t1tE"
          },
          "output": {
            "nodeId": "rkya9tJtN",
            "pinKey": "Bk4gU0drwJ-"
          }
        },
        "r1on9tJtN": {
          "id": "r1on9tJtN",
          "input": {
            "nodeId": "SJJ3qKkF4",
            "pinKey": "SkSuD6LMb"
          },
          "output": {
            "nodeId": "SyEvtFyYV",
            "pinKey": "By7v_YJFV"
          }
        },
        "rJcjYF1Y4": {
          "id": "rJcjYF1Y4",
          "input": {
            "nodeId": "SyEvtFyYV",
            "pinKey": "SycI_t1tE"
          },
          "output": {
            "nodeId": "Hy4iFKkFN",
            "pinKey": "BJ--G1tI-"
          }
        },
        "rJsKKY1KN": {
          "id": "rJsKKY1KN",
          "input": {
            "nodeId": "SyEvtFyYV",
            "pinKey": "SJsQutkFE"
          },
          "output": {
            "nodeId": "rJyPKt1t4",
            "pinKey": "Bk4gUYJY4"
          }
        },
        "ryTYYF1FV": {
          "id": "ryTYYF1FV",
          "input": {
            "nodeId": "HyjDtYktV",
            "pinKey": "SJsQutkFE"
          },
          "output": {
            "nodeId": "SyEvtFyYV",
            "pinKey": "SJdVOFktV"
          }
        }
      },
      "nodes": {
        "H1buKtJFE": {
          "boundLiterals": {
            "HkESdY1YN": "\"awesome\""
          },
          "id": "H1buKtJFE",
          "position": {
            "x": -3,
            "y": 3,
            "units": "slots"
          },
          "type": "@/print"
        },
        "Hy4iFKkFN": {
          "boundLiterals": {
            "ByNiWkt8Z": "D11"
          },
          "id": "Hy4iFKkFN",
          "position": {
            "x": -1,
            "y": -2,
            "units": "slots"
          },
          "type": "xod/common-hardware/button"
        },
        "HyjDtYktV": {
          "boundLiterals": {
            "HkESdY1YN": "\"is \""
          },
          "id": "HyjDtYktV",
          "position": {
            "x": -3,
            "y": 1,
            "units": "slots"
          },
          "type": "@/print"
        },
        "SJJ3qKkF4": {
          "boundLiterals": {
            "Skre8ROSv1-": "0.2"
          },
          "id": "SJJ3qKkF4",
          "position": {
            "x": -2,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/core/delay"
        },
        "SyEvtFyYV": {
          "boundLiterals": {
            "HkESdY1YN": "\"This \""
          },
          "id": "SyEvtFyYV",
          "position": {
            "x": -3,
            "y": -1,
            "units": "slots"
          },
          "type": "@/print"
        },
        "rJyPKt1t4": {
          "id": "rJyPKt1t4",
          "position": {
            "x": -3,
            "y": -3,
            "units": "slots"
          },
          "type": "@/keyboard"
        },
        "rkya9tJtN": {
          "boundLiterals": {
            "Skre8ROSv1-": "0.5"
          },
          "id": "rkya9tJtN",
          "position": {
            "x": -2,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/core/delay"
        }
      },
      "path": "@/00-example-awesome"
    },
    "@/keyboard": {
      "attachments": [
        {
          "content": "\n#pragma XOD require \"https://github.com/arduino-libraries/Keyboard\"\n\n{{#global}}\n#include <Keyboard.h>\n{{/global}}\n\nusing Type = Keyboard_*;\n\nstruct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    auto kb = &Keyboard;\n    if (isInputDirty<input_INIT>(ctx))\n        kb->begin();\n\n    emitValue<output_DEV>(ctx, kb);\n}\n",
          "encoding": "utf8",
          "filename": "patch.cpp"
        }
      ],
      "description": "An object representing the virtual keyboard device.",
      "nodes": {
        "Bk4gUYJY4": {
          "description": "The keyboard device",
          "id": "Bk4gUYJY4",
          "label": "DEV",
          "position": {
            "x": 3,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-self"
        },
        "H1sCrKktN": {
          "boundLiterals": {
            "__out__": "On Boot"
          },
          "description": "Configures board peripherals to start HID simulation. Trigger once before keyboard usage.",
          "id": "H1sCrKktN",
          "label": "INIT",
          "position": {
            "x": 3,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SyU-UtJt4": {
          "id": "SyU-UtJt4",
          "position": {
            "x": 3,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        }
      },
      "path": "@/keyboard"
    },
    "@/print": {
      "attachments": [
        {
          "content": "\nstruct State {\n};\n\n{{ GENERATED_CODE }}\n\nvoid evaluate(Context ctx) {\n    // Chain DEV to DEV'\n    emitValue<output_DEVU0027>(ctx, getValue<input_DEV>(ctx));\n\n    if (!isInputDirty<input_DO>(ctx))\n        return;\n\n    auto kb = getValue<input_DEV>(ctx);\n    auto s = getValue<input_S>(ctx);\n\n    for (auto it = s.iterate(); it; ++it)\n        kb->write(*it);\n\n    emitValue<output_DONE>(ctx, 1);\n}\n",
          "encoding": "utf8",
          "filename": "patch.cpp"
        }
      ],
      "description": "An HID keyboard character key sequence",
      "nodes": {
        "BJJOOY1Y4": {
          "id": "BJJOOY1Y4",
          "position": {
            "x": 5,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "By7v_YJFV": {
          "description": "Pulses when the print is done",
          "id": "By7v_YJFV",
          "label": "DONE",
          "position": {
            "x": 7,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HkESdY1YN": {
          "description": "String to send like it was typed by a human. Note, the node knows nothing about the current OS language, Caps Lock state, and input focus. The print will be correct only when the EN layout with no Caps Lock is active.",
          "id": "HkESdY1YN",
          "label": "S",
          "position": {
            "x": 7,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-string"
        },
        "SJdVOFktV": {
          "id": "SJdVOFktV",
          "label": "DEV'",
          "position": {
            "x": 5,
            "y": 3,
            "units": "slots"
          },
          "type": "@/output-keyboard"
        },
        "SJsQutkFE": {
          "description": "The keyboard device",
          "id": "SJsQutkFE",
          "label": "DEV",
          "position": {
            "x": 5,
            "y": 1,
            "units": "slots"
          },
          "type": "@/input-keyboard"
        },
        "SycI_t1tE": {
          "description": "Send the key sequence defined by `S` at the maximal possible rate.",
          "id": "SycI_t1tE",
          "label": "DO",
          "position": {
            "x": 9,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        }
      },
      "path": "@/print"
    }
  },
  "version": "1.0.0"
}
