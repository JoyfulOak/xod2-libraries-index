{
  "apiKey": "802310bf-aab3-4e11-95a3-c331c7401510",
  "description": "Simple way to manage 28BYJ-48 steppers",
  "license": "MIT",
  "name": "stepper-28byj48",
  "patches": {
    "@/stepper-28byj48": {
      "links": {
        "B1f5tf6JN": {
          "id": "B1f5tf6JN",
          "input": {
            "nodeId": "rJM_Ff6J4",
            "pinKey": "BygApTqym"
          },
          "output": {
            "nodeId": "H1adYfpJV",
            "pinKey": "__out__"
          }
        },
        "BJPnhzp14": {
          "id": "BJPnhzp14",
          "input": {
            "nodeId": "rJ7onz6y4",
            "pinKey": "S113G_ZJm"
          },
          "output": {
            "nodeId": "H1gN3Mpk4",
            "pinKey": "S1YR_dgeG"
          }
        },
        "BkrOtM6kV": {
          "id": "BkrOtM6kV",
          "input": {
            "nodeId": "rkJwYMpyV",
            "pinKey": "rJjXFA9JQ"
          },
          "output": {
            "nodeId": "ByUSYG6JV",
            "pinKey": "__out__"
          }
        },
        "ByE22z6kV": {
          "id": "ByE22z6kV",
          "input": {
            "nodeId": "rkEj2zTy4",
            "pinKey": "S113G_ZJm"
          },
          "output": {
            "nodeId": "SkQEhG6yN",
            "pinKey": "S1YR_dgeG"
          }
        },
        "ByShnMakN": {
          "id": "ByShnMakN",
          "input": {
            "nodeId": "rylmo2zaJN",
            "pinKey": "S113G_ZJm"
          },
          "output": {
            "nodeId": "BkfN2GpJN",
            "pinKey": "S1YR_dgeG"
          }
        },
        "ByW92f6yV": {
          "id": "ByW92f6yV",
          "input": {
            "nodeId": "HkJw3Ga1N",
            "pinKey": "rJg00Nhe-"
          },
          "output": {
            "nodeId": "SJYY3G61V",
            "pinKey": "Sk43MO-Jm"
          }
        },
        "ByhYhzakN": {
          "id": "ByhYhzakN",
          "input": {
            "nodeId": "SJYY3G61V",
            "pinKey": "S113G_ZJm"
          },
          "output": {
            "nodeId": "SkWiif6J4",
            "pinKey": "S1YR_dgeG"
          }
        },
        "ByqonGa1V": {
          "id": "ByqonGa1V",
          "input": {
            "nodeId": "H1wq3fTkE",
            "pinKey": "rJg00Nhe-"
          },
          "output": {
            "nodeId": "rJ7onz6y4",
            "pinKey": "Sk43MO-Jm"
          }
        },
        "H18BhfTyE": {
          "id": "H18BhfTyE",
          "input": {
            "nodeId": "BkfN2GpJN",
            "pinKey": "SkUn_Olef"
          },
          "output": {
            "nodeId": "S1mf2fpyE",
            "pinKey": "__out__"
          }
        },
        "H1CFYfakE": {
          "id": "H1CFYfakE",
          "input": {
            "nodeId": "rkJwYMpyV",
            "pinKey": "BygApTqym"
          },
          "output": {
            "nodeId": "H1adYfpJV",
            "pinKey": "__out__"
          }
        },
        "H1OH2zp1E": {
          "id": "H1OH2zp1E",
          "input": {
            "nodeId": "SkQEhG6yN",
            "pinKey": "SkUn_Olef"
          },
          "output": {
            "nodeId": "S1mf2fpyE",
            "pinKey": "__out__"
          }
        },
        "HJNShMa1V": {
          "id": "HJNShMa1V",
          "input": {
            "nodeId": "H1gN3Mpk4",
            "pinKey": "SkUn_Olef"
          },
          "output": {
            "nodeId": "S1mf2fpyE",
            "pinKey": "__out__"
          }
        },
        "Hk2M3Gp1E": {
          "id": "Hk2M3Gp1E",
          "input": {
            "nodeId": "SkWiif6J4",
            "pinKey": "SkUn_Olef"
          },
          "output": {
            "nodeId": "S1mf2fpyE",
            "pinKey": "__out__"
          }
        },
        "HkbcKGTJE": {
          "id": "HkbcKGTJE",
          "input": {
            "nodeId": "H1ZdYf6JN",
            "pinKey": "BygApTqym"
          },
          "output": {
            "nodeId": "H1adYfpJV",
            "pinKey": "__out__"
          }
        },
        "HyQwhMayN": {
          "id": "HyQwhMayN",
          "input": {
            "nodeId": "rkJwYMpyV",
            "pinKey": "HJ6HsEngZ"
          },
          "output": {
            "nodeId": "HkJw3Ga1N",
            "pinKey": "B19RYS3lW"
          }
        },
        "Hy__Kf6y4": {
          "id": "Hy__Kf6y4",
          "input": {
            "nodeId": "H1ZdYf6JN",
            "pinKey": "rJjXFA9JQ"
          },
          "output": {
            "nodeId": "HkKHtfpy4",
            "pinKey": "__out__"
          }
        },
        "S1pchMTkV": {
          "id": "S1pchMTkV",
          "input": {
            "nodeId": "H1ZdYf6JN",
            "pinKey": "HJ6HsEngZ"
          },
          "output": {
            "nodeId": "HJs92GakV",
            "pinKey": "B19RYS3lW"
          }
        },
        "SJ3inGT1E": {
          "id": "SJ3inGT1E",
          "input": {
            "nodeId": "HyR5hfTkN",
            "pinKey": "rJg00Nhe-"
          },
          "output": {
            "nodeId": "rkEj2zTy4",
            "pinKey": "Sk43MO-Jm"
          }
        },
        "SkqqnfpyN": {
          "id": "SkqqnfpyN",
          "input": {
            "nodeId": "Hyx_tf61V",
            "pinKey": "HJ6HsEngZ"
          },
          "output": {
            "nodeId": "H1wq3fTkE",
            "pinKey": "B19RYS3lW"
          }
        },
        "SktuFfTy4": {
          "id": "SktuFfTy4",
          "input": {
            "nodeId": "rJM_Ff6J4",
            "pinKey": "rJjXFA9JQ"
          },
          "output": {
            "nodeId": "rJlYrKz61V",
            "pinKey": "__out__"
          }
        },
        "SkwutMa1E": {
          "id": "SkwutMa1E",
          "input": {
            "nodeId": "Hyx_tf61V",
            "pinKey": "rJjXFA9JQ"
          },
          "output": {
            "nodeId": "HyuBYz6y4",
            "pinKey": "__out__"
          }
        },
        "SyWi3zTJE": {
          "id": "SyWi3zTJE",
          "input": {
            "nodeId": "rJM_Ff6J4",
            "pinKey": "HJ6HsEngZ"
          },
          "output": {
            "nodeId": "HyR5hfTkN",
            "pinKey": "B19RYS3lW"
          }
        },
        "r1k5FfTkV": {
          "id": "r1k5FfTkV",
          "input": {
            "nodeId": "Hyx_tf61V",
            "pinKey": "BygApTqym"
          },
          "output": {
            "nodeId": "H1adYfpJV",
            "pinKey": "__out__"
          }
        },
        "rJjonf61N": {
          "id": "rJjonf61N",
          "input": {
            "nodeId": "HJs92GakV",
            "pinKey": "rJg00Nhe-"
          },
          "output": {
            "nodeId": "rylmo2zaJN",
            "pinKey": "Sk43MO-Jm"
          }
        }
      },
      "nodes": {
        "BkfN2GpJN": {
          "boundLiterals": {
            "ByjTuuxef": "00000010b"
          },
          "id": "BkfN2GpJN",
          "position": {
            "x": 27,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/bits/bitwise-and"
        },
        "ByUSYG6JV": {
          "description": "Orange wire pin",
          "id": "ByUSYG6JV",
          "label": "ORG",
          "position": {
            "x": 12,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "H1ZdYf6JN": {
          "id": "H1ZdYf6JN",
          "position": {
            "x": 26,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/gpio/digital-write"
        },
        "H1adYfpJV": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Signal to update output",
          "id": "H1adYfpJV",
          "label": "UPD",
          "position": {
            "x": 38,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "H1gN3Mpk4": {
          "boundLiterals": {
            "ByjTuuxef": "00000100b"
          },
          "id": "H1gN3Mpk4",
          "position": {
            "x": 23,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/bits/bitwise-and"
        },
        "H1wq3fTkE": {
          "id": "H1wq3fTkE",
          "position": {
            "x": 23,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/greater"
        },
        "HJs92GakV": {
          "id": "HJs92GakV",
          "position": {
            "x": 27,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/greater"
        },
        "HkJw3Ga1N": {
          "id": "HkJw3Ga1N",
          "position": {
            "x": 19,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/greater"
        },
        "HkKHtfpy4": {
          "description": "Pink wire pin",
          "id": "HkKHtfpy4",
          "label": "PNK",
          "position": {
            "x": 14,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "HyR5hfTkN": {
          "id": "HyR5hfTkN",
          "position": {
            "x": 31,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/core/greater"
        },
        "HyuBYz6y4": {
          "description": "Yellow wire pin",
          "id": "HyuBYz6y4",
          "label": "YLL",
          "position": {
            "x": 13,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "Hyx_tf61V": {
          "id": "Hyx_tf61V",
          "position": {
            "x": 22,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/gpio/digital-write"
        },
        "S1mf2fpyE": {
          "description": "Bitmask from controller",
          "id": "S1mf2fpyE",
          "label": "MSK",
          "position": {
            "x": 25,
            "y": 0,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "SJYY3G61V": {
          "id": "SJYY3G61V",
          "position": {
            "x": 19,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/bits/u8-to-number"
        },
        "SkQEhG6yN": {
          "boundLiterals": {
            "ByjTuuxef": "00000001b"
          },
          "id": "SkQEhG6yN",
          "position": {
            "x": 31,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/bits/bitwise-and"
        },
        "SkWiif6J4": {
          "boundLiterals": {
            "ByjTuuxef": "00001000b"
          },
          "id": "SkWiif6J4",
          "position": {
            "x": 19,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/bits/bitwise-and"
        },
        "rJ7onz6y4": {
          "id": "rJ7onz6y4",
          "position": {
            "x": 23,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/bits/u8-to-number"
        },
        "rJM_Ff6J4": {
          "id": "rJM_Ff6J4",
          "position": {
            "x": 30,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/gpio/digital-write"
        },
        "rJlYrKz61V": {
          "description": "Blue wire pin",
          "id": "rJlYrKz61V",
          "label": "BLU",
          "position": {
            "x": 15,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-port"
        },
        "rkEj2zTy4": {
          "id": "rkEj2zTy4",
          "position": {
            "x": 31,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/bits/u8-to-number"
        },
        "rkJwYMpyV": {
          "id": "rkJwYMpyV",
          "position": {
            "x": 18,
            "y": 4,
            "units": "slots"
          },
          "type": "xod/gpio/digital-write"
        },
        "rylmo2zaJN": {
          "id": "rylmo2zaJN",
          "position": {
            "x": 27,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/bits/u8-to-number"
        }
      },
      "path": "@/stepper-28byj48"
    },
    "@/stepper-28byj48-controller": {
      "attachments": [
        {
          "filename": "patch.cpp",
          "encoding": "utf-8",
          "content": "\nstruct State {\n    int index = 0;\n};\n\n{{ GENERATED_CODE }}\n\nuint8_t positions[8] = {\n    0b00001000,\n    0b00001100,\n    0b00000100,\n    0b00000110,\n    0b00000010,\n    0b00000011,\n    0b00000001,\n    0b00001001,\n};\n\nvoid emitAll(Context ctx, uint8_t pins, int index, bool off) {\n    emitValue<output_MSK>(ctx, pins);\n    emitValue<output_OFF>(ctx, off);\n    emitValue<output_DONE>(ctx, 1);\n}\n\nvoid evaluate(Context ctx) {\n    State* state = getState(ctx);\n\n    if (isInputDirty<input_DSB>(ctx)) {\n        return emitAll(ctx, 0, state->index, true);\n    }\n    if (!isInputDirty<input_STP>(ctx)) {\n        return;\n    }\n\n    bool ccw = getValue<input_CCW>(ctx);\n\n    if (ccw) {\n        state->index -= 1;\n    } else {\n        state->index += 1;\n    }\n\n    if (state->index < 0) {\n        state->index = 7;\n    } else if (state->index > 7) {\n        state->index = 0;\n    }\n\n    emitAll(ctx, positions[state->index], state->index, false);\n}\n"
        }
      ],
      "nodes": {
        "HJoCCxaJ4": {
          "description": "Done updating",
          "id": "HJoCCxaJ4",
          "label": "DONE",
          "position": {
            "x": 2,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "HJsjaJak4": {
          "description": "Do a half-step for each pulse",
          "id": "HJsjaJak4",
          "label": "STP",
          "position": {
            "x": 2,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "HkH4QxpkE": {
          "boundLiterals": {
            "__in__": "True"
          },
          "description": "true when all wires are off",
          "id": "HkH4QxpkE",
          "label": "OFF",
          "position": {
            "x": 4,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-boolean"
        },
        "Hy72aJTkN": {
          "description": "false to run clockwise and true to run counter-clockwise",
          "id": "Hy72aJTkN",
          "label": "CCW",
          "position": {
            "x": 4,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "HyCE0J61E": {
          "id": "HyCE0J61E",
          "position": {
            "x": 4,
            "y": 2,
            "units": "slots"
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "Hym7XeTyE": {
          "description": "Disable the motor",
          "id": "Hym7XeTyE",
          "label": "DSB",
          "position": {
            "x": 6,
            "y": 1,
            "units": "slots"
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "SkWThzpyV": {
          "id": "SkWThzpyV",
          "label": "MSK",
          "position": {
            "x": 6,
            "y": 3,
            "units": "slots"
          },
          "type": "xod/patch-nodes/output-byte"
        }
      },
      "path": "@/stepper-28byj48-controller"
    },
    "@/stepper-28byj48-example": {
      "links": {
        "B1kiSGayN": {
          "id": "B1kiSGayN",
          "input": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "Hy72aJTkN"
          },
          "output": {
            "nodeId": "Sy9qHMa1N",
            "pinKey": "HkyxURuSPyW"
          }
        },
        "BySvqfTy4": {
          "id": "BySvqfTy4",
          "input": {
            "nodeId": "HyBsFfpJV",
            "pinKey": "H1adYfpJV"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "HJoCCxaJ4"
          }
        },
        "HyB_9z6JV": {
          "id": "HyB_9z6JV",
          "input": {
            "nodeId": "S19P9zT1E",
            "pinKey": "H1adYfpJV"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "HJoCCxaJ4"
          }
        },
        "Skg02G61V": {
          "id": "Skg02G61V",
          "input": {
            "nodeId": "S19P9zT1E",
            "pinKey": "S1mf2fpyE"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "SkWThzpyV"
          }
        },
        "r1CcBMpkE": {
          "id": "r1CcBMpkE",
          "input": {
            "nodeId": "Sy9qHMa1N",
            "pinKey": "ryTIROHwkW"
          },
          "output": {
            "nodeId": "rJbqHfa1E",
            "pinKey": "HJU8CE2lW"
          }
        },
        "r1GAhG61N": {
          "id": "r1GAhG61N",
          "input": {
            "nodeId": "HJv_5zp14",
            "pinKey": "S1mf2fpyE"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "SkWThzpyV"
          }
        },
        "rJCT2fTkN": {
          "id": "rJCT2fTkN",
          "input": {
            "nodeId": "HyBsFfpJV",
            "pinKey": "S1mf2fpyE"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "SkWThzpyV"
          }
        },
        "rJn7cgTJV": {
          "id": "rJn7cgTJV",
          "input": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "HJsjaJak4"
          },
          "output": {
            "nodeId": "Bk_mcxaJE",
            "pinKey": "HJU8CE2lW"
          }
        },
        "rkVKqGT1E": {
          "id": "rkVKqGT1E",
          "input": {
            "nodeId": "HJv_5zp14",
            "pinKey": "H1adYfpJV"
          },
          "output": {
            "nodeId": "HJ14DxTJ4",
            "pinKey": "HJoCCxaJ4"
          }
        }
      },
      "nodes": {
        "Bk_mcxaJE": {
          "boundLiterals": {
            "B13SCNhl-": "0.01"
          },
          "id": "Bk_mcxaJE",
          "position": {
            "x": -28,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/core/clock"
        },
        "HJ14DxTJ4": {
          "boundLiterals": {
            "BJ2k6lpy4": "D4",
            "HJF1alayV": "D2",
            "rJoyTlpkE": "D3",
            "ryxnkpx61V": "D5"
          },
          "id": "HJ14DxTJ4",
          "position": {
            "x": -25,
            "y": 0,
            "units": "slots"
          },
          "type": "@/stepper-28byj48-controller"
        },
        "HJv_5zp14": {
          "boundLiterals": {
            "ByUSYG6JV": "D10",
            "HkKHtfpy4": "D12",
            "HyuBYz6y4": "D11",
            "rJlYrKz61V": "D13"
          },
          "id": "HJv_5zp14",
          "position": {
            "x": -20,
            "y": 2,
            "units": "slots"
          },
          "type": "@/stepper-28byj48"
        },
        "HyBsFfpJV": {
          "boundLiterals": {
            "ByUSYG6JV": "D2",
            "HkKHtfpy4": "D4",
            "HyuBYz6y4": "D3",
            "rJlYrKz61V": "D5"
          },
          "id": "HyBsFfpJV",
          "position": {
            "x": -34,
            "y": 2,
            "units": "slots"
          },
          "type": "@/stepper-28byj48"
        },
        "S19P9zT1E": {
          "boundLiterals": {
            "ByUSYG6JV": "D6",
            "HkKHtfpy4": "D8",
            "HyuBYz6y4": "D7",
            "rJlYrKz61V": "D9"
          },
          "id": "S19P9zT1E",
          "position": {
            "x": -27,
            "y": 2,
            "units": "slots"
          },
          "type": "@/stepper-28byj48"
        },
        "Sy9qHMa1N": {
          "id": "Sy9qHMa1N",
          "position": {
            "x": -24,
            "y": -1,
            "units": "slots"
          },
          "type": "xod/core/flip-flop"
        },
        "rJbqHfa1E": {
          "boundLiterals": {
            "B13SCNhl-": "2.5"
          },
          "id": "rJbqHfa1E",
          "position": {
            "x": -23,
            "y": -2,
            "units": "slots"
          },
          "type": "xod/core/clock"
        }
      },
      "path": "@/stepper-28byj48-example"
    }
  },
  "version": "0.0.3"
}
