{
  "description": "2004 LCD",
  "name": "jmark",
  "patches": {
    "@/main": {
      "links": {
        "BJQ5JJKCQ": {
          "id": "BJQ5JJKCQ",
          "input": {
            "nodeId": "BJ1dkkYR7",
            "pinKey": "H1ZDZkytCX"
          },
          "output": {
            "nodeId": "S1OluL_aQ",
            "pinKey": "rksccsp-W"
          }
        },
        "BkWzpZYTQ": {
          "id": "BkWzpZYTQ",
          "input": {
            "nodeId": "rJzBPLdTQ",
            "pinKey": "S1TehAk2b"
          },
          "output": {
            "nodeId": "Hk-Za-tTm",
            "pinKey": "S1aYu6KJf"
          }
        },
        "H1_R1hw6m": {
          "id": "H1_R1hw6m",
          "input": {
            "nodeId": "r1uT1nw6m",
            "pinKey": "H1SnkoxC-"
          },
          "output": {
            "nodeId": "H1j212P6Q",
            "pinKey": "B19RYS3lW"
          }
        },
        "HJ1eQ-uTX": {
          "id": "HJ1eQ-uTX",
          "input": {
            "nodeId": "B1mLexdaX",
            "pinKey": "Hkqu9oaWb"
          },
          "output": {
            "nodeId": "Syi613DaQ",
            "pinKey": "rkPlxjg0W"
          }
        },
        "HJvhYGuTX": {
          "id": "HJvhYGuTX",
          "input": {
            "nodeId": "Sy49bZuTm",
            "pinKey": "HJF16v_kz"
          },
          "output": {
            "nodeId": "HyhjcbupQ",
            "pinKey": "Bk4gU0drwJ-"
          }
        },
        "SJQMd8_a7": {
          "id": "SJQMd8_a7",
          "input": {
            "nodeId": "S1OluL_aQ",
            "pinKey": "Hkqu9oaWb"
          },
          "output": {
            "nodeId": "r1uT1nw6m",
            "pinKey": "rkPlxjg0W"
          }
        },
        "SJQUVfua7": {
          "id": "SJQUVfua7",
          "input": {
            "nodeId": "Sy49bZuTm",
            "pinKey": "r1W1Tw_yz"
          },
          "output": {
            "nodeId": "HyhjcbupQ",
            "pinKey": "HkU3vNoTW"
          }
        },
        "SJQztzOa7": {
          "id": "SJQztzOa7",
          "input": {
            "nodeId": "B1mLexdaX",
            "pinKey": "BkeKcj6ZZ"
          },
          "output": {
            "nodeId": "Sy49bZuTm",
            "pinKey": "BJMlTDdJM"
          }
        },
        "rJcAknP67": {
          "id": "rJcAknP67",
          "input": {
            "nodeId": "Syi613DaQ",
            "pinKey": "H1SnkoxC-"
          },
          "output": {
            "nodeId": "H1j212P6Q",
            "pinKey": "B19RYS3lW"
          }
        },
        "rJldjIOTQ": {
          "id": "rJldjIOTQ",
          "input": {
            "nodeId": "SkkPoL_67",
            "pinKey": "BkeKcj6ZZ"
          },
          "output": {
            "nodeId": "rJzBPLdTQ",
            "pinKey": "H1sM2A12-"
          }
        },
        "rkVdsL_TQ": {
          "id": "rkVdsL_TQ",
          "input": {
            "nodeId": "S1OluL_aQ",
            "pinKey": "BkeKcj6ZZ"
          },
          "output": {
            "nodeId": "SkkPoL_67",
            "pinKey": "rksccsp-W"
          }
        },
        "rkXRlGdTX": {
          "id": "rkXRlGdTX",
          "input": {
            "nodeId": "HyhjcbupQ",
            "pinKey": "SkSuD6LMb"
          },
          "output": {
            "nodeId": "H1j212P6Q",
            "pinKey": "B19RYS3lW"
          }
        },
        "rySCJ2D6X": {
          "id": "rySCJ2D6X",
          "input": {
            "nodeId": "H1j212P6Q",
            "pinKey": "rJg00Nhe-"
          },
          "output": {
            "nodeId": "ryEuJ2DaQ",
            "pinKey": "BkoeN9Ay7"
          }
        },
        "Syh_uJt0X": {
          "id": "Syh_uJt0X",
          "output": {
            "nodeId": "B1mLexdaX",
            "pinKey": "rksccsp-W"
          },
          "input": {
            "nodeId": "BJ1dkkYR7",
            "pinKey": "Hy3fkkK07"
          }
        },
        "rJNK_ytAX": {
          "id": "rJNK_ytAX",
          "output": {
            "nodeId": "SkkPoL_67",
            "pinKey": "rksccsp-W"
          },
          "input": {
            "nodeId": "BJ1dkkYR7",
            "pinKey": "SyfwWJ1t0m"
          }
        },
        "By7cOkFAX": {
          "id": "By7cOkFAX",
          "output": {
            "nodeId": "Sy49bZuTm",
            "pinKey": "BJMlTDdJM"
          },
          "input": {
            "nodeId": "BJ1dkkYR7",
            "pinKey": "rkifkyFRX"
          }
        }
      },
      "nodes": {
        "B1mLexdaX": {
          "id": "B1mLexdaX",
          "position": {
            "x": 374,
            "y": 408
          },
          "type": "xod/core/concat"
        },
        "BJ1dkkYR7": {
          "id": "BJ1dkkYR7",
          "position": {
            "x": 238,
            "y": 510
          },
          "type": "@/textlcd20x04test"
        },
        "H1j212P6Q": {
          "boundLiterals": {
            "HJbACN3gb": "0.1"
          },
          "id": "H1j212P6Q",
          "position": {
            "x": 340,
            "y": 102
          },
          "type": "xod/core/greater"
        },
        "Hk-Za-tTm": {
          "boundLiterals": {
            "BJ5HJ6t1f": "5"
          },
          "id": "Hk-Za-tTm",
          "position": {
            "x": 204,
            "y": 0
          },
          "type": "xod/core/square-wave"
        },
        "HyhjcbupQ": {
          "boundLiterals": {
            "Skre8ROSv1-": "5.0"
          },
          "id": "HyhjcbupQ",
          "position": {
            "x": 544,
            "y": 102
          },
          "type": "xod/core/delay"
        },
        "S1OluL_aQ": {
          "id": "S1OluL_aQ",
          "position": {
            "x": 204,
            "y": 408
          },
          "type": "xod/core/concat"
        },
        "SkkPoL_67": {
          "boundLiterals": {
            "Hkqu9oaWb": "\"VR \""
          },
          "id": "SkkPoL_67",
          "position": {
            "x": 238,
            "y": 306
          },
          "type": "xod/core/concat"
        },
        "Sy49bZuTm": {
          "boundLiterals": {
            "HJF16v_kz": "Never"
          },
          "id": "Sy49bZuTm",
          "position": {
            "x": 544,
            "y": 204
          },
          "type": "xod/core/timer"
        },
        "Syi613DaQ": {
          "boundLiterals": {
            "H1k6ksgA-": "\"GOOD\"",
            "S151eoeAW": "\"NG \""
          },
          "id": "Syi613DaQ",
          "position": {
            "x": 272,
            "y": 204
          },
          "type": "xod/core/if-else(string)"
        },
        "r1uT1nw6m": {
          "boundLiterals": {
            "H1k6ksgA-": "\"LED ON \"",
            "S151eoeAW": "\"LED OFF \""
          },
          "id": "r1uT1nw6m",
          "position": {
            "x": 136,
            "y": 204
          },
          "type": "xod/core/if-else(string)"
        },
        "rJzBPLdTQ": {
          "boundLiterals": {
            "Hkry2AJhW": "A2"
          },
          "id": "rJzBPLdTQ",
          "position": {
            "x": 136,
            "y": 102
          },
          "type": "xod/common-hardware/pot"
        },
        "ryEuJ2DaQ": {
          "boundLiterals": {
            "r1l3XcR17": "A1"
          },
          "id": "ryEuJ2DaQ",
          "position": {
            "x": 374,
            "y": 0
          },
          "type": "xod/common-hardware/analog-sensor"
        }
      },
      "path": "@/main"
    },
    "@/textlcd20x04test": {
      "attachments": [
        {
          "content": "\n{{#global}}\n#include <Wire.h>\n#include <LiquidCrystal_I2C.h>\n{{/global}}\n\nstruct State {\n    LiquidCrystal_I2C* lcd;\n};\n\n{{ GENERATED_CODE }}\n\nvoid printLine(LiquidCrystal_I2C* lcd, uint8_t lineIndex, XString str) {\n    lcd->setCursor(0, lineIndex);\n    uint8_t whitespace = 20;\n    for (auto it = str.iterate(); it; ++it, --whitespace)\n        lcd->write(*it);\n\n    // Clear the rest of the line\n    while (whitespace--)\n        lcd->write(' ');\n}\n\nvoid evaluate(Context ctx) {\n    if (!isInputDirty<input_UPD>(ctx))\n        return;\n\n    State* state = getState(ctx);\n    auto lcd = state->lcd;\n    if (!state->lcd) {\n        uint8_t addr = getValue<input_ADDR>(ctx);\n        state->lcd = lcd = new LiquidCrystal_I2C(addr, 20, 4);\n        lcd->begin();\n    }\n\n    printLine(lcd, 0, getValue<input_L1>(ctx));\n    printLine(lcd, 1, getValue<input_L2>(ctx));\n    printLine(lcd, 2, getValue<input_L3>(ctx));\n    printLine(lcd, 3, getValue<input_L4>(ctx));\n    lcd->setBacklight(getValue<input_BL>(ctx));\n    emitValue<output_DONE>(ctx, 1);\n}\n",
          "encoding": "utf-8",
          "filename": "patch.cpp"
        }
      ],
      "nodes": {
        "B17PW11Y0m": {
          "boundLiterals": {
            "__out__": "Continuously"
          },
          "description": "Triggers new write",
          "id": "B17PW11Y0m",
          "label": "UPD",
          "position": {
            "x": 306,
            "y": 0
          },
          "type": "xod/patch-nodes/input-pulse"
        },
        "B1VwZyyY0X": {
          "id": "B1VwZyyY0X",
          "position": {
            "x": 0,
            "y": 102
          },
          "type": "xod/patch-nodes/not-implemented-in-xod"
        },
        "H1DWkkY07": {
          "boundLiterals": {
            "__out__": "27h"
          },
          "description": "IÂ²C address of the expander chip.",
          "id": "H1DWkkY07",
          "label": "ADDR",
          "position": {
            "x": -1,
            "y": -1
          },
          "type": "xod/patch-nodes/input-byte"
        },
        "H1Hw-kyFRQ": {
          "description": "Fires when write is done",
          "id": "H1Hw-kyFRQ",
          "label": "DONE",
          "position": {
            "x": -1,
            "y": 203
          },
          "type": "xod/patch-nodes/output-pulse"
        },
        "H1ZDZkytCX": {
          "description": "Text for the first line",
          "id": "H1ZDZkytCX",
          "label": "L1",
          "position": {
            "x": 135,
            "y": -1
          },
          "type": "xod/patch-nodes/input-string"
        },
        "Hy3fkkK07": {
          "description": "Text for the 3rd line",
          "id": "Hy3fkkK07",
          "label": "L3",
          "position": {
            "x": 204,
            "y": 0
          },
          "type": "xod/patch-nodes/input-string"
        },
        "SyfwWJ1t0m": {
          "description": "Text for the second line",
          "id": "SyfwWJ1t0m",
          "label": "L2",
          "position": {
            "x": 169,
            "y": -1
          },
          "type": "xod/patch-nodes/input-string"
        },
        "rJxvbkyFCQ": {
          "boundLiterals": {
            "__out__": "True"
          },
          "description": "Backlight enable/disable",
          "id": "rJxvbkyFCQ",
          "label": "BL",
          "position": {
            "x": 67,
            "y": -1
          },
          "type": "xod/patch-nodes/input-boolean"
        },
        "rkifkyFRX": {
          "description": "Text for the 4th line",
          "id": "rkifkyFRX",
          "label": "L4",
          "position": {
            "x": 238,
            "y": 0
          },
          "type": "xod/patch-nodes/input-string"
        }
      },
      "path": "@/textlcd20x04test"
    }
  },
  "version": "0.0.1"
}
